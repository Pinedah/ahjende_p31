[2025-07-23 19:29:52] REQUEST recibido: Array
(
    [action] => obtener_planteles
)

[2025-07-23 19:29:52] Query planteles: SELECT id_pla, nom_pla, fec_pla FROM plantel ORDER BY nom_pla ASC
[2025-07-23 19:29:52] Planteles encontrados: 3
[2025-07-23 19:29:52] REQUEST recibido: Array
(
    [action] => obtener_citas_totales_por_plantel
    [id_pla] => 6
)

[2025-07-23 19:29:52] REQUEST recibido: Array
(
    [action] => obtener_citas_totales_por_plantel
    [id_pla] => 3
)

[2025-07-23 19:29:52] REQUEST recibido: Array
(
    [action] => obtener_citas_totales_por_plantel
    [id_pla] => 2
)

[2025-07-23 19:29:52] REQUEST recibido: Array
(
    [action] => obtener_ejecutivos_con_citas
)

[2025-07-23 19:29:52] Query ejecutivos con citas: SELECT e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje,
					         p.nom_pla as plantel_principal,
					         COUNT(DISTINCT c.id_cit) as citas_propias,
					         GROUP_CONCAT(DISTINCT CONCAT(pa.id_pla, ':', pa.nom_pla) SEPARATOR '|') as planteles_asociados,
					         COUNT(DISTINCT pe.id_pla) as total_planteles_asociados,
					         CASE 
					             WHEN e.ult_eje IS NULL THEN 'sin_sesion'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) <= 1 THEN 'verde'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) BETWEEN 2 AND 3 THEN 'amarillo'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) >= 4 THEN 'rojo'
					             ELSE 'sin_sesion'
					         END as semaforo_sesion,
					         TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) as dias_desde_ultima_sesion
					  FROM ejecutivo e 
					  LEFT JOIN plantel p ON e.id_pla = p.id_pla 
					  LEFT JOIN cita c ON e.id_eje = c.id_eje2 AND c.eli_cit = 1 
					  LEFT JOIN planteles_ejecutivo pe ON e.id_eje = pe.id_eje
					  LEFT JOIN plantel pa ON pe.id_pla = pa.id_pla
					  GROUP BY e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje, p.nom_pla
					  ORDER BY e.eli_eje DESC, e.nom_eje ASC
[2025-07-23 19:29:52] Ejecutivo ID: 9 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 19:29:52] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 19:29:52] Ejecutivo ID: 16 - Citas propias: 6 - Citas hijos: 7 - Total: 13
[2025-07-23 19:29:52] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 19:29:52] Ejecutivo ID: 12 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:29:52] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 19:29:52] Ejecutivo ID: 15 - Citas propias: 5 - Citas hijos: 2 - Total: 7
[2025-07-23 19:29:52] Ejecutivo ID: 18 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:29:52] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 19:29:52] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:29:52] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:29:52] Ejecutivo ID: 10 - Citas propias: 3 - Citas hijos: 4 - Total: 7
[2025-07-23 19:29:52] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:29:52] Ejecutivo ID: 2 - Citas propias: 6 - Citas hijos: 5 - Total: 11
[2025-07-23 19:29:52] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:29:52] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:29:52] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:29:52] Ejecutivo ID: 13 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:29:52] Ejecutivo ID: 1 - Citas propias: 0 - Citas hijos: 0 - Total: 0
[2025-07-23 19:29:52] Ejecutivos con citas encontrados: 15
[2025-07-23 19:29:52] REQUEST recibido: Array
(
    [action] => obtener_citas_totales_por_plantel
    [id_pla] => 6
)

[2025-07-23 19:29:52] REQUEST recibido: Array
(
    [action] => obtener_citas_totales_por_plantel
    [id_pla] => 3
)

[2025-07-23 19:29:52] REQUEST recibido: Array
(
    [action] => obtener_citas_totales_por_plantel
    [id_pla] => 2
)

[2025-07-23 19:30:23] REQUEST recibido: Array
(
    [action] => obtener_ejecutivos_con_citas
)

[2025-07-23 19:30:23] Query ejecutivos con citas: SELECT e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje,
					         p.nom_pla as plantel_principal,
					         COUNT(DISTINCT c.id_cit) as citas_propias,
					         GROUP_CONCAT(DISTINCT CONCAT(pa.id_pla, ':', pa.nom_pla) SEPARATOR '|') as planteles_asociados,
					         COUNT(DISTINCT pe.id_pla) as total_planteles_asociados,
					         CASE 
					             WHEN e.ult_eje IS NULL THEN 'sin_sesion'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) <= 1 THEN 'verde'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) BETWEEN 2 AND 3 THEN 'amarillo'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) >= 4 THEN 'rojo'
					             ELSE 'sin_sesion'
					         END as semaforo_sesion,
					         TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) as dias_desde_ultima_sesion
					  FROM ejecutivo e 
					  LEFT JOIN plantel p ON e.id_pla = p.id_pla 
					  LEFT JOIN cita c ON e.id_eje = c.id_eje2 AND c.eli_cit = 1 
					  LEFT JOIN planteles_ejecutivo pe ON e.id_eje = pe.id_eje
					  LEFT JOIN plantel pa ON pe.id_pla = pa.id_pla
					  GROUP BY e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje, p.nom_pla
					  ORDER BY e.eli_eje DESC, e.nom_eje ASC
[2025-07-23 19:30:23] Ejecutivo ID: 9 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 19:30:23] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 19:30:23] Ejecutivo ID: 16 - Citas propias: 6 - Citas hijos: 7 - Total: 13
[2025-07-23 19:30:23] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 19:30:23] Ejecutivo ID: 12 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:30:23] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 19:30:23] Ejecutivo ID: 15 - Citas propias: 5 - Citas hijos: 2 - Total: 7
[2025-07-23 19:30:23] Ejecutivo ID: 18 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:30:23] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 19:30:23] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:30:23] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:30:23] Ejecutivo ID: 10 - Citas propias: 3 - Citas hijos: 4 - Total: 7
[2025-07-23 19:30:23] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:30:23] Ejecutivo ID: 2 - Citas propias: 6 - Citas hijos: 5 - Total: 11
[2025-07-23 19:30:23] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:30:23] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:30:23] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:30:23] Ejecutivo ID: 13 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:30:23] Ejecutivo ID: 1 - Citas propias: 0 - Citas hijos: 0 - Total: 0
[2025-07-23 19:30:23] Ejecutivos con citas encontrados: 15
[2025-07-23 19:30:47] REQUEST recibido: Array
(
    [action] => actualizar_ejecutivo
    [nom_eje] => Luis Rodriguez
    [tel_eje] => 555-2002
    [id_padre] => null
    [eli_eje] => 1
    [id_eje] => 10
)

[2025-07-23 19:31:02] REQUEST recibido: Array
(
    [action] => obtener_ejecutivos_con_citas
)

[2025-07-23 19:31:02] Query ejecutivos con citas: SELECT e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje,
					         p.nom_pla as plantel_principal,
					         COUNT(DISTINCT c.id_cit) as citas_propias,
					         GROUP_CONCAT(DISTINCT CONCAT(pa.id_pla, ':', pa.nom_pla) SEPARATOR '|') as planteles_asociados,
					         COUNT(DISTINCT pe.id_pla) as total_planteles_asociados,
					         CASE 
					             WHEN e.ult_eje IS NULL THEN 'sin_sesion'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) <= 1 THEN 'verde'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) BETWEEN 2 AND 3 THEN 'amarillo'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) >= 4 THEN 'rojo'
					             ELSE 'sin_sesion'
					         END as semaforo_sesion,
					         TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) as dias_desde_ultima_sesion
					  FROM ejecutivo e 
					  LEFT JOIN plantel p ON e.id_pla = p.id_pla 
					  LEFT JOIN cita c ON e.id_eje = c.id_eje2 AND c.eli_cit = 1 
					  LEFT JOIN planteles_ejecutivo pe ON e.id_eje = pe.id_eje
					  LEFT JOIN plantel pa ON pe.id_pla = pa.id_pla
					  GROUP BY e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje, p.nom_pla
					  ORDER BY e.eli_eje DESC, e.nom_eje ASC
[2025-07-23 19:31:02] Ejecutivo ID: 9 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 19:31:02] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 19:31:02] Ejecutivo ID: 16 - Citas propias: 6 - Citas hijos: 7 - Total: 13
[2025-07-23 19:31:02] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 19:31:02] Ejecutivo ID: 12 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:31:02] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 19:31:02] Ejecutivo ID: 15 - Citas propias: 5 - Citas hijos: 2 - Total: 7
[2025-07-23 19:31:02] Ejecutivo ID: 18 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:31:02] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 19:31:02] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:31:02] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:31:02] Ejecutivo ID: 10 - Citas propias: 3 - Citas hijos: 4 - Total: 7
[2025-07-23 19:31:02] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:31:02] Ejecutivo ID: 2 - Citas propias: 6 - Citas hijos: 5 - Total: 11
[2025-07-23 19:31:02] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:31:02] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:31:02] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:31:02] Ejecutivo ID: 13 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:31:02] Ejecutivo ID: 1 - Citas propias: 0 - Citas hijos: 0 - Total: 0
[2025-07-23 19:31:02] Ejecutivos con citas encontrados: 15
[2025-07-23 19:31:11] REQUEST recibido: Array
(
    [action] => actualizar_ejecutivo
    [nom_eje] => Carmen Morales Vega
    [tel_eje] => 555-2003
    [id_padre] => 16
    [eli_eje] => 1
    [id_eje] => 11
)

[2025-07-23 19:31:12] REQUEST recibido: Array
(
    [action] => obtener_ejecutivos_con_citas
)

[2025-07-23 19:31:12] Query ejecutivos con citas: SELECT e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje,
					         p.nom_pla as plantel_principal,
					         COUNT(DISTINCT c.id_cit) as citas_propias,
					         GROUP_CONCAT(DISTINCT CONCAT(pa.id_pla, ':', pa.nom_pla) SEPARATOR '|') as planteles_asociados,
					         COUNT(DISTINCT pe.id_pla) as total_planteles_asociados,
					         CASE 
					             WHEN e.ult_eje IS NULL THEN 'sin_sesion'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) <= 1 THEN 'verde'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) BETWEEN 2 AND 3 THEN 'amarillo'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) >= 4 THEN 'rojo'
					             ELSE 'sin_sesion'
					         END as semaforo_sesion,
					         TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) as dias_desde_ultima_sesion
					  FROM ejecutivo e 
					  LEFT JOIN plantel p ON e.id_pla = p.id_pla 
					  LEFT JOIN cita c ON e.id_eje = c.id_eje2 AND c.eli_cit = 1 
					  LEFT JOIN planteles_ejecutivo pe ON e.id_eje = pe.id_eje
					  LEFT JOIN plantel pa ON pe.id_pla = pa.id_pla
					  GROUP BY e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje, p.nom_pla
					  ORDER BY e.eli_eje DESC, e.nom_eje ASC
[2025-07-23 19:31:12] Ejecutivo ID: 9 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 19:31:12] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 19:31:12] Ejecutivo ID: 16 - Citas propias: 6 - Citas hijos: 7 - Total: 13
[2025-07-23 19:31:12] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 19:31:12] Ejecutivo ID: 12 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:31:12] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 19:31:12] Ejecutivo ID: 15 - Citas propias: 5 - Citas hijos: 2 - Total: 7
[2025-07-23 19:31:12] Ejecutivo ID: 18 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:31:12] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 19:31:12] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:31:12] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:31:12] Ejecutivo ID: 10 - Citas propias: 3 - Citas hijos: 4 - Total: 7
[2025-07-23 19:31:12] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:31:12] Ejecutivo ID: 2 - Citas propias: 6 - Citas hijos: 5 - Total: 11
[2025-07-23 19:31:12] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:31:12] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:31:12] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:31:12] Ejecutivo ID: 13 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:31:12] Ejecutivo ID: 1 - Citas propias: 0 - Citas hijos: 0 - Total: 0
[2025-07-23 19:31:12] Ejecutivos con citas encontrados: 15
[2025-07-23 19:31:16] REQUEST recibido: Array
(
    [action] => obtener_planteles
)

[2025-07-23 19:31:16] Query planteles: SELECT id_pla, nom_pla, fec_pla FROM plantel ORDER BY nom_pla ASC
[2025-07-23 19:31:16] Planteles encontrados: 3
[2025-07-23 19:31:17] REQUEST recibido: Array
(
    [action] => obtener_citas_totales_por_plantel
    [id_pla] => 6
)

[2025-07-23 19:31:17] REQUEST recibido: Array
(
    [action] => obtener_citas_totales_por_plantel
    [id_pla] => 3
)

[2025-07-23 19:31:17] REQUEST recibido: Array
(
    [action] => obtener_citas_totales_por_plantel
    [id_pla] => 2
)

[2025-07-23 19:31:17] REQUEST recibido: Array
(
    [action] => obtener_ejecutivos_con_citas
)

[2025-07-23 19:31:17] Query ejecutivos con citas: SELECT e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje,
					         p.nom_pla as plantel_principal,
					         COUNT(DISTINCT c.id_cit) as citas_propias,
					         GROUP_CONCAT(DISTINCT CONCAT(pa.id_pla, ':', pa.nom_pla) SEPARATOR '|') as planteles_asociados,
					         COUNT(DISTINCT pe.id_pla) as total_planteles_asociados,
					         CASE 
					             WHEN e.ult_eje IS NULL THEN 'sin_sesion'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) <= 1 THEN 'verde'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) BETWEEN 2 AND 3 THEN 'amarillo'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) >= 4 THEN 'rojo'
					             ELSE 'sin_sesion'
					         END as semaforo_sesion,
					         TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) as dias_desde_ultima_sesion
					  FROM ejecutivo e 
					  LEFT JOIN plantel p ON e.id_pla = p.id_pla 
					  LEFT JOIN cita c ON e.id_eje = c.id_eje2 AND c.eli_cit = 1 
					  LEFT JOIN planteles_ejecutivo pe ON e.id_eje = pe.id_eje
					  LEFT JOIN plantel pa ON pe.id_pla = pa.id_pla
					  GROUP BY e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje, p.nom_pla
					  ORDER BY e.eli_eje DESC, e.nom_eje ASC
[2025-07-23 19:31:17] Ejecutivo ID: 9 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 19:31:17] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 19:31:17] Ejecutivo ID: 16 - Citas propias: 6 - Citas hijos: 7 - Total: 13
[2025-07-23 19:31:17] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 19:31:17] Ejecutivo ID: 12 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:31:17] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 19:31:17] Ejecutivo ID: 15 - Citas propias: 5 - Citas hijos: 2 - Total: 7
[2025-07-23 19:31:17] Ejecutivo ID: 18 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:31:17] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 19:31:17] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:31:17] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:31:17] Ejecutivo ID: 10 - Citas propias: 3 - Citas hijos: 4 - Total: 7
[2025-07-23 19:31:17] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:31:17] Ejecutivo ID: 2 - Citas propias: 6 - Citas hijos: 5 - Total: 11
[2025-07-23 19:31:17] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:31:17] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:31:17] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:31:17] Ejecutivo ID: 13 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:31:17] Ejecutivo ID: 1 - Citas propias: 0 - Citas hijos: 0 - Total: 0
[2025-07-23 19:31:17] Ejecutivos con citas encontrados: 15
[2025-07-23 19:31:17] REQUEST recibido: Array
(
    [action] => obtener_citas_totales_por_plantel
    [id_pla] => 6
)

[2025-07-23 19:31:17] REQUEST recibido: Array
(
    [action] => obtener_citas_totales_por_plantel
    [id_pla] => 2
)

[2025-07-23 19:32:35] REQUEST recibido: Array
(
    [action] => obtener_ejecutivos_con_citas
)

[2025-07-23 19:32:35] Query ejecutivos con citas: SELECT e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje,
					         p.nom_pla as plantel_principal,
					         COUNT(DISTINCT c.id_cit) as citas_propias,
					         GROUP_CONCAT(DISTINCT CONCAT(pa.id_pla, ':', pa.nom_pla) SEPARATOR '|') as planteles_asociados,
					         COUNT(DISTINCT pe.id_pla) as total_planteles_asociados,
					         CASE 
					             WHEN e.ult_eje IS NULL THEN 'sin_sesion'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) <= 1 THEN 'verde'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) BETWEEN 2 AND 3 THEN 'amarillo'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) >= 4 THEN 'rojo'
					             ELSE 'sin_sesion'
					         END as semaforo_sesion,
					         TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) as dias_desde_ultima_sesion
					  FROM ejecutivo e 
					  LEFT JOIN plantel p ON e.id_pla = p.id_pla 
					  LEFT JOIN cita c ON e.id_eje = c.id_eje2 AND c.eli_cit = 1 
					  LEFT JOIN planteles_ejecutivo pe ON e.id_eje = pe.id_eje
					  LEFT JOIN plantel pa ON pe.id_pla = pa.id_pla
					  GROUP BY e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje, p.nom_pla
					  ORDER BY e.eli_eje DESC, e.nom_eje ASC
[2025-07-23 19:32:35] Ejecutivo ID: 9 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 19:32:35] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 19:32:35] Ejecutivo ID: 16 - Citas propias: 6 - Citas hijos: 7 - Total: 13
[2025-07-23 19:32:35] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 19:32:35] Ejecutivo ID: 12 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:32:35] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 19:32:35] Ejecutivo ID: 15 - Citas propias: 5 - Citas hijos: 2 - Total: 7
[2025-07-23 19:32:35] Ejecutivo ID: 18 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:32:35] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 19:32:35] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:32:35] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:32:35] Ejecutivo ID: 10 - Citas propias: 3 - Citas hijos: 4 - Total: 7
[2025-07-23 19:32:35] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:32:35] Ejecutivo ID: 2 - Citas propias: 6 - Citas hijos: 5 - Total: 11
[2025-07-23 19:32:35] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:32:35] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:32:35] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:32:35] Ejecutivo ID: 13 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:32:35] Ejecutivo ID: 1 - Citas propias: 0 - Citas hijos: 0 - Total: 0
[2025-07-23 19:32:35] Ejecutivos con citas encontrados: 15
[2025-07-23 19:32:44] REQUEST recibido: Array
(
    [action] => actualizar_ejecutivo
    [nom_eje] => Samuel Ortigoza
    [tel_eje] => 1111-111
    [id_padre] => null
    [eli_eje] => 1
    [id_eje] => 20
)

[2025-07-23 19:34:44] REQUEST recibido: Array
(
    [action] => obtener_ejecutivos_con_citas
)

[2025-07-23 19:34:44] Query ejecutivos con citas: SELECT e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje,
					         p.nom_pla as plantel_principal,
					         COUNT(DISTINCT c.id_cit) as citas_propias,
					         GROUP_CONCAT(DISTINCT CONCAT(pa.id_pla, ':', pa.nom_pla) SEPARATOR '|') as planteles_asociados,
					         COUNT(DISTINCT pe.id_pla) as total_planteles_asociados,
					         CASE 
					             WHEN e.ult_eje IS NULL THEN 'sin_sesion'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) <= 1 THEN 'verde'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) BETWEEN 2 AND 3 THEN 'amarillo'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) >= 4 THEN 'rojo'
					             ELSE 'sin_sesion'
					         END as semaforo_sesion,
					         TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) as dias_desde_ultima_sesion
					  FROM ejecutivo e 
					  LEFT JOIN plantel p ON e.id_pla = p.id_pla 
					  LEFT JOIN cita c ON e.id_eje = c.id_eje2 AND c.eli_cit = 1 
					  LEFT JOIN planteles_ejecutivo pe ON e.id_eje = pe.id_eje
					  LEFT JOIN plantel pa ON pe.id_pla = pa.id_pla
					  GROUP BY e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje, p.nom_pla
					  ORDER BY e.eli_eje DESC, e.nom_eje ASC
[2025-07-23 19:34:44] Ejecutivo ID: 9 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 19:34:44] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 19:34:44] Ejecutivo ID: 16 - Citas propias: 6 - Citas hijos: 7 - Total: 13
[2025-07-23 19:34:44] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 19:34:44] Ejecutivo ID: 12 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:34:44] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 19:34:44] Ejecutivo ID: 15 - Citas propias: 5 - Citas hijos: 2 - Total: 7
[2025-07-23 19:34:44] Ejecutivo ID: 18 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:34:44] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 19:34:44] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:34:44] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:34:44] Ejecutivo ID: 10 - Citas propias: 3 - Citas hijos: 4 - Total: 7
[2025-07-23 19:34:44] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:34:44] Ejecutivo ID: 2 - Citas propias: 6 - Citas hijos: 5 - Total: 11
[2025-07-23 19:34:44] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:34:44] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:34:44] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:34:44] Ejecutivo ID: 13 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:34:44] Ejecutivo ID: 1 - Citas propias: 0 - Citas hijos: 0 - Total: 0
[2025-07-23 19:34:44] Ejecutivos con citas encontrados: 15
[2025-07-23 19:35:04] REQUEST recibido: Array
(
    [action] => obtener_ejecutivos_con_citas
)

[2025-07-23 19:35:04] Query ejecutivos con citas: SELECT e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje,
					         p.nom_pla as plantel_principal,
					         COUNT(DISTINCT c.id_cit) as citas_propias,
					         GROUP_CONCAT(DISTINCT CONCAT(pa.id_pla, ':', pa.nom_pla) SEPARATOR '|') as planteles_asociados,
					         COUNT(DISTINCT pe.id_pla) as total_planteles_asociados,
					         CASE 
					             WHEN e.ult_eje IS NULL THEN 'sin_sesion'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) <= 1 THEN 'verde'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) BETWEEN 2 AND 3 THEN 'amarillo'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) >= 4 THEN 'rojo'
					             ELSE 'sin_sesion'
					         END as semaforo_sesion,
					         TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) as dias_desde_ultima_sesion
					  FROM ejecutivo e 
					  LEFT JOIN plantel p ON e.id_pla = p.id_pla 
					  LEFT JOIN cita c ON e.id_eje = c.id_eje2 AND c.eli_cit = 1 
					  LEFT JOIN planteles_ejecutivo pe ON e.id_eje = pe.id_eje
					  LEFT JOIN plantel pa ON pe.id_pla = pa.id_pla
					  GROUP BY e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje, p.nom_pla
					  ORDER BY e.eli_eje DESC, e.nom_eje ASC
[2025-07-23 19:35:04] Ejecutivo ID: 9 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 19:35:04] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 19:35:04] Ejecutivo ID: 16 - Citas propias: 6 - Citas hijos: 7 - Total: 13
[2025-07-23 19:35:04] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 19:35:04] Ejecutivo ID: 12 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:35:04] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 19:35:04] Ejecutivo ID: 15 - Citas propias: 5 - Citas hijos: 2 - Total: 7
[2025-07-23 19:35:04] Ejecutivo ID: 18 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:35:04] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 19:35:04] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:35:04] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:35:04] Ejecutivo ID: 10 - Citas propias: 3 - Citas hijos: 4 - Total: 7
[2025-07-23 19:35:04] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:35:04] Ejecutivo ID: 2 - Citas propias: 6 - Citas hijos: 5 - Total: 11
[2025-07-23 19:35:04] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:35:04] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:35:04] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:35:04] Ejecutivo ID: 13 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:35:04] Ejecutivo ID: 1 - Citas propias: 0 - Citas hijos: 0 - Total: 0
[2025-07-23 19:35:04] Ejecutivos con citas encontrados: 15
[2025-07-23 19:35:26] REQUEST recibido: Array
(
    [action] => actualizar_ejecutivo
    [nom_eje] => Samuel Ortigoza
    [tel_eje] => 1111-111
    [eli_eje] => 1
    [id_eje] => 20
)

[2025-07-23 19:35:27] REQUEST recibido: Array
(
    [action] => obtener_ejecutivos_con_citas
)

[2025-07-23 19:35:28] Query ejecutivos con citas: SELECT e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje,
					         p.nom_pla as plantel_principal,
					         COUNT(DISTINCT c.id_cit) as citas_propias,
					         GROUP_CONCAT(DISTINCT CONCAT(pa.id_pla, ':', pa.nom_pla) SEPARATOR '|') as planteles_asociados,
					         COUNT(DISTINCT pe.id_pla) as total_planteles_asociados,
					         CASE 
					             WHEN e.ult_eje IS NULL THEN 'sin_sesion'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) <= 1 THEN 'verde'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) BETWEEN 2 AND 3 THEN 'amarillo'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) >= 4 THEN 'rojo'
					             ELSE 'sin_sesion'
					         END as semaforo_sesion,
					         TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) as dias_desde_ultima_sesion
					  FROM ejecutivo e 
					  LEFT JOIN plantel p ON e.id_pla = p.id_pla 
					  LEFT JOIN cita c ON e.id_eje = c.id_eje2 AND c.eli_cit = 1 
					  LEFT JOIN planteles_ejecutivo pe ON e.id_eje = pe.id_eje
					  LEFT JOIN plantel pa ON pe.id_pla = pa.id_pla
					  GROUP BY e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje, p.nom_pla
					  ORDER BY e.eli_eje DESC, e.nom_eje ASC
[2025-07-23 19:35:28] Ejecutivo ID: 9 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 19:35:28] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 19:35:28] Ejecutivo ID: 16 - Citas propias: 6 - Citas hijos: 7 - Total: 13
[2025-07-23 19:35:28] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 19:35:28] Ejecutivo ID: 12 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:35:28] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 19:35:28] Ejecutivo ID: 15 - Citas propias: 5 - Citas hijos: 2 - Total: 7
[2025-07-23 19:35:28] Ejecutivo ID: 18 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:35:28] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 19:35:28] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:35:28] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:35:28] Ejecutivo ID: 10 - Citas propias: 3 - Citas hijos: 4 - Total: 7
[2025-07-23 19:35:28] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:35:28] Ejecutivo ID: 2 - Citas propias: 6 - Citas hijos: 5 - Total: 11
[2025-07-23 19:35:28] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:35:28] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:35:28] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:35:28] Ejecutivo ID: 13 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:35:28] Ejecutivo ID: 1 - Citas propias: 0 - Citas hijos: 0 - Total: 0
[2025-07-23 19:35:28] Ejecutivos con citas encontrados: 15
[2025-07-23 19:35:30] REQUEST recibido: Array
(
    [action] => obtener_planteles
)

[2025-07-23 19:35:30] Query planteles: SELECT id_pla, nom_pla, fec_pla FROM plantel ORDER BY nom_pla ASC
[2025-07-23 19:35:30] Planteles encontrados: 3
[2025-07-23 19:35:30] REQUEST recibido: Array
(
    [action] => obtener_citas_totales_por_plantel
    [id_pla] => 6
)

[2025-07-23 19:35:30] REQUEST recibido: Array
(
    [action] => obtener_citas_totales_por_plantel
    [id_pla] => 3
)

[2025-07-23 19:35:30] REQUEST recibido: Array
(
    [action] => obtener_citas_totales_por_plantel
    [id_pla] => 2
)

[2025-07-23 19:35:30] REQUEST recibido: Array
(
    [action] => obtener_ejecutivos_con_citas
)

[2025-07-23 19:35:30] Query ejecutivos con citas: SELECT e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje,
					         p.nom_pla as plantel_principal,
					         COUNT(DISTINCT c.id_cit) as citas_propias,
					         GROUP_CONCAT(DISTINCT CONCAT(pa.id_pla, ':', pa.nom_pla) SEPARATOR '|') as planteles_asociados,
					         COUNT(DISTINCT pe.id_pla) as total_planteles_asociados,
					         CASE 
					             WHEN e.ult_eje IS NULL THEN 'sin_sesion'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) <= 1 THEN 'verde'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) BETWEEN 2 AND 3 THEN 'amarillo'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) >= 4 THEN 'rojo'
					             ELSE 'sin_sesion'
					         END as semaforo_sesion,
					         TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) as dias_desde_ultima_sesion
					  FROM ejecutivo e 
					  LEFT JOIN plantel p ON e.id_pla = p.id_pla 
					  LEFT JOIN cita c ON e.id_eje = c.id_eje2 AND c.eli_cit = 1 
					  LEFT JOIN planteles_ejecutivo pe ON e.id_eje = pe.id_eje
					  LEFT JOIN plantel pa ON pe.id_pla = pa.id_pla
					  GROUP BY e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje, p.nom_pla
					  ORDER BY e.eli_eje DESC, e.nom_eje ASC
[2025-07-23 19:35:30] Ejecutivo ID: 9 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 19:35:30] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 19:35:30] Ejecutivo ID: 16 - Citas propias: 6 - Citas hijos: 7 - Total: 13
[2025-07-23 19:35:30] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 19:35:30] Ejecutivo ID: 12 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:35:30] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 19:35:30] Ejecutivo ID: 15 - Citas propias: 5 - Citas hijos: 2 - Total: 7
[2025-07-23 19:35:30] Ejecutivo ID: 18 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:35:30] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 19:35:30] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:35:30] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:35:30] Ejecutivo ID: 10 - Citas propias: 3 - Citas hijos: 4 - Total: 7
[2025-07-23 19:35:30] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:35:30] Ejecutivo ID: 2 - Citas propias: 6 - Citas hijos: 5 - Total: 11
[2025-07-23 19:35:30] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:35:30] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:35:30] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:35:30] Ejecutivo ID: 13 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:35:30] Ejecutivo ID: 1 - Citas propias: 0 - Citas hijos: 0 - Total: 0
[2025-07-23 19:35:30] Ejecutivos con citas encontrados: 15
[2025-07-23 19:35:30] REQUEST recibido: Array
(
    [action] => obtener_citas_totales_por_plantel
    [id_pla] => 3
)

[2025-07-23 19:35:30] REQUEST recibido: Array
(
    [action] => obtener_citas_totales_por_plantel
    [id_pla] => 2
)

[2025-07-23 19:35:34] REQUEST recibido: Array
(
    [action] => obtener_ejecutivos_con_citas
)

[2025-07-23 19:35:34] Query ejecutivos con citas: SELECT e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje,
					         p.nom_pla as plantel_principal,
					         COUNT(DISTINCT c.id_cit) as citas_propias,
					         GROUP_CONCAT(DISTINCT CONCAT(pa.id_pla, ':', pa.nom_pla) SEPARATOR '|') as planteles_asociados,
					         COUNT(DISTINCT pe.id_pla) as total_planteles_asociados,
					         CASE 
					             WHEN e.ult_eje IS NULL THEN 'sin_sesion'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) <= 1 THEN 'verde'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) BETWEEN 2 AND 3 THEN 'amarillo'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) >= 4 THEN 'rojo'
					             ELSE 'sin_sesion'
					         END as semaforo_sesion,
					         TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) as dias_desde_ultima_sesion
					  FROM ejecutivo e 
					  LEFT JOIN plantel p ON e.id_pla = p.id_pla 
					  LEFT JOIN cita c ON e.id_eje = c.id_eje2 AND c.eli_cit = 1 
					  LEFT JOIN planteles_ejecutivo pe ON e.id_eje = pe.id_eje
					  LEFT JOIN plantel pa ON pe.id_pla = pa.id_pla
					  GROUP BY e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje, p.nom_pla
					  ORDER BY e.eli_eje DESC, e.nom_eje ASC
[2025-07-23 19:35:34] Ejecutivo ID: 9 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 19:35:34] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 19:35:34] Ejecutivo ID: 16 - Citas propias: 6 - Citas hijos: 7 - Total: 13
[2025-07-23 19:35:34] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 19:35:34] Ejecutivo ID: 12 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:35:34] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 19:35:34] Ejecutivo ID: 15 - Citas propias: 5 - Citas hijos: 2 - Total: 7
[2025-07-23 19:35:34] Ejecutivo ID: 18 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:35:34] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 19:35:34] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:35:34] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:35:34] Ejecutivo ID: 10 - Citas propias: 3 - Citas hijos: 4 - Total: 7
[2025-07-23 19:35:34] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:35:34] Ejecutivo ID: 2 - Citas propias: 6 - Citas hijos: 5 - Total: 11
[2025-07-23 19:35:34] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:35:34] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:35:34] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:35:34] Ejecutivo ID: 13 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:35:34] Ejecutivo ID: 1 - Citas propias: 0 - Citas hijos: 0 - Total: 0
[2025-07-23 19:35:34] Ejecutivos con citas encontrados: 15
[2025-07-23 19:36:57] REQUEST recibido: Array
(
    [action] => obtener_ejecutivos_con_citas
)

[2025-07-23 19:36:57] Query ejecutivos con citas: SELECT e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje,
					         p.nom_pla as plantel_principal,
					         COUNT(DISTINCT c.id_cit) as citas_propias,
					         GROUP_CONCAT(DISTINCT CONCAT(pa.id_pla, ':', pa.nom_pla) SEPARATOR '|') as planteles_asociados,
					         COUNT(DISTINCT pe.id_pla) as total_planteles_asociados,
					         CASE 
					             WHEN e.ult_eje IS NULL THEN 'sin_sesion'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) <= 1 THEN 'verde'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) BETWEEN 2 AND 3 THEN 'amarillo'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) >= 4 THEN 'rojo'
					             ELSE 'sin_sesion'
					         END as semaforo_sesion,
					         TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) as dias_desde_ultima_sesion
					  FROM ejecutivo e 
					  LEFT JOIN plantel p ON e.id_pla = p.id_pla 
					  LEFT JOIN cita c ON e.id_eje = c.id_eje2 AND c.eli_cit = 1 
					  LEFT JOIN planteles_ejecutivo pe ON e.id_eje = pe.id_eje
					  LEFT JOIN plantel pa ON pe.id_pla = pa.id_pla
					  GROUP BY e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje, p.nom_pla
					  ORDER BY e.eli_eje DESC, e.nom_eje ASC
[2025-07-23 19:36:57] Ejecutivo ID: 9 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 19:36:57] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 19:36:57] Ejecutivo ID: 16 - Citas propias: 6 - Citas hijos: 7 - Total: 13
[2025-07-23 19:36:57] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 19:36:57] Ejecutivo ID: 12 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:36:57] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 19:36:57] Ejecutivo ID: 15 - Citas propias: 5 - Citas hijos: 2 - Total: 7
[2025-07-23 19:36:57] Ejecutivo ID: 18 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:36:57] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 19:36:57] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:36:57] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:36:57] Ejecutivo ID: 10 - Citas propias: 3 - Citas hijos: 4 - Total: 7
[2025-07-23 19:36:57] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:36:57] Ejecutivo ID: 2 - Citas propias: 6 - Citas hijos: 5 - Total: 11
[2025-07-23 19:36:57] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:36:57] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:36:57] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:36:57] Ejecutivo ID: 13 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:36:57] Ejecutivo ID: 1 - Citas propias: 0 - Citas hijos: 0 - Total: 0
[2025-07-23 19:36:57] Ejecutivos con citas encontrados: 15
[2025-07-23 19:39:07] REQUEST recibido: Array
(
    [action] => obtener_planteles
)

[2025-07-23 19:39:07] Query planteles: SELECT id_pla, nom_pla, fec_pla FROM plantel ORDER BY nom_pla ASC
[2025-07-23 19:39:07] Planteles encontrados: 3
[2025-07-23 19:39:07] REQUEST recibido: Array
(
    [action] => obtener_citas_totales_por_plantel
    [id_pla] => 6
)

[2025-07-23 19:39:07] REQUEST recibido: Array
(
    [action] => obtener_citas_totales_por_plantel
    [id_pla] => 3
)

[2025-07-23 19:39:07] REQUEST recibido: Array
(
    [action] => obtener_citas_totales_por_plantel
    [id_pla] => 2
)

[2025-07-23 19:39:07] REQUEST recibido: Array
(
    [action] => obtener_ejecutivos_con_citas
)

[2025-07-23 19:39:07] Query ejecutivos con citas: SELECT e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje,
					         p.nom_pla as plantel_principal,
					         COUNT(DISTINCT c.id_cit) as citas_propias,
					         GROUP_CONCAT(DISTINCT CONCAT(pa.id_pla, ':', pa.nom_pla) SEPARATOR '|') as planteles_asociados,
					         COUNT(DISTINCT pe.id_pla) as total_planteles_asociados,
					         CASE 
					             WHEN e.ult_eje IS NULL THEN 'sin_sesion'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) <= 1 THEN 'verde'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) BETWEEN 2 AND 3 THEN 'amarillo'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) >= 4 THEN 'rojo'
					             ELSE 'sin_sesion'
					         END as semaforo_sesion,
					         TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) as dias_desde_ultima_sesion
					  FROM ejecutivo e 
					  LEFT JOIN plantel p ON e.id_pla = p.id_pla 
					  LEFT JOIN cita c ON e.id_eje = c.id_eje2 AND c.eli_cit = 1 
					  LEFT JOIN planteles_ejecutivo pe ON e.id_eje = pe.id_eje
					  LEFT JOIN plantel pa ON pe.id_pla = pa.id_pla
					  GROUP BY e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje, p.nom_pla
					  ORDER BY e.eli_eje DESC, e.nom_eje ASC
[2025-07-23 19:39:07] Ejecutivo ID: 9 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 19:39:07] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 19:39:07] Ejecutivo ID: 16 - Citas propias: 6 - Citas hijos: 7 - Total: 13
[2025-07-23 19:39:07] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 19:39:07] Ejecutivo ID: 12 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:39:07] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 19:39:07] Ejecutivo ID: 15 - Citas propias: 5 - Citas hijos: 2 - Total: 7
[2025-07-23 19:39:07] Ejecutivo ID: 18 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:39:07] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 19:39:07] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:39:07] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:39:07] Ejecutivo ID: 10 - Citas propias: 3 - Citas hijos: 4 - Total: 7
[2025-07-23 19:39:07] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:39:07] Ejecutivo ID: 2 - Citas propias: 6 - Citas hijos: 5 - Total: 11
[2025-07-23 19:39:07] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:39:07] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:39:07] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:39:07] Ejecutivo ID: 13 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:39:07] Ejecutivo ID: 1 - Citas propias: 0 - Citas hijos: 0 - Total: 0
[2025-07-23 19:39:07] Ejecutivos con citas encontrados: 15
[2025-07-23 19:39:07] REQUEST recibido: Array
(
    [action] => obtener_citas_totales_por_plantel
    [id_pla] => 6
)

[2025-07-23 19:39:07] REQUEST recibido: Array
(
    [action] => obtener_citas_totales_por_plantel
    [id_pla] => 2
)

[2025-07-23 19:41:12] REQUEST recibido: Array
(
    [action] => obtener_ejecutivos_con_citas
)

[2025-07-23 19:41:12] Query ejecutivos con citas: SELECT e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje,
					         p.nom_pla as plantel_principal,
					         COUNT(DISTINCT c.id_cit) as citas_propias,
					         GROUP_CONCAT(DISTINCT CONCAT(pa.id_pla, ':', pa.nom_pla) SEPARATOR '|') as planteles_asociados,
					         COUNT(DISTINCT pe.id_pla) as total_planteles_asociados,
					         CASE 
					             WHEN e.ult_eje IS NULL THEN 'sin_sesion'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) <= 1 THEN 'verde'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) BETWEEN 2 AND 3 THEN 'amarillo'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) >= 4 THEN 'rojo'
					             ELSE 'sin_sesion'
					         END as semaforo_sesion,
					         TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) as dias_desde_ultima_sesion
					  FROM ejecutivo e 
					  LEFT JOIN plantel p ON e.id_pla = p.id_pla 
					  LEFT JOIN cita c ON e.id_eje = c.id_eje2 AND c.eli_cit = 1 
					  LEFT JOIN planteles_ejecutivo pe ON e.id_eje = pe.id_eje
					  LEFT JOIN plantel pa ON pe.id_pla = pa.id_pla
					  GROUP BY e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje, p.nom_pla
					  ORDER BY e.eli_eje DESC, e.nom_eje ASC
[2025-07-23 19:41:12] Ejecutivo ID: 9 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 19:41:12] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 19:41:12] Ejecutivo ID: 16 - Citas propias: 6 - Citas hijos: 7 - Total: 13
[2025-07-23 19:41:12] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 19:41:12] Ejecutivo ID: 12 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:41:12] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 19:41:12] Ejecutivo ID: 15 - Citas propias: 5 - Citas hijos: 2 - Total: 7
[2025-07-23 19:41:12] Ejecutivo ID: 18 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:41:12] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 19:41:12] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:41:12] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:41:12] Ejecutivo ID: 10 - Citas propias: 3 - Citas hijos: 4 - Total: 7
[2025-07-23 19:41:12] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:41:12] Ejecutivo ID: 2 - Citas propias: 6 - Citas hijos: 5 - Total: 11
[2025-07-23 19:41:12] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:41:12] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:41:12] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:41:12] Ejecutivo ID: 13 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:41:12] Ejecutivo ID: 1 - Citas propias: 0 - Citas hijos: 0 - Total: 0
[2025-07-23 19:41:12] Ejecutivos con citas encontrados: 15
[2025-07-23 19:41:25] REQUEST recibido: Array
(
    [action] => obtener_ejecutivos_con_citas
)

[2025-07-23 19:41:25] Query ejecutivos con citas: SELECT e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje,
					         p.nom_pla as plantel_principal,
					         COUNT(DISTINCT c.id_cit) as citas_propias,
					         GROUP_CONCAT(DISTINCT CONCAT(pa.id_pla, ':', pa.nom_pla) SEPARATOR '|') as planteles_asociados,
					         COUNT(DISTINCT pe.id_pla) as total_planteles_asociados,
					         CASE 
					             WHEN e.ult_eje IS NULL THEN 'sin_sesion'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) <= 1 THEN 'verde'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) BETWEEN 2 AND 3 THEN 'amarillo'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) >= 4 THEN 'rojo'
					             ELSE 'sin_sesion'
					         END as semaforo_sesion,
					         TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) as dias_desde_ultima_sesion
					  FROM ejecutivo e 
					  LEFT JOIN plantel p ON e.id_pla = p.id_pla 
					  LEFT JOIN cita c ON e.id_eje = c.id_eje2 AND c.eli_cit = 1 
					  LEFT JOIN planteles_ejecutivo pe ON e.id_eje = pe.id_eje
					  LEFT JOIN plantel pa ON pe.id_pla = pa.id_pla
					  GROUP BY e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje, p.nom_pla
					  ORDER BY e.eli_eje DESC, e.nom_eje ASC
[2025-07-23 19:41:25] Ejecutivo ID: 9 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 19:41:25] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 19:41:25] Ejecutivo ID: 16 - Citas propias: 6 - Citas hijos: 7 - Total: 13
[2025-07-23 19:41:25] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 19:41:25] Ejecutivo ID: 12 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:41:25] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 19:41:25] Ejecutivo ID: 15 - Citas propias: 5 - Citas hijos: 2 - Total: 7
[2025-07-23 19:41:25] Ejecutivo ID: 18 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:41:25] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 19:41:25] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:41:25] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:41:25] Ejecutivo ID: 10 - Citas propias: 3 - Citas hijos: 4 - Total: 7
[2025-07-23 19:41:25] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:41:25] Ejecutivo ID: 2 - Citas propias: 6 - Citas hijos: 5 - Total: 11
[2025-07-23 19:41:25] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:41:25] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:41:25] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:41:25] Ejecutivo ID: 13 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:41:25] Ejecutivo ID: 1 - Citas propias: 0 - Citas hijos: 0 - Total: 0
[2025-07-23 19:41:25] Ejecutivos con citas encontrados: 15
[2025-07-23 19:42:03] REQUEST recibido: Array
(
    [action] => obtener_ejecutivos_con_citas
)

[2025-07-23 19:42:03] Query ejecutivos con citas: SELECT e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje,
					         p.nom_pla as plantel_principal,
					         COUNT(DISTINCT c.id_cit) as citas_propias,
					         GROUP_CONCAT(DISTINCT CONCAT(pa.id_pla, ':', pa.nom_pla) SEPARATOR '|') as planteles_asociados,
					         COUNT(DISTINCT pe.id_pla) as total_planteles_asociados,
					         CASE 
					             WHEN e.ult_eje IS NULL THEN 'sin_sesion'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) <= 1 THEN 'verde'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) BETWEEN 2 AND 3 THEN 'amarillo'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) >= 4 THEN 'rojo'
					             ELSE 'sin_sesion'
					         END as semaforo_sesion,
					         TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) as dias_desde_ultima_sesion
					  FROM ejecutivo e 
					  LEFT JOIN plantel p ON e.id_pla = p.id_pla 
					  LEFT JOIN cita c ON e.id_eje = c.id_eje2 AND c.eli_cit = 1 
					  LEFT JOIN planteles_ejecutivo pe ON e.id_eje = pe.id_eje
					  LEFT JOIN plantel pa ON pe.id_pla = pa.id_pla
					  GROUP BY e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje, p.nom_pla
					  ORDER BY e.eli_eje DESC, e.nom_eje ASC
[2025-07-23 19:42:03] Ejecutivo ID: 9 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 19:42:03] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 19:42:03] Ejecutivo ID: 16 - Citas propias: 6 - Citas hijos: 7 - Total: 13
[2025-07-23 19:42:03] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 19:42:03] Ejecutivo ID: 12 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:42:03] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 19:42:03] Ejecutivo ID: 15 - Citas propias: 5 - Citas hijos: 2 - Total: 7
[2025-07-23 19:42:03] Ejecutivo ID: 18 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:42:03] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 19:42:03] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:42:03] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:42:03] Ejecutivo ID: 10 - Citas propias: 3 - Citas hijos: 4 - Total: 7
[2025-07-23 19:42:03] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:42:03] Ejecutivo ID: 2 - Citas propias: 6 - Citas hijos: 5 - Total: 11
[2025-07-23 19:42:03] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:42:03] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:42:03] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:42:03] Ejecutivo ID: 13 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:42:03] Ejecutivo ID: 1 - Citas propias: 0 - Citas hijos: 0 - Total: 0
[2025-07-23 19:42:03] Ejecutivos con citas encontrados: 15
[2025-07-23 19:42:29] REQUEST recibido: Array
(
    [action] => obtener_ejecutivos_con_citas
)

[2025-07-23 19:42:29] Query ejecutivos con citas: SELECT e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje,
					         p.nom_pla as plantel_principal,
					         COUNT(DISTINCT c.id_cit) as citas_propias,
					         GROUP_CONCAT(DISTINCT CONCAT(pa.id_pla, ':', pa.nom_pla) SEPARATOR '|') as planteles_asociados,
					         COUNT(DISTINCT pe.id_pla) as total_planteles_asociados,
					         CASE 
					             WHEN e.ult_eje IS NULL THEN 'sin_sesion'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) <= 1 THEN 'verde'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) BETWEEN 2 AND 3 THEN 'amarillo'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) >= 4 THEN 'rojo'
					             ELSE 'sin_sesion'
					         END as semaforo_sesion,
					         TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) as dias_desde_ultima_sesion
					  FROM ejecutivo e 
					  LEFT JOIN plantel p ON e.id_pla = p.id_pla 
					  LEFT JOIN cita c ON e.id_eje = c.id_eje2 AND c.eli_cit = 1 
					  LEFT JOIN planteles_ejecutivo pe ON e.id_eje = pe.id_eje
					  LEFT JOIN plantel pa ON pe.id_pla = pa.id_pla
					  GROUP BY e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje, p.nom_pla
					  ORDER BY e.eli_eje DESC, e.nom_eje ASC
[2025-07-23 19:42:29] Ejecutivo ID: 9 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 19:42:29] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 19:42:29] Ejecutivo ID: 16 - Citas propias: 6 - Citas hijos: 7 - Total: 13
[2025-07-23 19:42:29] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 19:42:29] Ejecutivo ID: 12 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:42:29] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 19:42:29] Ejecutivo ID: 15 - Citas propias: 5 - Citas hijos: 2 - Total: 7
[2025-07-23 19:42:29] Ejecutivo ID: 18 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:42:29] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 19:42:29] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:42:29] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:42:29] Ejecutivo ID: 10 - Citas propias: 3 - Citas hijos: 4 - Total: 7
[2025-07-23 19:42:29] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:42:29] Ejecutivo ID: 2 - Citas propias: 6 - Citas hijos: 5 - Total: 11
[2025-07-23 19:42:29] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:42:29] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:42:29] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:42:29] Ejecutivo ID: 13 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:42:29] Ejecutivo ID: 1 - Citas propias: 0 - Citas hijos: 0 - Total: 0
[2025-07-23 19:42:29] Ejecutivos con citas encontrados: 15
[2025-07-23 19:42:59] REQUEST recibido: Array
(
    [action] => obtener_ejecutivos_con_citas
)

[2025-07-23 19:42:59] Query ejecutivos con citas: SELECT e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje,
					         p.nom_pla as plantel_principal,
					         COUNT(DISTINCT c.id_cit) as citas_propias,
					         GROUP_CONCAT(DISTINCT CONCAT(pa.id_pla, ':', pa.nom_pla) SEPARATOR '|') as planteles_asociados,
					         COUNT(DISTINCT pe.id_pla) as total_planteles_asociados,
					         CASE 
					             WHEN e.ult_eje IS NULL THEN 'sin_sesion'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) <= 1 THEN 'verde'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) BETWEEN 2 AND 3 THEN 'amarillo'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) >= 4 THEN 'rojo'
					             ELSE 'sin_sesion'
					         END as semaforo_sesion,
					         TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) as dias_desde_ultima_sesion
					  FROM ejecutivo e 
					  LEFT JOIN plantel p ON e.id_pla = p.id_pla 
					  LEFT JOIN cita c ON e.id_eje = c.id_eje2 AND c.eli_cit = 1 
					  LEFT JOIN planteles_ejecutivo pe ON e.id_eje = pe.id_eje
					  LEFT JOIN plantel pa ON pe.id_pla = pa.id_pla
					  GROUP BY e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje, p.nom_pla
					  ORDER BY e.eli_eje DESC, e.nom_eje ASC
[2025-07-23 19:42:59] Ejecutivo ID: 9 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 19:42:59] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 19:42:59] Ejecutivo ID: 16 - Citas propias: 6 - Citas hijos: 7 - Total: 13
[2025-07-23 19:42:59] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 19:42:59] Ejecutivo ID: 12 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:42:59] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 19:42:59] Ejecutivo ID: 15 - Citas propias: 5 - Citas hijos: 2 - Total: 7
[2025-07-23 19:42:59] Ejecutivo ID: 18 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:42:59] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 19:42:59] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:42:59] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:42:59] Ejecutivo ID: 10 - Citas propias: 3 - Citas hijos: 4 - Total: 7
[2025-07-23 19:42:59] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:42:59] Ejecutivo ID: 2 - Citas propias: 6 - Citas hijos: 5 - Total: 11
[2025-07-23 19:42:59] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:42:59] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:42:59] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:42:59] Ejecutivo ID: 13 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:42:59] Ejecutivo ID: 1 - Citas propias: 0 - Citas hijos: 0 - Total: 0
[2025-07-23 19:42:59] Ejecutivos con citas encontrados: 15
[2025-07-23 19:43:08] REQUEST recibido: Array
(
    [action] => obtener_ejecutivos_con_citas
)

[2025-07-23 19:43:08] Query ejecutivos con citas: SELECT e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje,
					         p.nom_pla as plantel_principal,
					         COUNT(DISTINCT c.id_cit) as citas_propias,
					         GROUP_CONCAT(DISTINCT CONCAT(pa.id_pla, ':', pa.nom_pla) SEPARATOR '|') as planteles_asociados,
					         COUNT(DISTINCT pe.id_pla) as total_planteles_asociados,
					         CASE 
					             WHEN e.ult_eje IS NULL THEN 'sin_sesion'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) <= 1 THEN 'verde'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) BETWEEN 2 AND 3 THEN 'amarillo'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) >= 4 THEN 'rojo'
					             ELSE 'sin_sesion'
					         END as semaforo_sesion,
					         TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) as dias_desde_ultima_sesion
					  FROM ejecutivo e 
					  LEFT JOIN plantel p ON e.id_pla = p.id_pla 
					  LEFT JOIN cita c ON e.id_eje = c.id_eje2 AND c.eli_cit = 1 
					  LEFT JOIN planteles_ejecutivo pe ON e.id_eje = pe.id_eje
					  LEFT JOIN plantel pa ON pe.id_pla = pa.id_pla
					  GROUP BY e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje, p.nom_pla
					  ORDER BY e.eli_eje DESC, e.nom_eje ASC
[2025-07-23 19:43:08] Ejecutivo ID: 9 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 19:43:08] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 19:43:08] Ejecutivo ID: 16 - Citas propias: 6 - Citas hijos: 7 - Total: 13
[2025-07-23 19:43:08] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 19:43:08] Ejecutivo ID: 12 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:43:08] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 19:43:08] Ejecutivo ID: 15 - Citas propias: 5 - Citas hijos: 2 - Total: 7
[2025-07-23 19:43:08] Ejecutivo ID: 18 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:43:08] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 19:43:08] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:43:08] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:43:08] Ejecutivo ID: 10 - Citas propias: 3 - Citas hijos: 4 - Total: 7
[2025-07-23 19:43:08] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:43:08] Ejecutivo ID: 2 - Citas propias: 6 - Citas hijos: 5 - Total: 11
[2025-07-23 19:43:08] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:43:08] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:43:08] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:43:08] Ejecutivo ID: 13 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:43:08] Ejecutivo ID: 1 - Citas propias: 0 - Citas hijos: 0 - Total: 0
[2025-07-23 19:43:08] Ejecutivos con citas encontrados: 15
[2025-07-23 19:46:15] REQUEST recibido: Array
(
    [action] => obtener_ejecutivos_con_citas
)

[2025-07-23 19:46:15] Query ejecutivos con citas: SELECT e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje,
					         p.nom_pla as plantel_principal,
					         COUNT(DISTINCT c.id_cit) as citas_propias,
					         GROUP_CONCAT(DISTINCT CONCAT(pa.id_pla, ':', pa.nom_pla) SEPARATOR '|') as planteles_asociados,
					         COUNT(DISTINCT pe.id_pla) as total_planteles_asociados,
					         CASE 
					             WHEN e.ult_eje IS NULL THEN 'sin_sesion'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) <= 1 THEN 'verde'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) BETWEEN 2 AND 3 THEN 'amarillo'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) >= 4 THEN 'rojo'
					             ELSE 'sin_sesion'
					         END as semaforo_sesion,
					         TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) as dias_desde_ultima_sesion
					  FROM ejecutivo e 
					  LEFT JOIN plantel p ON e.id_pla = p.id_pla 
					  LEFT JOIN cita c ON e.id_eje = c.id_eje2 AND c.eli_cit = 1 
					  LEFT JOIN planteles_ejecutivo pe ON e.id_eje = pe.id_eje
					  LEFT JOIN plantel pa ON pe.id_pla = pa.id_pla
					  GROUP BY e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje, p.nom_pla
					  ORDER BY e.eli_eje DESC, e.nom_eje ASC
[2025-07-23 19:46:15] Ejecutivo ID: 9 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 19:46:15] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 19:46:15] Ejecutivo ID: 16 - Citas propias: 6 - Citas hijos: 7 - Total: 13
[2025-07-23 19:46:15] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 19:46:15] Ejecutivo ID: 12 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:46:15] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 19:46:15] Ejecutivo ID: 15 - Citas propias: 5 - Citas hijos: 2 - Total: 7
[2025-07-23 19:46:15] Ejecutivo ID: 18 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:46:15] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 19:46:15] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:46:15] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:46:15] Ejecutivo ID: 10 - Citas propias: 3 - Citas hijos: 4 - Total: 7
[2025-07-23 19:46:15] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:46:15] Ejecutivo ID: 2 - Citas propias: 6 - Citas hijos: 5 - Total: 11
[2025-07-23 19:46:15] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:46:15] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:46:15] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:46:15] Ejecutivo ID: 13 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:46:15] Ejecutivo ID: 1 - Citas propias: 0 - Citas hijos: 0 - Total: 0
[2025-07-23 19:46:15] Ejecutivos con citas encontrados: 15
[2025-07-23 19:46:26] REQUEST recibido: Array
(
    [action] => obtener_ejecutivos_con_citas
)

[2025-07-23 19:46:26] Query ejecutivos con citas: SELECT e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje,
					         p.nom_pla as plantel_principal,
					         COUNT(DISTINCT c.id_cit) as citas_propias,
					         GROUP_CONCAT(DISTINCT CONCAT(pa.id_pla, ':', pa.nom_pla) SEPARATOR '|') as planteles_asociados,
					         COUNT(DISTINCT pe.id_pla) as total_planteles_asociados,
					         CASE 
					             WHEN e.ult_eje IS NULL THEN 'sin_sesion'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) <= 1 THEN 'verde'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) BETWEEN 2 AND 3 THEN 'amarillo'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) >= 4 THEN 'rojo'
					             ELSE 'sin_sesion'
					         END as semaforo_sesion,
					         TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) as dias_desde_ultima_sesion
					  FROM ejecutivo e 
					  LEFT JOIN plantel p ON e.id_pla = p.id_pla 
					  LEFT JOIN cita c ON e.id_eje = c.id_eje2 AND c.eli_cit = 1 
					  LEFT JOIN planteles_ejecutivo pe ON e.id_eje = pe.id_eje
					  LEFT JOIN plantel pa ON pe.id_pla = pa.id_pla
					  GROUP BY e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje, p.nom_pla
					  ORDER BY e.eli_eje DESC, e.nom_eje ASC
[2025-07-23 19:46:26] Ejecutivo ID: 9 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 19:46:26] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 19:46:26] Ejecutivo ID: 16 - Citas propias: 6 - Citas hijos: 7 - Total: 13
[2025-07-23 19:46:26] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 19:46:26] Ejecutivo ID: 12 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:46:26] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 19:46:26] Ejecutivo ID: 15 - Citas propias: 5 - Citas hijos: 2 - Total: 7
[2025-07-23 19:46:26] Ejecutivo ID: 18 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:46:26] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 19:46:26] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:46:26] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:46:26] Ejecutivo ID: 10 - Citas propias: 3 - Citas hijos: 4 - Total: 7
[2025-07-23 19:46:26] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:46:26] Ejecutivo ID: 2 - Citas propias: 6 - Citas hijos: 5 - Total: 11
[2025-07-23 19:46:26] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:46:26] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:46:26] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:46:26] Ejecutivo ID: 13 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:46:26] Ejecutivo ID: 1 - Citas propias: 0 - Citas hijos: 0 - Total: 0
[2025-07-23 19:46:26] Ejecutivos con citas encontrados: 15
[2025-07-23 19:46:31] REQUEST recibido: Array
(
    [action] => obtener_ejecutivos_con_citas
)

[2025-07-23 19:46:31] Query ejecutivos con citas: SELECT e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje,
					         p.nom_pla as plantel_principal,
					         COUNT(DISTINCT c.id_cit) as citas_propias,
					         GROUP_CONCAT(DISTINCT CONCAT(pa.id_pla, ':', pa.nom_pla) SEPARATOR '|') as planteles_asociados,
					         COUNT(DISTINCT pe.id_pla) as total_planteles_asociados,
					         CASE 
					             WHEN e.ult_eje IS NULL THEN 'sin_sesion'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) <= 1 THEN 'verde'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) BETWEEN 2 AND 3 THEN 'amarillo'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) >= 4 THEN 'rojo'
					             ELSE 'sin_sesion'
					         END as semaforo_sesion,
					         TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) as dias_desde_ultima_sesion
					  FROM ejecutivo e 
					  LEFT JOIN plantel p ON e.id_pla = p.id_pla 
					  LEFT JOIN cita c ON e.id_eje = c.id_eje2 AND c.eli_cit = 1 
					  LEFT JOIN planteles_ejecutivo pe ON e.id_eje = pe.id_eje
					  LEFT JOIN plantel pa ON pe.id_pla = pa.id_pla
					  GROUP BY e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje, p.nom_pla
					  ORDER BY e.eli_eje DESC, e.nom_eje ASC
[2025-07-23 19:46:31] Ejecutivo ID: 9 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 19:46:31] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 19:46:31] Ejecutivo ID: 16 - Citas propias: 6 - Citas hijos: 7 - Total: 13
[2025-07-23 19:46:31] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 19:46:31] Ejecutivo ID: 12 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:46:31] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 19:46:31] Ejecutivo ID: 15 - Citas propias: 5 - Citas hijos: 2 - Total: 7
[2025-07-23 19:46:31] Ejecutivo ID: 18 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:46:31] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 19:46:31] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:46:31] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:46:31] Ejecutivo ID: 10 - Citas propias: 3 - Citas hijos: 4 - Total: 7
[2025-07-23 19:46:31] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:46:31] Ejecutivo ID: 2 - Citas propias: 6 - Citas hijos: 5 - Total: 11
[2025-07-23 19:46:31] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:46:31] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:46:31] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:46:31] Ejecutivo ID: 13 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:46:31] Ejecutivo ID: 1 - Citas propias: 0 - Citas hijos: 0 - Total: 0
[2025-07-23 19:46:31] Ejecutivos con citas encontrados: 15
[2025-07-23 19:46:55] REQUEST recibido: Array
(
    [action] => obtener_ejecutivos_con_citas
)

[2025-07-23 19:46:55] Query ejecutivos con citas: SELECT e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje,
					         p.nom_pla as plantel_principal,
					         COUNT(DISTINCT c.id_cit) as citas_propias,
					         GROUP_CONCAT(DISTINCT CONCAT(pa.id_pla, ':', pa.nom_pla) SEPARATOR '|') as planteles_asociados,
					         COUNT(DISTINCT pe.id_pla) as total_planteles_asociados,
					         CASE 
					             WHEN e.ult_eje IS NULL THEN 'sin_sesion'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) <= 1 THEN 'verde'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) BETWEEN 2 AND 3 THEN 'amarillo'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) >= 4 THEN 'rojo'
					             ELSE 'sin_sesion'
					         END as semaforo_sesion,
					         TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) as dias_desde_ultima_sesion
					  FROM ejecutivo e 
					  LEFT JOIN plantel p ON e.id_pla = p.id_pla 
					  LEFT JOIN cita c ON e.id_eje = c.id_eje2 AND c.eli_cit = 1 
					  LEFT JOIN planteles_ejecutivo pe ON e.id_eje = pe.id_eje
					  LEFT JOIN plantel pa ON pe.id_pla = pa.id_pla
					  GROUP BY e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje, p.nom_pla
					  ORDER BY e.eli_eje DESC, e.nom_eje ASC
[2025-07-23 19:46:55] Ejecutivo ID: 9 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 19:46:55] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 19:46:55] Ejecutivo ID: 16 - Citas propias: 6 - Citas hijos: 7 - Total: 13
[2025-07-23 19:46:55] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 19:46:55] Ejecutivo ID: 12 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:46:55] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 19:46:55] Ejecutivo ID: 15 - Citas propias: 5 - Citas hijos: 2 - Total: 7
[2025-07-23 19:46:55] Ejecutivo ID: 18 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:46:55] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 19:46:55] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:46:55] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:46:55] Ejecutivo ID: 10 - Citas propias: 3 - Citas hijos: 4 - Total: 7
[2025-07-23 19:46:55] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:46:55] Ejecutivo ID: 2 - Citas propias: 6 - Citas hijos: 5 - Total: 11
[2025-07-23 19:46:55] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:46:55] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:46:55] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:46:55] Ejecutivo ID: 13 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:46:55] Ejecutivo ID: 1 - Citas propias: 0 - Citas hijos: 0 - Total: 0
[2025-07-23 19:46:55] Ejecutivos con citas encontrados: 15
[2025-07-23 19:47:03] REQUEST recibido: Array
(
    [action] => obtener_ejecutivos_con_citas
)

[2025-07-23 19:47:03] Query ejecutivos con citas: SELECT e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje,
					         p.nom_pla as plantel_principal,
					         COUNT(DISTINCT c.id_cit) as citas_propias,
					         GROUP_CONCAT(DISTINCT CONCAT(pa.id_pla, ':', pa.nom_pla) SEPARATOR '|') as planteles_asociados,
					         COUNT(DISTINCT pe.id_pla) as total_planteles_asociados,
					         CASE 
					             WHEN e.ult_eje IS NULL THEN 'sin_sesion'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) <= 1 THEN 'verde'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) BETWEEN 2 AND 3 THEN 'amarillo'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) >= 4 THEN 'rojo'
					             ELSE 'sin_sesion'
					         END as semaforo_sesion,
					         TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) as dias_desde_ultima_sesion
					  FROM ejecutivo e 
					  LEFT JOIN plantel p ON e.id_pla = p.id_pla 
					  LEFT JOIN cita c ON e.id_eje = c.id_eje2 AND c.eli_cit = 1 
					  LEFT JOIN planteles_ejecutivo pe ON e.id_eje = pe.id_eje
					  LEFT JOIN plantel pa ON pe.id_pla = pa.id_pla
					  GROUP BY e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje, p.nom_pla
					  ORDER BY e.eli_eje DESC, e.nom_eje ASC
[2025-07-23 19:47:03] Ejecutivo ID: 9 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 19:47:03] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 19:47:03] Ejecutivo ID: 16 - Citas propias: 6 - Citas hijos: 7 - Total: 13
[2025-07-23 19:47:03] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 19:47:03] Ejecutivo ID: 12 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:47:03] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 19:47:03] Ejecutivo ID: 15 - Citas propias: 5 - Citas hijos: 2 - Total: 7
[2025-07-23 19:47:03] Ejecutivo ID: 18 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:47:03] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 19:47:03] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:47:03] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:47:03] Ejecutivo ID: 10 - Citas propias: 3 - Citas hijos: 4 - Total: 7
[2025-07-23 19:47:03] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:47:03] Ejecutivo ID: 2 - Citas propias: 6 - Citas hijos: 5 - Total: 11
[2025-07-23 19:47:03] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:47:03] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:47:03] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:47:03] Ejecutivo ID: 13 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:47:03] Ejecutivo ID: 1 - Citas propias: 0 - Citas hijos: 0 - Total: 0
[2025-07-23 19:47:03] Ejecutivos con citas encontrados: 15
[2025-07-23 19:49:45] REQUEST recibido: Array
(
    [action] => obtener_ejecutivos_con_citas
)

[2025-07-23 19:49:45] Query ejecutivos con citas: SELECT e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje,
					         p.nom_pla as plantel_principal,
					         COUNT(DISTINCT c.id_cit) as citas_propias,
					         GROUP_CONCAT(DISTINCT CONCAT(pa.id_pla, ':', pa.nom_pla) SEPARATOR '|') as planteles_asociados,
					         COUNT(DISTINCT pe.id_pla) as total_planteles_asociados,
					         CASE 
					             WHEN e.ult_eje IS NULL THEN 'sin_sesion'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) <= 1 THEN 'verde'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) BETWEEN 2 AND 3 THEN 'amarillo'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) >= 4 THEN 'rojo'
					             ELSE 'sin_sesion'
					         END as semaforo_sesion,
					         TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) as dias_desde_ultima_sesion
					  FROM ejecutivo e 
					  LEFT JOIN plantel p ON e.id_pla = p.id_pla 
					  LEFT JOIN cita c ON e.id_eje = c.id_eje2 AND c.eli_cit = 1 
					  LEFT JOIN planteles_ejecutivo pe ON e.id_eje = pe.id_eje
					  LEFT JOIN plantel pa ON pe.id_pla = pa.id_pla
					  GROUP BY e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje, p.nom_pla
					  ORDER BY e.eli_eje DESC, e.nom_eje ASC
[2025-07-23 19:49:45] Ejecutivo ID: 9 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 19:49:45] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 19:49:45] Ejecutivo ID: 16 - Citas propias: 6 - Citas hijos: 7 - Total: 13
[2025-07-23 19:49:45] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 19:49:45] Ejecutivo ID: 12 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:49:45] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 19:49:45] Ejecutivo ID: 15 - Citas propias: 5 - Citas hijos: 2 - Total: 7
[2025-07-23 19:49:45] Ejecutivo ID: 18 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:49:45] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 19:49:45] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:49:45] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:49:45] Ejecutivo ID: 10 - Citas propias: 3 - Citas hijos: 4 - Total: 7
[2025-07-23 19:49:45] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:49:45] Ejecutivo ID: 2 - Citas propias: 6 - Citas hijos: 5 - Total: 11
[2025-07-23 19:49:45] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:49:45] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:49:45] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:49:45] Ejecutivo ID: 13 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:49:45] Ejecutivo ID: 1 - Citas propias: 0 - Citas hijos: 0 - Total: 0
[2025-07-23 19:49:45] Ejecutivos con citas encontrados: 15
[2025-07-23 19:49:52] REQUEST recibido: Array
(
    [action] => obtener_ejecutivos_con_citas
)

[2025-07-23 19:49:52] Query ejecutivos con citas: SELECT e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje,
					         p.nom_pla as plantel_principal,
					         COUNT(DISTINCT c.id_cit) as citas_propias,
					         GROUP_CONCAT(DISTINCT CONCAT(pa.id_pla, ':', pa.nom_pla) SEPARATOR '|') as planteles_asociados,
					         COUNT(DISTINCT pe.id_pla) as total_planteles_asociados,
					         CASE 
					             WHEN e.ult_eje IS NULL THEN 'sin_sesion'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) <= 1 THEN 'verde'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) BETWEEN 2 AND 3 THEN 'amarillo'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) >= 4 THEN 'rojo'
					             ELSE 'sin_sesion'
					         END as semaforo_sesion,
					         TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) as dias_desde_ultima_sesion
					  FROM ejecutivo e 
					  LEFT JOIN plantel p ON e.id_pla = p.id_pla 
					  LEFT JOIN cita c ON e.id_eje = c.id_eje2 AND c.eli_cit = 1 
					  LEFT JOIN planteles_ejecutivo pe ON e.id_eje = pe.id_eje
					  LEFT JOIN plantel pa ON pe.id_pla = pa.id_pla
					  GROUP BY e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje, p.nom_pla
					  ORDER BY e.eli_eje DESC, e.nom_eje ASC
[2025-07-23 19:49:52] Ejecutivo ID: 9 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 19:49:52] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 19:49:52] Ejecutivo ID: 16 - Citas propias: 6 - Citas hijos: 7 - Total: 13
[2025-07-23 19:49:52] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 19:49:52] Ejecutivo ID: 12 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:49:52] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 19:49:52] Ejecutivo ID: 15 - Citas propias: 5 - Citas hijos: 2 - Total: 7
[2025-07-23 19:49:52] Ejecutivo ID: 18 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:49:52] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 19:49:52] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:49:52] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:49:52] Ejecutivo ID: 10 - Citas propias: 3 - Citas hijos: 4 - Total: 7
[2025-07-23 19:49:52] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:49:52] Ejecutivo ID: 2 - Citas propias: 6 - Citas hijos: 5 - Total: 11
[2025-07-23 19:49:52] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:49:52] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:49:52] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:49:52] Ejecutivo ID: 13 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:49:52] Ejecutivo ID: 1 - Citas propias: 0 - Citas hijos: 0 - Total: 0
[2025-07-23 19:49:52] Ejecutivos con citas encontrados: 15
[2025-07-23 19:49:58] REQUEST recibido: Array
(
    [action] => obtener_ejecutivos_con_citas
)

[2025-07-23 19:49:58] Query ejecutivos con citas: SELECT e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje,
					         p.nom_pla as plantel_principal,
					         COUNT(DISTINCT c.id_cit) as citas_propias,
					         GROUP_CONCAT(DISTINCT CONCAT(pa.id_pla, ':', pa.nom_pla) SEPARATOR '|') as planteles_asociados,
					         COUNT(DISTINCT pe.id_pla) as total_planteles_asociados,
					         CASE 
					             WHEN e.ult_eje IS NULL THEN 'sin_sesion'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) <= 1 THEN 'verde'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) BETWEEN 2 AND 3 THEN 'amarillo'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) >= 4 THEN 'rojo'
					             ELSE 'sin_sesion'
					         END as semaforo_sesion,
					         TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) as dias_desde_ultima_sesion
					  FROM ejecutivo e 
					  LEFT JOIN plantel p ON e.id_pla = p.id_pla 
					  LEFT JOIN cita c ON e.id_eje = c.id_eje2 AND c.eli_cit = 1 
					  LEFT JOIN planteles_ejecutivo pe ON e.id_eje = pe.id_eje
					  LEFT JOIN plantel pa ON pe.id_pla = pa.id_pla
					  GROUP BY e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje, p.nom_pla
					  ORDER BY e.eli_eje DESC, e.nom_eje ASC
[2025-07-23 19:49:59] Ejecutivo ID: 9 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 19:49:59] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 19:49:59] Ejecutivo ID: 16 - Citas propias: 6 - Citas hijos: 7 - Total: 13
[2025-07-23 19:49:59] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 19:49:59] Ejecutivo ID: 12 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:49:59] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 19:49:59] Ejecutivo ID: 15 - Citas propias: 5 - Citas hijos: 2 - Total: 7
[2025-07-23 19:49:59] Ejecutivo ID: 18 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:49:59] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 19:49:59] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:49:59] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:49:59] Ejecutivo ID: 10 - Citas propias: 3 - Citas hijos: 4 - Total: 7
[2025-07-23 19:49:59] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:49:59] Ejecutivo ID: 2 - Citas propias: 6 - Citas hijos: 5 - Total: 11
[2025-07-23 19:49:59] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:49:59] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:49:59] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:49:59] Ejecutivo ID: 13 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:49:59] Ejecutivo ID: 1 - Citas propias: 0 - Citas hijos: 0 - Total: 0
[2025-07-23 19:49:59] Ejecutivos con citas encontrados: 15
[2025-07-23 19:50:05] REQUEST recibido: Array
(
    [action] => mover_ejecutivo
    [id_eje] => 4
    [id_padre] => 15
)

[2025-07-23 19:50:05] ==============================================
[2025-07-23 19:50:05] MOVER EJECUTIVO - REQUEST RECIBIDO
[2025-07-23 19:50:05] POST data completo: Array
(
    [action] => mover_ejecutivo
    [id_eje] => 4
    [id_padre] => 15
)

[2025-07-23 19:50:05] Valores procesados:
[2025-07-23 19:50:05] - ID Ejecutivo: 4
[2025-07-23 19:50:05] - ID Padre: 15
[2025-07-23 19:50:05] - ID Plantel: NULL
[2025-07-23 19:50:05] ANTES - Ejecutivo: Francisco Pineda, Padre anterior: 10, Plantel anterior: 
[2025-07-23 19:50:05] NUEVO PADRE: Elena Vargas (ID: 15)
[2025-07-23 19:50:05] QUERY MOVER: UPDATE ejecutivo SET id_padre = '15', id_pla = NULL WHERE id_eje = '4'
[2025-07-23 19:50:05] VERIFICACIÓN - Nuevo padre: 15, Nuevo plantel: 
[2025-07-23 19:50:05] WebSocket movimiento enviado
[2025-07-23 19:50:05] EJECUTIVO MOVIDO EXITOSAMENTE
[2025-07-23 19:50:05] RESPUESTA ENVIADA: SUCCESS
[2025-07-23 19:50:05] ==============================================
[2025-07-23 19:50:10] REQUEST recibido: Array
(
    [action] => obtener_ejecutivos_con_citas
)

[2025-07-23 19:50:11] Query ejecutivos con citas: SELECT e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje,
					         p.nom_pla as plantel_principal,
					         COUNT(DISTINCT c.id_cit) as citas_propias,
					         GROUP_CONCAT(DISTINCT CONCAT(pa.id_pla, ':', pa.nom_pla) SEPARATOR '|') as planteles_asociados,
					         COUNT(DISTINCT pe.id_pla) as total_planteles_asociados,
					         CASE 
					             WHEN e.ult_eje IS NULL THEN 'sin_sesion'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) <= 1 THEN 'verde'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) BETWEEN 2 AND 3 THEN 'amarillo'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) >= 4 THEN 'rojo'
					             ELSE 'sin_sesion'
					         END as semaforo_sesion,
					         TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) as dias_desde_ultima_sesion
					  FROM ejecutivo e 
					  LEFT JOIN plantel p ON e.id_pla = p.id_pla 
					  LEFT JOIN cita c ON e.id_eje = c.id_eje2 AND c.eli_cit = 1 
					  LEFT JOIN planteles_ejecutivo pe ON e.id_eje = pe.id_eje
					  LEFT JOIN plantel pa ON pe.id_pla = pa.id_pla
					  GROUP BY e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje, p.nom_pla
					  ORDER BY e.eli_eje DESC, e.nom_eje ASC
[2025-07-23 19:50:11] Ejecutivo ID: 9 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 19:50:11] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 19:50:11] Ejecutivo ID: 16 - Citas propias: 6 - Citas hijos: 7 - Total: 13
[2025-07-23 19:50:11] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 19:50:11] Ejecutivo ID: 12 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:50:11] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:50:11] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 19:50:11] Ejecutivo ID: 15 - Citas propias: 5 - Citas hijos: 6 - Total: 11
[2025-07-23 19:50:11] Ejecutivo ID: 18 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:50:11] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 19:50:11] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:50:11] Ejecutivo ID: 10 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 19:50:11] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:50:11] Ejecutivo ID: 2 - Citas propias: 6 - Citas hijos: 5 - Total: 11
[2025-07-23 19:50:11] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:50:11] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:50:11] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:50:11] Ejecutivo ID: 13 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:50:11] Ejecutivo ID: 1 - Citas propias: 0 - Citas hijos: 0 - Total: 0
[2025-07-23 19:50:11] Ejecutivos con citas encontrados: 15
[2025-07-23 19:50:31] REQUEST recibido: Array
(
    [action] => mover_ejecutivo
    [id_eje] => 4
    [id_padre] => 
)

[2025-07-23 19:50:31] ==============================================
[2025-07-23 19:50:31] MOVER EJECUTIVO - REQUEST RECIBIDO
[2025-07-23 19:50:31] POST data completo: Array
(
    [action] => mover_ejecutivo
    [id_eje] => 4
    [id_padre] => 
)

[2025-07-23 19:50:31] Valores procesados:
[2025-07-23 19:50:31] - ID Ejecutivo: 4
[2025-07-23 19:50:31] - ID Padre: NULL
[2025-07-23 19:50:31] - ID Plantel: NULL
[2025-07-23 19:50:31] ANTES - Ejecutivo: Francisco Pineda, Padre anterior: 15, Plantel anterior: 
[2025-07-23 19:50:31] QUERY MOVER: UPDATE ejecutivo SET id_padre = NULL, id_pla = NULL WHERE id_eje = '4'
[2025-07-23 19:50:31] VERIFICACIÓN - Nuevo padre: , Nuevo plantel: 
[2025-07-23 19:50:31] WebSocket movimiento enviado
[2025-07-23 19:50:31] EJECUTIVO MOVIDO EXITOSAMENTE
[2025-07-23 19:50:31] RESPUESTA ENVIADA: SUCCESS
[2025-07-23 19:50:31] ==============================================
[2025-07-23 19:50:33] REQUEST recibido: Array
(
    [action] => obtener_ejecutivos_con_citas
)

[2025-07-23 19:50:33] Query ejecutivos con citas: SELECT e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje,
					         p.nom_pla as plantel_principal,
					         COUNT(DISTINCT c.id_cit) as citas_propias,
					         GROUP_CONCAT(DISTINCT CONCAT(pa.id_pla, ':', pa.nom_pla) SEPARATOR '|') as planteles_asociados,
					         COUNT(DISTINCT pe.id_pla) as total_planteles_asociados,
					         CASE 
					             WHEN e.ult_eje IS NULL THEN 'sin_sesion'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) <= 1 THEN 'verde'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) BETWEEN 2 AND 3 THEN 'amarillo'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) >= 4 THEN 'rojo'
					             ELSE 'sin_sesion'
					         END as semaforo_sesion,
					         TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) as dias_desde_ultima_sesion
					  FROM ejecutivo e 
					  LEFT JOIN plantel p ON e.id_pla = p.id_pla 
					  LEFT JOIN cita c ON e.id_eje = c.id_eje2 AND c.eli_cit = 1 
					  LEFT JOIN planteles_ejecutivo pe ON e.id_eje = pe.id_eje
					  LEFT JOIN plantel pa ON pe.id_pla = pa.id_pla
					  GROUP BY e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje, p.nom_pla
					  ORDER BY e.eli_eje DESC, e.nom_eje ASC
[2025-07-23 19:50:33] Ejecutivo ID: 9 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 19:50:33] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 19:50:33] Ejecutivo ID: 16 - Citas propias: 6 - Citas hijos: 7 - Total: 13
[2025-07-23 19:50:33] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 19:50:33] Ejecutivo ID: 12 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:50:33] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 19:50:33] Ejecutivo ID: 15 - Citas propias: 5 - Citas hijos: 2 - Total: 7
[2025-07-23 19:50:33] Ejecutivo ID: 18 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:50:33] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 19:50:33] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:50:33] Ejecutivo ID: 10 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 19:50:33] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:50:33] Ejecutivo ID: 2 - Citas propias: 6 - Citas hijos: 5 - Total: 11
[2025-07-23 19:50:33] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:50:33] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:50:33] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:50:33] Ejecutivo ID: 13 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:50:33] Ejecutivo ID: 1 - Citas propias: 0 - Citas hijos: 0 - Total: 0
[2025-07-23 19:50:33] Ejecutivos con citas encontrados: 15
[2025-07-23 19:50:40] REQUEST recibido: Array
(
    [action] => obtener_planteles
)

[2025-07-23 19:50:40] Query planteles: SELECT id_pla, nom_pla, fec_pla FROM plantel ORDER BY nom_pla ASC
[2025-07-23 19:50:40] Planteles encontrados: 3
[2025-07-23 19:50:40] REQUEST recibido: Array
(
    [action] => obtener_citas_totales_por_plantel
    [id_pla] => 6
)

[2025-07-23 19:50:40] REQUEST recibido: Array
(
    [action] => obtener_citas_totales_por_plantel
    [id_pla] => 3
)

[2025-07-23 19:50:40] REQUEST recibido: Array
(
    [action] => obtener_citas_totales_por_plantel
    [id_pla] => 2
)

[2025-07-23 19:50:40] REQUEST recibido: Array
(
    [action] => obtener_ejecutivos_con_citas
)

[2025-07-23 19:50:40] Query ejecutivos con citas: SELECT e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje,
					         p.nom_pla as plantel_principal,
					         COUNT(DISTINCT c.id_cit) as citas_propias,
					         GROUP_CONCAT(DISTINCT CONCAT(pa.id_pla, ':', pa.nom_pla) SEPARATOR '|') as planteles_asociados,
					         COUNT(DISTINCT pe.id_pla) as total_planteles_asociados,
					         CASE 
					             WHEN e.ult_eje IS NULL THEN 'sin_sesion'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) <= 1 THEN 'verde'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) BETWEEN 2 AND 3 THEN 'amarillo'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) >= 4 THEN 'rojo'
					             ELSE 'sin_sesion'
					         END as semaforo_sesion,
					         TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) as dias_desde_ultima_sesion
					  FROM ejecutivo e 
					  LEFT JOIN plantel p ON e.id_pla = p.id_pla 
					  LEFT JOIN cita c ON e.id_eje = c.id_eje2 AND c.eli_cit = 1 
					  LEFT JOIN planteles_ejecutivo pe ON e.id_eje = pe.id_eje
					  LEFT JOIN plantel pa ON pe.id_pla = pa.id_pla
					  GROUP BY e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje, p.nom_pla
					  ORDER BY e.eli_eje DESC, e.nom_eje ASC
[2025-07-23 19:50:40] Ejecutivo ID: 9 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 19:50:40] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 19:50:40] Ejecutivo ID: 16 - Citas propias: 6 - Citas hijos: 7 - Total: 13
[2025-07-23 19:50:40] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 19:50:40] Ejecutivo ID: 12 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:50:40] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 19:50:40] Ejecutivo ID: 15 - Citas propias: 5 - Citas hijos: 2 - Total: 7
[2025-07-23 19:50:40] Ejecutivo ID: 18 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:50:40] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 19:50:40] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:50:40] Ejecutivo ID: 10 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 19:50:40] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:50:40] Ejecutivo ID: 2 - Citas propias: 6 - Citas hijos: 5 - Total: 11
[2025-07-23 19:50:40] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:50:40] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:50:40] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:50:40] Ejecutivo ID: 13 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:50:40] Ejecutivo ID: 1 - Citas propias: 0 - Citas hijos: 0 - Total: 0
[2025-07-23 19:50:40] Ejecutivos con citas encontrados: 15
[2025-07-23 19:50:40] REQUEST recibido: Array
(
    [action] => obtener_citas_totales_por_plantel
    [id_pla] => 3
)

[2025-07-23 19:50:40] REQUEST recibido: Array
(
    [action] => obtener_citas_totales_por_plantel
    [id_pla] => 6
)

[2025-07-23 19:50:40] REQUEST recibido: Array
(
    [action] => obtener_citas_totales_por_plantel
    [id_pla] => 2
)

[2025-07-23 19:50:58] REQUEST recibido: Array
(
    [action] => mover_ejecutivo
    [id_eje] => 6
    [id_padre] => 4
)

[2025-07-23 19:50:58] ==============================================
[2025-07-23 19:50:58] MOVER EJECUTIVO - REQUEST RECIBIDO
[2025-07-23 19:50:58] POST data completo: Array
(
    [action] => mover_ejecutivo
    [id_eje] => 6
    [id_padre] => 4
)

[2025-07-23 19:50:58] Valores procesados:
[2025-07-23 19:50:58] - ID Ejecutivo: 6
[2025-07-23 19:50:58] - ID Padre: 4
[2025-07-23 19:50:58] - ID Plantel: NULL
[2025-07-23 19:50:58] ANTES - Ejecutivo: Fatima Nava, Padre anterior: 15, Plantel anterior: 
[2025-07-23 19:50:58] NUEVO PADRE: Francisco Pineda (ID: 4)
[2025-07-23 19:50:58] QUERY MOVER: UPDATE ejecutivo SET id_padre = '4', id_pla = NULL WHERE id_eje = '6'
[2025-07-23 19:50:58] VERIFICACIÓN - Nuevo padre: 4, Nuevo plantel: 
[2025-07-23 19:50:58] WebSocket movimiento enviado
[2025-07-23 19:50:58] EJECUTIVO MOVIDO EXITOSAMENTE
[2025-07-23 19:50:58] RESPUESTA ENVIADA: SUCCESS
[2025-07-23 19:50:58] ==============================================
[2025-07-23 19:51:00] REQUEST recibido: Array
(
    [action] => obtener_ejecutivos_con_citas
)

[2025-07-23 19:51:00] Query ejecutivos con citas: SELECT e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje,
					         p.nom_pla as plantel_principal,
					         COUNT(DISTINCT c.id_cit) as citas_propias,
					         GROUP_CONCAT(DISTINCT CONCAT(pa.id_pla, ':', pa.nom_pla) SEPARATOR '|') as planteles_asociados,
					         COUNT(DISTINCT pe.id_pla) as total_planteles_asociados,
					         CASE 
					             WHEN e.ult_eje IS NULL THEN 'sin_sesion'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) <= 1 THEN 'verde'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) BETWEEN 2 AND 3 THEN 'amarillo'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) >= 4 THEN 'rojo'
					             ELSE 'sin_sesion'
					         END as semaforo_sesion,
					         TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) as dias_desde_ultima_sesion
					  FROM ejecutivo e 
					  LEFT JOIN plantel p ON e.id_pla = p.id_pla 
					  LEFT JOIN cita c ON e.id_eje = c.id_eje2 AND c.eli_cit = 1 
					  LEFT JOIN planteles_ejecutivo pe ON e.id_eje = pe.id_eje
					  LEFT JOIN plantel pa ON pe.id_pla = pa.id_pla
					  GROUP BY e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje, p.nom_pla
					  ORDER BY e.eli_eje DESC, e.nom_eje ASC
[2025-07-23 19:51:00] Ejecutivo ID: 9 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 19:51:00] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 19:51:00] Ejecutivo ID: 16 - Citas propias: 6 - Citas hijos: 7 - Total: 13
[2025-07-23 19:51:00] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 19:51:00] Ejecutivo ID: 12 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:51:00] Ejecutivo ID: 15 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:51:00] Ejecutivo ID: 18 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:51:00] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 19:51:00] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 19:51:00] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 2 - Total: 6
[2025-07-23 19:51:00] Ejecutivo ID: 10 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 19:51:00] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:51:00] Ejecutivo ID: 2 - Citas propias: 6 - Citas hijos: 5 - Total: 11
[2025-07-23 19:51:00] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:51:00] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:51:00] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:51:00] Ejecutivo ID: 13 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:51:00] Ejecutivo ID: 1 - Citas propias: 0 - Citas hijos: 0 - Total: 0
[2025-07-23 19:51:00] Ejecutivos con citas encontrados: 15
[2025-07-23 19:51:03] REQUEST recibido: Array
(
    [action] => obtener_ejecutivos_con_citas
)

[2025-07-23 19:51:03] Query ejecutivos con citas: SELECT e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje,
					         p.nom_pla as plantel_principal,
					         COUNT(DISTINCT c.id_cit) as citas_propias,
					         GROUP_CONCAT(DISTINCT CONCAT(pa.id_pla, ':', pa.nom_pla) SEPARATOR '|') as planteles_asociados,
					         COUNT(DISTINCT pe.id_pla) as total_planteles_asociados,
					         CASE 
					             WHEN e.ult_eje IS NULL THEN 'sin_sesion'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) <= 1 THEN 'verde'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) BETWEEN 2 AND 3 THEN 'amarillo'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) >= 4 THEN 'rojo'
					             ELSE 'sin_sesion'
					         END as semaforo_sesion,
					         TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) as dias_desde_ultima_sesion
					  FROM ejecutivo e 
					  LEFT JOIN plantel p ON e.id_pla = p.id_pla 
					  LEFT JOIN cita c ON e.id_eje = c.id_eje2 AND c.eli_cit = 1 
					  LEFT JOIN planteles_ejecutivo pe ON e.id_eje = pe.id_eje
					  LEFT JOIN plantel pa ON pe.id_pla = pa.id_pla
					  GROUP BY e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje, p.nom_pla
					  ORDER BY e.eli_eje DESC, e.nom_eje ASC
[2025-07-23 19:51:03] Ejecutivo ID: 9 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 19:51:03] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 19:51:03] Ejecutivo ID: 16 - Citas propias: 6 - Citas hijos: 7 - Total: 13
[2025-07-23 19:51:03] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 19:51:03] Ejecutivo ID: 12 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:51:03] Ejecutivo ID: 15 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:51:03] Ejecutivo ID: 18 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:51:03] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 19:51:03] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 19:51:03] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 2 - Total: 6
[2025-07-23 19:51:03] Ejecutivo ID: 10 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 19:51:03] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:51:03] Ejecutivo ID: 2 - Citas propias: 6 - Citas hijos: 5 - Total: 11
[2025-07-23 19:51:03] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:51:03] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:51:03] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:51:03] Ejecutivo ID: 13 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:51:03] Ejecutivo ID: 1 - Citas propias: 0 - Citas hijos: 0 - Total: 0
[2025-07-23 19:51:03] Ejecutivos con citas encontrados: 15
[2025-07-23 19:51:16] REQUEST recibido: Array
(
    [action] => mover_ejecutivo
    [id_eje] => 20
    [id_padre] => 4
)

[2025-07-23 19:51:16] ==============================================
[2025-07-23 19:51:16] MOVER EJECUTIVO - REQUEST RECIBIDO
[2025-07-23 19:51:16] POST data completo: Array
(
    [action] => mover_ejecutivo
    [id_eje] => 20
    [id_padre] => 4
)

[2025-07-23 19:51:16] Valores procesados:
[2025-07-23 19:51:16] - ID Ejecutivo: 20
[2025-07-23 19:51:16] - ID Padre: 4
[2025-07-23 19:51:16] - ID Plantel: NULL
[2025-07-23 19:51:16] ANTES - Ejecutivo: Samuel Ortigoza, Padre anterior: , Plantel anterior: 
[2025-07-23 19:51:16] NUEVO PADRE: Francisco Pineda (ID: 4)
[2025-07-23 19:51:16] QUERY MOVER: UPDATE ejecutivo SET id_padre = '4', id_pla = NULL WHERE id_eje = '20'
[2025-07-23 19:51:16] VERIFICACIÓN - Nuevo padre: 4, Nuevo plantel: 
[2025-07-23 19:51:16] WebSocket movimiento enviado
[2025-07-23 19:51:16] EJECUTIVO MOVIDO EXITOSAMENTE
[2025-07-23 19:51:16] RESPUESTA ENVIADA: SUCCESS
[2025-07-23 19:51:16] ==============================================
[2025-07-23 19:51:18] REQUEST recibido: Array
(
    [action] => obtener_ejecutivos_con_citas
)

[2025-07-23 19:51:18] Query ejecutivos con citas: SELECT e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje,
					         p.nom_pla as plantel_principal,
					         COUNT(DISTINCT c.id_cit) as citas_propias,
					         GROUP_CONCAT(DISTINCT CONCAT(pa.id_pla, ':', pa.nom_pla) SEPARATOR '|') as planteles_asociados,
					         COUNT(DISTINCT pe.id_pla) as total_planteles_asociados,
					         CASE 
					             WHEN e.ult_eje IS NULL THEN 'sin_sesion'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) <= 1 THEN 'verde'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) BETWEEN 2 AND 3 THEN 'amarillo'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) >= 4 THEN 'rojo'
					             ELSE 'sin_sesion'
					         END as semaforo_sesion,
					         TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) as dias_desde_ultima_sesion
					  FROM ejecutivo e 
					  LEFT JOIN plantel p ON e.id_pla = p.id_pla 
					  LEFT JOIN cita c ON e.id_eje = c.id_eje2 AND c.eli_cit = 1 
					  LEFT JOIN planteles_ejecutivo pe ON e.id_eje = pe.id_eje
					  LEFT JOIN plantel pa ON pe.id_pla = pa.id_pla
					  GROUP BY e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje, p.nom_pla
					  ORDER BY e.eli_eje DESC, e.nom_eje ASC
[2025-07-23 19:51:18] Ejecutivo ID: 9 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 19:51:18] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 19:51:18] Ejecutivo ID: 16 - Citas propias: 6 - Citas hijos: 7 - Total: 13
[2025-07-23 19:51:18] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 19:51:18] Ejecutivo ID: 12 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:51:18] Ejecutivo ID: 15 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:51:18] Ejecutivo ID: 18 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:51:18] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 19:51:18] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 19:51:18] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:51:18] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 7 - Total: 11
[2025-07-23 19:51:18] Ejecutivo ID: 10 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 19:51:18] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:51:18] Ejecutivo ID: 2 - Citas propias: 6 - Citas hijos: 5 - Total: 11
[2025-07-23 19:51:18] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:51:18] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:51:18] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:51:18] Ejecutivo ID: 13 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:51:18] Ejecutivo ID: 1 - Citas propias: 0 - Citas hijos: 0 - Total: 0
[2025-07-23 19:51:18] Ejecutivos con citas encontrados: 15
[2025-07-23 19:52:02] REQUEST recibido: Array
(
    [action] => mover_ejecutivo
    [id_eje] => 15
    [id_padre] => 1
)

[2025-07-23 19:52:02] ==============================================
[2025-07-23 19:52:02] MOVER EJECUTIVO - REQUEST RECIBIDO
[2025-07-23 19:52:02] POST data completo: Array
(
    [action] => mover_ejecutivo
    [id_eje] => 15
    [id_padre] => 1
)

[2025-07-23 19:52:02] Valores procesados:
[2025-07-23 19:52:02] - ID Ejecutivo: 15
[2025-07-23 19:52:02] - ID Padre: 1
[2025-07-23 19:52:02] - ID Plantel: NULL
[2025-07-23 19:52:02] ANTES - Ejecutivo: Elena Vargas, Padre anterior: , Plantel anterior: 2
[2025-07-23 19:52:02] REQUEST recibido: Array
(
    [action] => obtener_ejecutivos_con_citas
)

[2025-07-23 19:52:02] Query ejecutivos con citas: SELECT e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje,
					         p.nom_pla as plantel_principal,
					         COUNT(DISTINCT c.id_cit) as citas_propias,
					         GROUP_CONCAT(DISTINCT CONCAT(pa.id_pla, ':', pa.nom_pla) SEPARATOR '|') as planteles_asociados,
					         COUNT(DISTINCT pe.id_pla) as total_planteles_asociados,
					         CASE 
					             WHEN e.ult_eje IS NULL THEN 'sin_sesion'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) <= 1 THEN 'verde'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) BETWEEN 2 AND 3 THEN 'amarillo'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) >= 4 THEN 'rojo'
					             ELSE 'sin_sesion'
					         END as semaforo_sesion,
					         TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) as dias_desde_ultima_sesion
					  FROM ejecutivo e 
					  LEFT JOIN plantel p ON e.id_pla = p.id_pla 
					  LEFT JOIN cita c ON e.id_eje = c.id_eje2 AND c.eli_cit = 1 
					  LEFT JOIN planteles_ejecutivo pe ON e.id_eje = pe.id_eje
					  LEFT JOIN plantel pa ON pe.id_pla = pa.id_pla
					  GROUP BY e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje, p.nom_pla
					  ORDER BY e.eli_eje DESC, e.nom_eje ASC
[2025-07-23 19:52:02] Ejecutivo ID: 9 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 19:52:02] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 19:52:02] Ejecutivo ID: 16 - Citas propias: 6 - Citas hijos: 7 - Total: 13
[2025-07-23 19:52:02] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 19:52:02] Ejecutivo ID: 12 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:52:02] Ejecutivo ID: 15 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:52:02] Ejecutivo ID: 18 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:52:02] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 19:52:02] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 19:52:02] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:52:02] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 7 - Total: 11
[2025-07-23 19:52:02] Ejecutivo ID: 10 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 19:52:02] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:52:02] Ejecutivo ID: 2 - Citas propias: 6 - Citas hijos: 5 - Total: 11
[2025-07-23 19:52:02] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:52:02] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:52:02] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:52:02] Ejecutivo ID: 13 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:52:02] Ejecutivo ID: 1 - Citas propias: 0 - Citas hijos: 0 - Total: 0
[2025-07-23 19:52:02] Ejecutivos con citas encontrados: 15
[2025-07-23 19:52:08] REQUEST recibido: Array
(
    [action] => obtener_ejecutivos_con_citas
)

[2025-07-23 19:52:08] Query ejecutivos con citas: SELECT e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje,
					         p.nom_pla as plantel_principal,
					         COUNT(DISTINCT c.id_cit) as citas_propias,
					         GROUP_CONCAT(DISTINCT CONCAT(pa.id_pla, ':', pa.nom_pla) SEPARATOR '|') as planteles_asociados,
					         COUNT(DISTINCT pe.id_pla) as total_planteles_asociados,
					         CASE 
					             WHEN e.ult_eje IS NULL THEN 'sin_sesion'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) <= 1 THEN 'verde'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) BETWEEN 2 AND 3 THEN 'amarillo'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) >= 4 THEN 'rojo'
					             ELSE 'sin_sesion'
					         END as semaforo_sesion,
					         TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) as dias_desde_ultima_sesion
					  FROM ejecutivo e 
					  LEFT JOIN plantel p ON e.id_pla = p.id_pla 
					  LEFT JOIN cita c ON e.id_eje = c.id_eje2 AND c.eli_cit = 1 
					  LEFT JOIN planteles_ejecutivo pe ON e.id_eje = pe.id_eje
					  LEFT JOIN plantel pa ON pe.id_pla = pa.id_pla
					  GROUP BY e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje, p.nom_pla
					  ORDER BY e.eli_eje DESC, e.nom_eje ASC
[2025-07-23 19:52:08] Ejecutivo ID: 9 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 19:52:08] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 19:52:08] Ejecutivo ID: 16 - Citas propias: 6 - Citas hijos: 7 - Total: 13
[2025-07-23 19:52:08] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 19:52:08] Ejecutivo ID: 12 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:52:08] Ejecutivo ID: 15 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:52:08] Ejecutivo ID: 18 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:52:08] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 19:52:08] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 19:52:08] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:52:08] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 7 - Total: 11
[2025-07-23 19:52:08] Ejecutivo ID: 10 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 19:52:08] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:52:08] Ejecutivo ID: 2 - Citas propias: 6 - Citas hijos: 5 - Total: 11
[2025-07-23 19:52:08] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:52:08] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:52:08] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:52:08] Ejecutivo ID: 13 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:52:08] Ejecutivo ID: 1 - Citas propias: 0 - Citas hijos: 0 - Total: 0
[2025-07-23 19:52:08] Ejecutivos con citas encontrados: 15
[2025-07-23 19:53:57] REQUEST recibido: Array
(
    [action] => obtener_ejecutivos_con_citas
)

[2025-07-23 19:53:57] Query ejecutivos con citas: SELECT e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje,
					         p.nom_pla as plantel_principal,
					         COUNT(DISTINCT c.id_cit) as citas_propias,
					         GROUP_CONCAT(DISTINCT CONCAT(pa.id_pla, ':', pa.nom_pla) SEPARATOR '|') as planteles_asociados,
					         COUNT(DISTINCT pe.id_pla) as total_planteles_asociados,
					         CASE 
					             WHEN e.ult_eje IS NULL THEN 'sin_sesion'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) <= 1 THEN 'verde'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) BETWEEN 2 AND 3 THEN 'amarillo'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) >= 4 THEN 'rojo'
					             ELSE 'sin_sesion'
					         END as semaforo_sesion,
					         TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) as dias_desde_ultima_sesion
					  FROM ejecutivo e 
					  LEFT JOIN plantel p ON e.id_pla = p.id_pla 
					  LEFT JOIN cita c ON e.id_eje = c.id_eje2 AND c.eli_cit = 1 
					  LEFT JOIN planteles_ejecutivo pe ON e.id_eje = pe.id_eje
					  LEFT JOIN plantel pa ON pe.id_pla = pa.id_pla
					  GROUP BY e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje, p.nom_pla
					  ORDER BY e.eli_eje DESC, e.nom_eje ASC
[2025-07-23 19:53:57] Ejecutivo ID: 9 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 19:53:57] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 19:53:57] Ejecutivo ID: 16 - Citas propias: 6 - Citas hijos: 7 - Total: 13
[2025-07-23 19:53:57] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 19:53:57] Ejecutivo ID: 12 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:53:57] Ejecutivo ID: 15 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:53:57] Ejecutivo ID: 18 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:53:57] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 19:53:57] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 19:53:57] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:53:57] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 7 - Total: 11
[2025-07-23 19:53:57] Ejecutivo ID: 10 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 19:53:57] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:53:57] Ejecutivo ID: 2 - Citas propias: 6 - Citas hijos: 5 - Total: 11
[2025-07-23 19:53:57] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:53:57] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:53:57] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:53:57] Ejecutivo ID: 13 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:53:57] Ejecutivo ID: 1 - Citas propias: 0 - Citas hijos: 0 - Total: 0
[2025-07-23 19:53:57] Ejecutivos con citas encontrados: 15
[2025-07-23 19:54:16] REQUEST recibido: Array
(
    [action] => obtener_ejecutivos_con_citas
)

[2025-07-23 19:54:16] Query ejecutivos con citas: SELECT e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje,
					         p.nom_pla as plantel_principal,
					         COUNT(DISTINCT c.id_cit) as citas_propias,
					         GROUP_CONCAT(DISTINCT CONCAT(pa.id_pla, ':', pa.nom_pla) SEPARATOR '|') as planteles_asociados,
					         COUNT(DISTINCT pe.id_pla) as total_planteles_asociados,
					         CASE 
					             WHEN e.ult_eje IS NULL THEN 'sin_sesion'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) <= 1 THEN 'verde'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) BETWEEN 2 AND 3 THEN 'amarillo'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) >= 4 THEN 'rojo'
					             ELSE 'sin_sesion'
					         END as semaforo_sesion,
					         TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) as dias_desde_ultima_sesion
					  FROM ejecutivo e 
					  LEFT JOIN plantel p ON e.id_pla = p.id_pla 
					  LEFT JOIN cita c ON e.id_eje = c.id_eje2 AND c.eli_cit = 1 
					  LEFT JOIN planteles_ejecutivo pe ON e.id_eje = pe.id_eje
					  LEFT JOIN plantel pa ON pe.id_pla = pa.id_pla
					  GROUP BY e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje, p.nom_pla
					  ORDER BY e.eli_eje DESC, e.nom_eje ASC
[2025-07-23 19:54:16] Ejecutivo ID: 9 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 19:54:16] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 19:54:16] Ejecutivo ID: 16 - Citas propias: 6 - Citas hijos: 7 - Total: 13
[2025-07-23 19:54:16] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 19:54:16] Ejecutivo ID: 12 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:54:16] Ejecutivo ID: 15 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:54:16] Ejecutivo ID: 18 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:54:16] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 19:54:16] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 19:54:16] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:54:16] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 7 - Total: 11
[2025-07-23 19:54:16] Ejecutivo ID: 10 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 19:54:16] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:54:16] Ejecutivo ID: 2 - Citas propias: 6 - Citas hijos: 5 - Total: 11
[2025-07-23 19:54:16] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:54:16] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:54:16] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:54:16] Ejecutivo ID: 13 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:54:16] Ejecutivo ID: 1 - Citas propias: 0 - Citas hijos: 0 - Total: 0
[2025-07-23 19:54:16] Ejecutivos con citas encontrados: 15
[2025-07-23 19:54:19] REQUEST recibido: Array
(
    [action] => obtener_ejecutivos_con_citas
)

[2025-07-23 19:54:19] Query ejecutivos con citas: SELECT e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje,
					         p.nom_pla as plantel_principal,
					         COUNT(DISTINCT c.id_cit) as citas_propias,
					         GROUP_CONCAT(DISTINCT CONCAT(pa.id_pla, ':', pa.nom_pla) SEPARATOR '|') as planteles_asociados,
					         COUNT(DISTINCT pe.id_pla) as total_planteles_asociados,
					         CASE 
					             WHEN e.ult_eje IS NULL THEN 'sin_sesion'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) <= 1 THEN 'verde'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) BETWEEN 2 AND 3 THEN 'amarillo'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) >= 4 THEN 'rojo'
					             ELSE 'sin_sesion'
					         END as semaforo_sesion,
					         TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) as dias_desde_ultima_sesion
					  FROM ejecutivo e 
					  LEFT JOIN plantel p ON e.id_pla = p.id_pla 
					  LEFT JOIN cita c ON e.id_eje = c.id_eje2 AND c.eli_cit = 1 
					  LEFT JOIN planteles_ejecutivo pe ON e.id_eje = pe.id_eje
					  LEFT JOIN plantel pa ON pe.id_pla = pa.id_pla
					  GROUP BY e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje, p.nom_pla
					  ORDER BY e.eli_eje DESC, e.nom_eje ASC
[2025-07-23 19:54:19] Ejecutivo ID: 9 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 19:54:20] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 19:54:20] Ejecutivo ID: 16 - Citas propias: 6 - Citas hijos: 7 - Total: 13
[2025-07-23 19:54:20] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 19:54:20] Ejecutivo ID: 12 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:54:20] Ejecutivo ID: 15 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:54:20] Ejecutivo ID: 18 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:54:20] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 19:54:20] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 19:54:20] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:54:20] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 7 - Total: 11
[2025-07-23 19:54:20] Ejecutivo ID: 10 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 19:54:20] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:54:20] Ejecutivo ID: 2 - Citas propias: 6 - Citas hijos: 5 - Total: 11
[2025-07-23 19:54:20] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:54:20] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:54:20] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:54:20] Ejecutivo ID: 13 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:54:20] Ejecutivo ID: 1 - Citas propias: 0 - Citas hijos: 0 - Total: 0
[2025-07-23 19:54:20] Ejecutivos con citas encontrados: 15
[2025-07-23 19:54:25] REQUEST recibido: Array
(
    [action] => obtener_ejecutivos_con_citas
)

[2025-07-23 19:54:25] Query ejecutivos con citas: SELECT e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje,
					         p.nom_pla as plantel_principal,
					         COUNT(DISTINCT c.id_cit) as citas_propias,
					         GROUP_CONCAT(DISTINCT CONCAT(pa.id_pla, ':', pa.nom_pla) SEPARATOR '|') as planteles_asociados,
					         COUNT(DISTINCT pe.id_pla) as total_planteles_asociados,
					         CASE 
					             WHEN e.ult_eje IS NULL THEN 'sin_sesion'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) <= 1 THEN 'verde'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) BETWEEN 2 AND 3 THEN 'amarillo'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) >= 4 THEN 'rojo'
					             ELSE 'sin_sesion'
					         END as semaforo_sesion,
					         TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) as dias_desde_ultima_sesion
					  FROM ejecutivo e 
					  LEFT JOIN plantel p ON e.id_pla = p.id_pla 
					  LEFT JOIN cita c ON e.id_eje = c.id_eje2 AND c.eli_cit = 1 
					  LEFT JOIN planteles_ejecutivo pe ON e.id_eje = pe.id_eje
					  LEFT JOIN plantel pa ON pe.id_pla = pa.id_pla
					  GROUP BY e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje, p.nom_pla
					  ORDER BY e.eli_eje DESC, e.nom_eje ASC
[2025-07-23 19:54:25] Ejecutivo ID: 9 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 19:54:25] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 19:54:25] Ejecutivo ID: 16 - Citas propias: 6 - Citas hijos: 7 - Total: 13
[2025-07-23 19:54:25] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 19:54:25] Ejecutivo ID: 12 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:54:25] Ejecutivo ID: 15 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:54:25] Ejecutivo ID: 18 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:54:25] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 19:54:25] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 19:54:25] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:54:25] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 7 - Total: 11
[2025-07-23 19:54:25] Ejecutivo ID: 10 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 19:54:25] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:54:25] Ejecutivo ID: 2 - Citas propias: 6 - Citas hijos: 5 - Total: 11
[2025-07-23 19:54:25] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:54:25] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:54:25] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:54:25] Ejecutivo ID: 13 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:54:25] Ejecutivo ID: 1 - Citas propias: 0 - Citas hijos: 0 - Total: 0
[2025-07-23 19:54:25] Ejecutivos con citas encontrados: 15
[2025-07-23 19:54:30] REQUEST recibido: Array
(
    [action] => mover_ejecutivo
    [id_eje] => 20
    [id_padre] => 18
)

[2025-07-23 19:54:30] ==============================================
[2025-07-23 19:54:30] MOVER EJECUTIVO - REQUEST RECIBIDO
[2025-07-23 19:54:30] POST data completo: Array
(
    [action] => mover_ejecutivo
    [id_eje] => 20
    [id_padre] => 18
)

[2025-07-23 19:54:30] Valores procesados:
[2025-07-23 19:54:30] - ID Ejecutivo: 20
[2025-07-23 19:54:30] - ID Padre: 18
[2025-07-23 19:54:30] - ID Plantel: NULL
[2025-07-23 19:54:30] ANTES - Ejecutivo: Samuel Ortigoza, Padre anterior: 4, Plantel anterior: 
[2025-07-23 19:54:30] NUEVO PADRE: Eric Valenzuela (ID: 18)
[2025-07-23 19:54:30] QUERY MOVER: UPDATE ejecutivo SET id_padre = '18', id_pla = NULL WHERE id_eje = '20'
[2025-07-23 19:54:30] VERIFICACIÓN - Nuevo padre: 18, Nuevo plantel: 
[2025-07-23 19:54:30] WebSocket movimiento enviado
[2025-07-23 19:54:30] EJECUTIVO MOVIDO EXITOSAMENTE
[2025-07-23 19:54:30] RESPUESTA ENVIADA: SUCCESS
[2025-07-23 19:54:30] ==============================================
[2025-07-23 19:54:41] REQUEST recibido: Array
(
    [action] => obtener_ejecutivos_con_citas
)

[2025-07-23 19:54:41] Query ejecutivos con citas: SELECT e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje,
					         p.nom_pla as plantel_principal,
					         COUNT(DISTINCT c.id_cit) as citas_propias,
					         GROUP_CONCAT(DISTINCT CONCAT(pa.id_pla, ':', pa.nom_pla) SEPARATOR '|') as planteles_asociados,
					         COUNT(DISTINCT pe.id_pla) as total_planteles_asociados,
					         CASE 
					             WHEN e.ult_eje IS NULL THEN 'sin_sesion'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) <= 1 THEN 'verde'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) BETWEEN 2 AND 3 THEN 'amarillo'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) >= 4 THEN 'rojo'
					             ELSE 'sin_sesion'
					         END as semaforo_sesion,
					         TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) as dias_desde_ultima_sesion
					  FROM ejecutivo e 
					  LEFT JOIN plantel p ON e.id_pla = p.id_pla 
					  LEFT JOIN cita c ON e.id_eje = c.id_eje2 AND c.eli_cit = 1 
					  LEFT JOIN planteles_ejecutivo pe ON e.id_eje = pe.id_eje
					  LEFT JOIN plantel pa ON pe.id_pla = pa.id_pla
					  GROUP BY e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje, p.nom_pla
					  ORDER BY e.eli_eje DESC, e.nom_eje ASC
[2025-07-23 19:54:41] Ejecutivo ID: 9 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 19:54:41] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 19:54:41] Ejecutivo ID: 16 - Citas propias: 6 - Citas hijos: 7 - Total: 13
[2025-07-23 19:54:41] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 19:54:41] Ejecutivo ID: 12 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:54:41] Ejecutivo ID: 15 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:54:41] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:54:41] Ejecutivo ID: 18 - Citas propias: 5 - Citas hijos: 5 - Total: 10
[2025-07-23 19:54:41] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 19:54:41] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 19:54:41] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 2 - Total: 6
[2025-07-23 19:54:41] Ejecutivo ID: 10 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 19:54:41] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:54:41] Ejecutivo ID: 2 - Citas propias: 6 - Citas hijos: 5 - Total: 11
[2025-07-23 19:54:41] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:54:41] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:54:41] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:54:41] Ejecutivo ID: 13 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:54:41] Ejecutivo ID: 1 - Citas propias: 0 - Citas hijos: 0 - Total: 0
[2025-07-23 19:54:41] Ejecutivos con citas encontrados: 15
[2025-07-23 19:55:39] REQUEST recibido: Array
(
    [action] => actualizar_ejecutivo
    [nom_eje] => Rodrigo Ramirez
    [tel_eje] => 0000-111
    [id_padre] => 2
    [eli_eje] => 1
    [id_eje] => 21
)

[2025-07-23 19:55:40] REQUEST recibido: Array
(
    [action] => obtener_ejecutivos_con_citas
)

[2025-07-23 19:55:40] Query ejecutivos con citas: SELECT e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje,
					         p.nom_pla as plantel_principal,
					         COUNT(DISTINCT c.id_cit) as citas_propias,
					         GROUP_CONCAT(DISTINCT CONCAT(pa.id_pla, ':', pa.nom_pla) SEPARATOR '|') as planteles_asociados,
					         COUNT(DISTINCT pe.id_pla) as total_planteles_asociados,
					         CASE 
					             WHEN e.ult_eje IS NULL THEN 'sin_sesion'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) <= 1 THEN 'verde'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) BETWEEN 2 AND 3 THEN 'amarillo'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) >= 4 THEN 'rojo'
					             ELSE 'sin_sesion'
					         END as semaforo_sesion,
					         TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) as dias_desde_ultima_sesion
					  FROM ejecutivo e 
					  LEFT JOIN plantel p ON e.id_pla = p.id_pla 
					  LEFT JOIN cita c ON e.id_eje = c.id_eje2 AND c.eli_cit = 1 
					  LEFT JOIN planteles_ejecutivo pe ON e.id_eje = pe.id_eje
					  LEFT JOIN plantel pa ON pe.id_pla = pa.id_pla
					  GROUP BY e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje, p.nom_pla
					  ORDER BY e.eli_eje DESC, e.nom_eje ASC
[2025-07-23 19:55:40] Ejecutivo ID: 9 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 19:55:40] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 19:55:40] Ejecutivo ID: 16 - Citas propias: 6 - Citas hijos: 7 - Total: 13
[2025-07-23 19:55:40] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 19:55:40] Ejecutivo ID: 12 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:55:40] Ejecutivo ID: 15 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:55:40] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:55:40] Ejecutivo ID: 18 - Citas propias: 5 - Citas hijos: 5 - Total: 10
[2025-07-23 19:55:40] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 19:55:40] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 19:55:40] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 2 - Total: 6
[2025-07-23 19:55:40] Ejecutivo ID: 10 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 19:55:40] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:55:40] Ejecutivo ID: 2 - Citas propias: 6 - Citas hijos: 5 - Total: 11
[2025-07-23 19:55:40] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:55:40] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:55:40] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:55:40] Ejecutivo ID: 13 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:55:40] Ejecutivo ID: 1 - Citas propias: 0 - Citas hijos: 0 - Total: 0
[2025-07-23 19:55:40] Ejecutivos con citas encontrados: 15
[2025-07-23 19:55:44] REQUEST recibido: Array
(
    [action] => obtener_ejecutivos_con_citas
)

[2025-07-23 19:55:44] Query ejecutivos con citas: SELECT e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje,
					         p.nom_pla as plantel_principal,
					         COUNT(DISTINCT c.id_cit) as citas_propias,
					         GROUP_CONCAT(DISTINCT CONCAT(pa.id_pla, ':', pa.nom_pla) SEPARATOR '|') as planteles_asociados,
					         COUNT(DISTINCT pe.id_pla) as total_planteles_asociados,
					         CASE 
					             WHEN e.ult_eje IS NULL THEN 'sin_sesion'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) <= 1 THEN 'verde'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) BETWEEN 2 AND 3 THEN 'amarillo'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) >= 4 THEN 'rojo'
					             ELSE 'sin_sesion'
					         END as semaforo_sesion,
					         TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) as dias_desde_ultima_sesion
					  FROM ejecutivo e 
					  LEFT JOIN plantel p ON e.id_pla = p.id_pla 
					  LEFT JOIN cita c ON e.id_eje = c.id_eje2 AND c.eli_cit = 1 
					  LEFT JOIN planteles_ejecutivo pe ON e.id_eje = pe.id_eje
					  LEFT JOIN plantel pa ON pe.id_pla = pa.id_pla
					  GROUP BY e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje, p.nom_pla
					  ORDER BY e.eli_eje DESC, e.nom_eje ASC
[2025-07-23 19:55:44] Ejecutivo ID: 9 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 19:55:44] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 19:55:44] Ejecutivo ID: 16 - Citas propias: 6 - Citas hijos: 7 - Total: 13
[2025-07-23 19:55:44] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 19:55:44] Ejecutivo ID: 12 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:55:44] Ejecutivo ID: 15 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:55:44] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:55:44] Ejecutivo ID: 18 - Citas propias: 5 - Citas hijos: 5 - Total: 10
[2025-07-23 19:55:44] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 19:55:44] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 19:55:44] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 2 - Total: 6
[2025-07-23 19:55:44] Ejecutivo ID: 10 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 19:55:44] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:55:44] Ejecutivo ID: 2 - Citas propias: 6 - Citas hijos: 5 - Total: 11
[2025-07-23 19:55:44] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:55:44] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:55:44] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:55:44] Ejecutivo ID: 13 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:55:44] Ejecutivo ID: 1 - Citas propias: 0 - Citas hijos: 0 - Total: 0
[2025-07-23 19:55:44] Ejecutivos con citas encontrados: 15
[2025-07-23 19:57:37] REQUEST recibido: Array
(
    [action] => obtener_ejecutivos_con_citas
)

[2025-07-23 19:57:37] Query ejecutivos con citas: SELECT e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje,
					         p.nom_pla as plantel_principal,
					         COUNT(DISTINCT c.id_cit) as citas_propias,
					         GROUP_CONCAT(DISTINCT CONCAT(pa.id_pla, ':', pa.nom_pla) SEPARATOR '|') as planteles_asociados,
					         COUNT(DISTINCT pe.id_pla) as total_planteles_asociados,
					         CASE 
					             WHEN e.ult_eje IS NULL THEN 'sin_sesion'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) <= 1 THEN 'verde'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) BETWEEN 2 AND 3 THEN 'amarillo'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) >= 4 THEN 'rojo'
					             ELSE 'sin_sesion'
					         END as semaforo_sesion,
					         TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) as dias_desde_ultima_sesion
					  FROM ejecutivo e 
					  LEFT JOIN plantel p ON e.id_pla = p.id_pla 
					  LEFT JOIN cita c ON e.id_eje = c.id_eje2 AND c.eli_cit = 1 
					  LEFT JOIN planteles_ejecutivo pe ON e.id_eje = pe.id_eje
					  LEFT JOIN plantel pa ON pe.id_pla = pa.id_pla
					  GROUP BY e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje, p.nom_pla
					  ORDER BY e.eli_eje DESC, e.nom_eje ASC
[2025-07-23 19:57:37] Ejecutivo ID: 9 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 19:57:37] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 19:57:37] Ejecutivo ID: 16 - Citas propias: 6 - Citas hijos: 7 - Total: 13
[2025-07-23 19:57:37] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 19:57:37] Ejecutivo ID: 12 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:57:37] Ejecutivo ID: 15 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:57:37] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:57:37] Ejecutivo ID: 18 - Citas propias: 5 - Citas hijos: 5 - Total: 10
[2025-07-23 19:57:37] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 19:57:37] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 19:57:37] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 2 - Total: 6
[2025-07-23 19:57:37] Ejecutivo ID: 10 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 19:57:37] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:57:37] Ejecutivo ID: 2 - Citas propias: 6 - Citas hijos: 5 - Total: 11
[2025-07-23 19:57:37] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:57:37] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:57:37] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:57:37] Ejecutivo ID: 13 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:57:37] Ejecutivo ID: 1 - Citas propias: 0 - Citas hijos: 0 - Total: 0
[2025-07-23 19:57:37] Ejecutivos con citas encontrados: 15
[2025-07-23 19:58:47] REQUEST recibido: Array
(
    [action] => obtener_ejecutivos_con_citas
)

[2025-07-23 19:58:47] Query ejecutivos con citas: SELECT e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje,
					         p.nom_pla as plantel_principal,
					         COUNT(DISTINCT c.id_cit) as citas_propias,
					         GROUP_CONCAT(DISTINCT CONCAT(pa.id_pla, ':', pa.nom_pla) SEPARATOR '|') as planteles_asociados,
					         COUNT(DISTINCT pe.id_pla) as total_planteles_asociados,
					         CASE 
					             WHEN e.ult_eje IS NULL THEN 'sin_sesion'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) <= 1 THEN 'verde'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) BETWEEN 2 AND 3 THEN 'amarillo'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) >= 4 THEN 'rojo'
					             ELSE 'sin_sesion'
					         END as semaforo_sesion,
					         TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) as dias_desde_ultima_sesion
					  FROM ejecutivo e 
					  LEFT JOIN plantel p ON e.id_pla = p.id_pla 
					  LEFT JOIN cita c ON e.id_eje = c.id_eje2 AND c.eli_cit = 1 
					  LEFT JOIN planteles_ejecutivo pe ON e.id_eje = pe.id_eje
					  LEFT JOIN plantel pa ON pe.id_pla = pa.id_pla
					  GROUP BY e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje, p.nom_pla
					  ORDER BY e.eli_eje DESC, e.nom_eje ASC
[2025-07-23 19:58:47] Ejecutivo ID: 9 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 19:58:47] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 19:58:47] Ejecutivo ID: 16 - Citas propias: 6 - Citas hijos: 7 - Total: 13
[2025-07-23 19:58:47] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 19:58:47] Ejecutivo ID: 12 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:58:47] Ejecutivo ID: 15 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:58:47] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:58:47] Ejecutivo ID: 18 - Citas propias: 5 - Citas hijos: 5 - Total: 10
[2025-07-23 19:58:47] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 19:58:47] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 19:58:47] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 2 - Total: 6
[2025-07-23 19:58:47] Ejecutivo ID: 10 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 19:58:47] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:58:47] Ejecutivo ID: 2 - Citas propias: 6 - Citas hijos: 5 - Total: 11
[2025-07-23 19:58:47] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:58:47] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:58:47] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:58:47] Ejecutivo ID: 13 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:58:47] Ejecutivo ID: 1 - Citas propias: 0 - Citas hijos: 0 - Total: 0
[2025-07-23 19:58:47] Ejecutivos con citas encontrados: 15
[2025-07-23 19:58:54] REQUEST recibido: Array
(
    [action] => mover_ejecutivo
    [id_eje] => 21
    [id_padre] => 4
)

[2025-07-23 19:58:54] ==============================================
[2025-07-23 19:58:54] MOVER EJECUTIVO - REQUEST RECIBIDO
[2025-07-23 19:58:54] POST data completo: Array
(
    [action] => mover_ejecutivo
    [id_eje] => 21
    [id_padre] => 4
)

[2025-07-23 19:58:54] Valores procesados:
[2025-07-23 19:58:54] - ID Ejecutivo: 21
[2025-07-23 19:58:54] - ID Padre: 4
[2025-07-23 19:58:54] - ID Plantel: NULL
[2025-07-23 19:58:54] ANTES - Ejecutivo: Rodrigo Ramirez, Padre anterior: 2, Plantel anterior: 
[2025-07-23 19:58:54] NUEVO PADRE: Francisco Pineda (ID: 4)
[2025-07-23 19:58:54] QUERY MOVER: UPDATE ejecutivo SET id_padre = '4', id_pla = NULL WHERE id_eje = '21'
[2025-07-23 19:58:54] VERIFICACIÓN - Nuevo padre: 4, Nuevo plantel: 
[2025-07-23 19:58:54] WebSocket movimiento enviado
[2025-07-23 19:58:54] EJECUTIVO MOVIDO EXITOSAMENTE
[2025-07-23 19:58:54] RESPUESTA ENVIADA: SUCCESS
[2025-07-23 19:58:54] ==============================================
[2025-07-23 19:58:57] REQUEST recibido: Array
(
    [action] => obtener_ejecutivos_con_citas
)

[2025-07-23 19:58:57] Query ejecutivos con citas: SELECT e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje,
					         p.nom_pla as plantel_principal,
					         COUNT(DISTINCT c.id_cit) as citas_propias,
					         GROUP_CONCAT(DISTINCT CONCAT(pa.id_pla, ':', pa.nom_pla) SEPARATOR '|') as planteles_asociados,
					         COUNT(DISTINCT pe.id_pla) as total_planteles_asociados,
					         CASE 
					             WHEN e.ult_eje IS NULL THEN 'sin_sesion'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) <= 1 THEN 'verde'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) BETWEEN 2 AND 3 THEN 'amarillo'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) >= 4 THEN 'rojo'
					             ELSE 'sin_sesion'
					         END as semaforo_sesion,
					         TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) as dias_desde_ultima_sesion
					  FROM ejecutivo e 
					  LEFT JOIN plantel p ON e.id_pla = p.id_pla 
					  LEFT JOIN cita c ON e.id_eje = c.id_eje2 AND c.eli_cit = 1 
					  LEFT JOIN planteles_ejecutivo pe ON e.id_eje = pe.id_eje
					  LEFT JOIN plantel pa ON pe.id_pla = pa.id_pla
					  GROUP BY e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje, p.nom_pla
					  ORDER BY e.eli_eje DESC, e.nom_eje ASC
[2025-07-23 19:58:57] Ejecutivo ID: 9 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 19:58:57] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 19:58:57] Ejecutivo ID: 16 - Citas propias: 6 - Citas hijos: 7 - Total: 13
[2025-07-23 19:58:57] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 19:58:57] Ejecutivo ID: 12 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:58:57] Ejecutivo ID: 15 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:58:57] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:58:57] Ejecutivo ID: 18 - Citas propias: 5 - Citas hijos: 5 - Total: 10
[2025-07-23 19:58:57] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 19:58:57] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 19:58:57] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:58:57] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 7 - Total: 11
[2025-07-23 19:58:57] Ejecutivo ID: 10 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 19:58:57] Ejecutivo ID: 2 - Citas propias: 6 - Citas hijos: 0 - Total: 6
[2025-07-23 19:58:57] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:58:57] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:58:57] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:58:57] Ejecutivo ID: 13 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:58:57] Ejecutivo ID: 1 - Citas propias: 0 - Citas hijos: 0 - Total: 0
[2025-07-23 19:58:57] Ejecutivos con citas encontrados: 15
[2025-07-23 19:59:29] REQUEST recibido: Array
(
    [action] => mover_ejecutivo
    [id_eje] => 11
    [id_padre] => 18
)

[2025-07-23 19:59:29] ==============================================
[2025-07-23 19:59:29] MOVER EJECUTIVO - REQUEST RECIBIDO
[2025-07-23 19:59:29] POST data completo: Array
(
    [action] => mover_ejecutivo
    [id_eje] => 11
    [id_padre] => 18
)

[2025-07-23 19:59:29] Valores procesados:
[2025-07-23 19:59:29] - ID Ejecutivo: 11
[2025-07-23 19:59:29] - ID Padre: 18
[2025-07-23 19:59:29] - ID Plantel: NULL
[2025-07-23 19:59:29] ANTES - Ejecutivo: Carmen Morales Vega, Padre anterior: 16, Plantel anterior: 
[2025-07-23 19:59:29] NUEVO PADRE: Eric Valenzuela (ID: 18)
[2025-07-23 19:59:29] QUERY MOVER: UPDATE ejecutivo SET id_padre = '18', id_pla = NULL WHERE id_eje = '11'
[2025-07-23 19:59:29] VERIFICACIÓN - Nuevo padre: 18, Nuevo plantel: 
[2025-07-23 19:59:29] WebSocket movimiento enviado
[2025-07-23 19:59:29] EJECUTIVO MOVIDO EXITOSAMENTE
[2025-07-23 19:59:29] RESPUESTA ENVIADA: SUCCESS
[2025-07-23 19:59:29] ==============================================
[2025-07-23 19:59:36] REQUEST recibido: Array
(
    [action] => mover_ejecutivo
    [id_eje] => 11
    [id_padre] => 
)

[2025-07-23 19:59:36] ==============================================
[2025-07-23 19:59:36] MOVER EJECUTIVO - REQUEST RECIBIDO
[2025-07-23 19:59:36] POST data completo: Array
(
    [action] => mover_ejecutivo
    [id_eje] => 11
    [id_padre] => 
)

[2025-07-23 19:59:36] Valores procesados:
[2025-07-23 19:59:36] - ID Ejecutivo: 11
[2025-07-23 19:59:36] - ID Padre: NULL
[2025-07-23 19:59:36] - ID Plantel: NULL
[2025-07-23 19:59:36] ANTES - Ejecutivo: Carmen Morales Vega, Padre anterior: 18, Plantel anterior: 
[2025-07-23 19:59:36] QUERY MOVER: UPDATE ejecutivo SET id_padre = NULL, id_pla = NULL WHERE id_eje = '11'
[2025-07-23 19:59:36] VERIFICACIÓN - Nuevo padre: , Nuevo plantel: 
[2025-07-23 19:59:36] WebSocket movimiento enviado
[2025-07-23 19:59:36] EJECUTIVO MOVIDO EXITOSAMENTE
[2025-07-23 19:59:36] RESPUESTA ENVIADA: SUCCESS
[2025-07-23 19:59:36] ==============================================
[2025-07-23 19:59:41] REQUEST recibido: Array
(
    [action] => mover_ejecutivo
    [id_eje] => 20
    [id_padre] => 
)

[2025-07-23 19:59:41] ==============================================
[2025-07-23 19:59:41] MOVER EJECUTIVO - REQUEST RECIBIDO
[2025-07-23 19:59:41] POST data completo: Array
(
    [action] => mover_ejecutivo
    [id_eje] => 20
    [id_padre] => 
)

[2025-07-23 19:59:41] Valores procesados:
[2025-07-23 19:59:41] - ID Ejecutivo: 20
[2025-07-23 19:59:41] - ID Padre: NULL
[2025-07-23 19:59:41] - ID Plantel: NULL
[2025-07-23 19:59:41] ANTES - Ejecutivo: Samuel Ortigoza, Padre anterior: 18, Plantel anterior: 
[2025-07-23 19:59:41] QUERY MOVER: UPDATE ejecutivo SET id_padre = NULL, id_pla = NULL WHERE id_eje = '20'
[2025-07-23 19:59:41] VERIFICACIÓN - Nuevo padre: , Nuevo plantel: 
[2025-07-23 19:59:41] WebSocket movimiento enviado
[2025-07-23 19:59:41] EJECUTIVO MOVIDO EXITOSAMENTE
[2025-07-23 19:59:41] RESPUESTA ENVIADA: SUCCESS
[2025-07-23 19:59:41] ==============================================
[2025-07-23 19:59:43] REQUEST recibido: Array
(
    [action] => obtener_ejecutivos_con_citas
)

[2025-07-23 19:59:43] Query ejecutivos con citas: SELECT e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje,
					         p.nom_pla as plantel_principal,
					         COUNT(DISTINCT c.id_cit) as citas_propias,
					         GROUP_CONCAT(DISTINCT CONCAT(pa.id_pla, ':', pa.nom_pla) SEPARATOR '|') as planteles_asociados,
					         COUNT(DISTINCT pe.id_pla) as total_planteles_asociados,
					         CASE 
					             WHEN e.ult_eje IS NULL THEN 'sin_sesion'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) <= 1 THEN 'verde'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) BETWEEN 2 AND 3 THEN 'amarillo'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) >= 4 THEN 'rojo'
					             ELSE 'sin_sesion'
					         END as semaforo_sesion,
					         TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) as dias_desde_ultima_sesion
					  FROM ejecutivo e 
					  LEFT JOIN plantel p ON e.id_pla = p.id_pla 
					  LEFT JOIN cita c ON e.id_eje = c.id_eje2 AND c.eli_cit = 1 
					  LEFT JOIN planteles_ejecutivo pe ON e.id_eje = pe.id_eje
					  LEFT JOIN plantel pa ON pe.id_pla = pa.id_pla
					  GROUP BY e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje, p.nom_pla
					  ORDER BY e.eli_eje DESC, e.nom_eje ASC
[2025-07-23 19:59:43] Ejecutivo ID: 9 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 19:59:43] Ejecutivo ID: 16 - Citas propias: 6 - Citas hijos: 0 - Total: 6
[2025-07-23 19:59:43] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 19:59:43] Ejecutivo ID: 12 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:59:43] Ejecutivo ID: 15 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:59:43] Ejecutivo ID: 18 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:59:43] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 19:59:43] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 19:59:43] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:59:43] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 7 - Total: 11
[2025-07-23 19:59:43] Ejecutivo ID: 10 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 19:59:43] Ejecutivo ID: 2 - Citas propias: 6 - Citas hijos: 0 - Total: 6
[2025-07-23 19:59:43] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:59:43] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:59:43] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:59:43] Ejecutivo ID: 13 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:59:43] Ejecutivo ID: 1 - Citas propias: 0 - Citas hijos: 0 - Total: 0
[2025-07-23 19:59:43] Ejecutivos con citas encontrados: 15
[2025-07-23 19:59:50] REQUEST recibido: Array
(
    [action] => obtener_ejecutivos_con_citas
)

[2025-07-23 19:59:50] Query ejecutivos con citas: SELECT e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje,
					         p.nom_pla as plantel_principal,
					         COUNT(DISTINCT c.id_cit) as citas_propias,
					         GROUP_CONCAT(DISTINCT CONCAT(pa.id_pla, ':', pa.nom_pla) SEPARATOR '|') as planteles_asociados,
					         COUNT(DISTINCT pe.id_pla) as total_planteles_asociados,
					         CASE 
					             WHEN e.ult_eje IS NULL THEN 'sin_sesion'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) <= 1 THEN 'verde'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) BETWEEN 2 AND 3 THEN 'amarillo'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) >= 4 THEN 'rojo'
					             ELSE 'sin_sesion'
					         END as semaforo_sesion,
					         TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) as dias_desde_ultima_sesion
					  FROM ejecutivo e 
					  LEFT JOIN plantel p ON e.id_pla = p.id_pla 
					  LEFT JOIN cita c ON e.id_eje = c.id_eje2 AND c.eli_cit = 1 
					  LEFT JOIN planteles_ejecutivo pe ON e.id_eje = pe.id_eje
					  LEFT JOIN plantel pa ON pe.id_pla = pa.id_pla
					  GROUP BY e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje, p.nom_pla
					  ORDER BY e.eli_eje DESC, e.nom_eje ASC
[2025-07-23 19:59:50] Ejecutivo ID: 9 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 19:59:50] Ejecutivo ID: 16 - Citas propias: 6 - Citas hijos: 0 - Total: 6
[2025-07-23 19:59:50] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 19:59:50] Ejecutivo ID: 12 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:59:50] Ejecutivo ID: 15 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:59:50] Ejecutivo ID: 18 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:59:50] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 19:59:50] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 19:59:50] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:59:50] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 7 - Total: 11
[2025-07-23 19:59:50] Ejecutivo ID: 10 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 19:59:50] Ejecutivo ID: 2 - Citas propias: 6 - Citas hijos: 0 - Total: 6
[2025-07-23 19:59:50] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:59:50] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:59:50] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 19:59:50] Ejecutivo ID: 13 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 19:59:50] Ejecutivo ID: 1 - Citas propias: 0 - Citas hijos: 0 - Total: 0
[2025-07-23 19:59:50] Ejecutivos con citas encontrados: 15
[2025-07-23 20:00:07] REQUEST recibido: Array
(
    [action] => obtener_ejecutivos_con_citas
)

[2025-07-23 20:00:07] Query ejecutivos con citas: SELECT e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje,
					         p.nom_pla as plantel_principal,
					         COUNT(DISTINCT c.id_cit) as citas_propias,
					         GROUP_CONCAT(DISTINCT CONCAT(pa.id_pla, ':', pa.nom_pla) SEPARATOR '|') as planteles_asociados,
					         COUNT(DISTINCT pe.id_pla) as total_planteles_asociados,
					         CASE 
					             WHEN e.ult_eje IS NULL THEN 'sin_sesion'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) <= 1 THEN 'verde'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) BETWEEN 2 AND 3 THEN 'amarillo'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) >= 4 THEN 'rojo'
					             ELSE 'sin_sesion'
					         END as semaforo_sesion,
					         TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) as dias_desde_ultima_sesion
					  FROM ejecutivo e 
					  LEFT JOIN plantel p ON e.id_pla = p.id_pla 
					  LEFT JOIN cita c ON e.id_eje = c.id_eje2 AND c.eli_cit = 1 
					  LEFT JOIN planteles_ejecutivo pe ON e.id_eje = pe.id_eje
					  LEFT JOIN plantel pa ON pe.id_pla = pa.id_pla
					  GROUP BY e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje, p.nom_pla
					  ORDER BY e.eli_eje DESC, e.nom_eje ASC
[2025-07-23 20:00:07] Ejecutivo ID: 9 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 20:00:07] Ejecutivo ID: 16 - Citas propias: 6 - Citas hijos: 0 - Total: 6
[2025-07-23 20:00:07] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 20:00:07] Ejecutivo ID: 12 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:00:07] Ejecutivo ID: 15 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:00:07] Ejecutivo ID: 18 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:00:07] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 20:00:07] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 20:00:07] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:00:07] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 7 - Total: 11
[2025-07-23 20:00:07] Ejecutivo ID: 10 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 20:00:07] Ejecutivo ID: 2 - Citas propias: 6 - Citas hijos: 0 - Total: 6
[2025-07-23 20:00:07] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:00:07] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:00:07] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:00:07] Ejecutivo ID: 13 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:00:07] Ejecutivo ID: 1 - Citas propias: 0 - Citas hijos: 0 - Total: 0
[2025-07-23 20:00:07] Ejecutivos con citas encontrados: 15
[2025-07-23 20:00:56] REQUEST recibido: Array
(
    [action] => obtener_ejecutivos_con_citas
)

[2025-07-23 20:00:56] Query ejecutivos con citas: SELECT e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje,
					         p.nom_pla as plantel_principal,
					         COUNT(DISTINCT c.id_cit) as citas_propias,
					         GROUP_CONCAT(DISTINCT CONCAT(pa.id_pla, ':', pa.nom_pla) SEPARATOR '|') as planteles_asociados,
					         COUNT(DISTINCT pe.id_pla) as total_planteles_asociados,
					         CASE 
					             WHEN e.ult_eje IS NULL THEN 'sin_sesion'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) <= 1 THEN 'verde'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) BETWEEN 2 AND 3 THEN 'amarillo'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) >= 4 THEN 'rojo'
					             ELSE 'sin_sesion'
					         END as semaforo_sesion,
					         TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) as dias_desde_ultima_sesion
					  FROM ejecutivo e 
					  LEFT JOIN plantel p ON e.id_pla = p.id_pla 
					  LEFT JOIN cita c ON e.id_eje = c.id_eje2 AND c.eli_cit = 1 
					  LEFT JOIN planteles_ejecutivo pe ON e.id_eje = pe.id_eje
					  LEFT JOIN plantel pa ON pe.id_pla = pa.id_pla
					  GROUP BY e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje, p.nom_pla
					  ORDER BY e.eli_eje DESC, e.nom_eje ASC
[2025-07-23 20:00:56] Ejecutivo ID: 9 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 20:00:56] Ejecutivo ID: 16 - Citas propias: 6 - Citas hijos: 0 - Total: 6
[2025-07-23 20:00:56] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 20:00:56] Ejecutivo ID: 12 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:00:56] Ejecutivo ID: 15 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:00:56] Ejecutivo ID: 18 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:00:56] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 20:00:56] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 20:00:56] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:00:56] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 7 - Total: 11
[2025-07-23 20:00:56] Ejecutivo ID: 10 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 20:00:56] Ejecutivo ID: 2 - Citas propias: 6 - Citas hijos: 0 - Total: 6
[2025-07-23 20:00:56] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:00:56] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:00:56] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:00:56] Ejecutivo ID: 13 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:00:56] Ejecutivo ID: 1 - Citas propias: 0 - Citas hijos: 0 - Total: 0
[2025-07-23 20:00:56] Ejecutivos con citas encontrados: 15
[2025-07-23 20:01:13] REQUEST recibido: Array
(
    [action] => mover_ejecutivo
    [id_eje] => 14
    [id_padre] => 20
)

[2025-07-23 20:01:13] ==============================================
[2025-07-23 20:01:13] MOVER EJECUTIVO - REQUEST RECIBIDO
[2025-07-23 20:01:13] POST data completo: Array
(
    [action] => mover_ejecutivo
    [id_eje] => 14
    [id_padre] => 20
)

[2025-07-23 20:01:13] Valores procesados:
[2025-07-23 20:01:13] - ID Ejecutivo: 14
[2025-07-23 20:01:13] - ID Padre: 20
[2025-07-23 20:01:13] - ID Plantel: NULL
[2025-07-23 20:01:13] ANTES - Ejecutivo: Pablo Jimenez, Padre anterior: , Plantel anterior: 3
[2025-07-23 20:01:13] NUEVO PADRE: Samuel Ortigoza (ID: 20)
[2025-07-23 20:01:13] QUERY MOVER: UPDATE ejecutivo SET id_padre = '20', id_pla = NULL WHERE id_eje = '14'
[2025-07-23 20:01:13] VERIFICACIÓN - Nuevo padre: 20, Nuevo plantel: 
[2025-07-23 20:01:13] WebSocket movimiento enviado
[2025-07-23 20:01:13] WebSocket cambio plantel enviado
[2025-07-23 20:01:13] EJECUTIVO MOVIDO EXITOSAMENTE
[2025-07-23 20:01:13] RESPUESTA ENVIADA: SUCCESS
[2025-07-23 20:01:13] ==============================================
[2025-07-23 20:01:17] REQUEST recibido: Array
(
    [action] => obtener_ejecutivos_con_citas
)

[2025-07-23 20:01:17] Query ejecutivos con citas: SELECT e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje,
					         p.nom_pla as plantel_principal,
					         COUNT(DISTINCT c.id_cit) as citas_propias,
					         GROUP_CONCAT(DISTINCT CONCAT(pa.id_pla, ':', pa.nom_pla) SEPARATOR '|') as planteles_asociados,
					         COUNT(DISTINCT pe.id_pla) as total_planteles_asociados,
					         CASE 
					             WHEN e.ult_eje IS NULL THEN 'sin_sesion'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) <= 1 THEN 'verde'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) BETWEEN 2 AND 3 THEN 'amarillo'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) >= 4 THEN 'rojo'
					             ELSE 'sin_sesion'
					         END as semaforo_sesion,
					         TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) as dias_desde_ultima_sesion
					  FROM ejecutivo e 
					  LEFT JOIN plantel p ON e.id_pla = p.id_pla 
					  LEFT JOIN cita c ON e.id_eje = c.id_eje2 AND c.eli_cit = 1 
					  LEFT JOIN planteles_ejecutivo pe ON e.id_eje = pe.id_eje
					  LEFT JOIN plantel pa ON pe.id_pla = pa.id_pla
					  GROUP BY e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje, p.nom_pla
					  ORDER BY e.eli_eje DESC, e.nom_eje ASC
[2025-07-23 20:01:17] Ejecutivo ID: 9 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 20:01:17] Ejecutivo ID: 16 - Citas propias: 6 - Citas hijos: 0 - Total: 6
[2025-07-23 20:01:17] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 20:01:17] Ejecutivo ID: 12 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:01:17] Ejecutivo ID: 15 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:01:17] Ejecutivo ID: 18 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:01:17] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 20:01:17] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 20:01:17] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:01:17] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 7 - Total: 11
[2025-07-23 20:01:17] Ejecutivo ID: 10 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 20:01:17] Ejecutivo ID: 2 - Citas propias: 6 - Citas hijos: 0 - Total: 6
[2025-07-23 20:01:17] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:01:17] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:01:17] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:01:17] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 4 - Total: 9
[2025-07-23 20:01:17] Ejecutivo ID: 13 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:01:17] Ejecutivo ID: 1 - Citas propias: 0 - Citas hijos: 0 - Total: 0
[2025-07-23 20:01:17] Ejecutivos con citas encontrados: 15
[2025-07-23 20:01:21] REQUEST recibido: Array
(
    [action] => obtener_ejecutivos_con_citas
)

[2025-07-23 20:01:21] Query ejecutivos con citas: SELECT e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje,
					         p.nom_pla as plantel_principal,
					         COUNT(DISTINCT c.id_cit) as citas_propias,
					         GROUP_CONCAT(DISTINCT CONCAT(pa.id_pla, ':', pa.nom_pla) SEPARATOR '|') as planteles_asociados,
					         COUNT(DISTINCT pe.id_pla) as total_planteles_asociados,
					         CASE 
					             WHEN e.ult_eje IS NULL THEN 'sin_sesion'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) <= 1 THEN 'verde'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) BETWEEN 2 AND 3 THEN 'amarillo'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) >= 4 THEN 'rojo'
					             ELSE 'sin_sesion'
					         END as semaforo_sesion,
					         TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) as dias_desde_ultima_sesion
					  FROM ejecutivo e 
					  LEFT JOIN plantel p ON e.id_pla = p.id_pla 
					  LEFT JOIN cita c ON e.id_eje = c.id_eje2 AND c.eli_cit = 1 
					  LEFT JOIN planteles_ejecutivo pe ON e.id_eje = pe.id_eje
					  LEFT JOIN plantel pa ON pe.id_pla = pa.id_pla
					  GROUP BY e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje, p.nom_pla
					  ORDER BY e.eli_eje DESC, e.nom_eje ASC
[2025-07-23 20:01:21] Ejecutivo ID: 9 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 20:01:21] Ejecutivo ID: 16 - Citas propias: 6 - Citas hijos: 0 - Total: 6
[2025-07-23 20:01:21] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 20:01:21] Ejecutivo ID: 12 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:01:21] Ejecutivo ID: 15 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:01:21] Ejecutivo ID: 18 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:01:21] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 20:01:21] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 20:01:21] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:01:21] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 7 - Total: 11
[2025-07-23 20:01:21] Ejecutivo ID: 10 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 20:01:21] Ejecutivo ID: 2 - Citas propias: 6 - Citas hijos: 0 - Total: 6
[2025-07-23 20:01:21] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:01:21] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:01:21] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:01:21] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 4 - Total: 9
[2025-07-23 20:01:21] Ejecutivo ID: 13 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:01:21] Ejecutivo ID: 1 - Citas propias: 0 - Citas hijos: 0 - Total: 0
[2025-07-23 20:01:21] Ejecutivos con citas encontrados: 15
[2025-07-23 20:01:23] REQUEST recibido: Array
(
    [action] => mover_ejecutivo
    [id_eje] => 13
    [id_padre] => 20
)

[2025-07-23 20:01:23] ==============================================
[2025-07-23 20:01:23] MOVER EJECUTIVO - REQUEST RECIBIDO
[2025-07-23 20:01:23] POST data completo: Array
(
    [action] => mover_ejecutivo
    [id_eje] => 13
    [id_padre] => 20
)

[2025-07-23 20:01:23] Valores procesados:
[2025-07-23 20:01:23] - ID Ejecutivo: 13
[2025-07-23 20:01:23] - ID Padre: 20
[2025-07-23 20:01:23] - ID Plantel: NULL
[2025-07-23 20:01:23] ANTES - Ejecutivo: Sofia Mendoza, Padre anterior: , Plantel anterior: 6
[2025-07-23 20:01:24] NUEVO PADRE: Samuel Ortigoza (ID: 20)
[2025-07-23 20:01:24] QUERY MOVER: UPDATE ejecutivo SET id_padre = '20', id_pla = NULL WHERE id_eje = '13'
[2025-07-23 20:01:24] VERIFICACIÓN - Nuevo padre: 20, Nuevo plantel: 
[2025-07-23 20:01:24] WebSocket movimiento enviado
[2025-07-23 20:01:24] WebSocket cambio plantel enviado
[2025-07-23 20:01:24] EJECUTIVO MOVIDO EXITOSAMENTE
[2025-07-23 20:01:24] RESPUESTA ENVIADA: SUCCESS
[2025-07-23 20:01:24] ==============================================
[2025-07-23 20:01:25] REQUEST recibido: Array
(
    [action] => obtener_ejecutivos_con_citas
)

[2025-07-23 20:01:26] Query ejecutivos con citas: SELECT e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje,
					         p.nom_pla as plantel_principal,
					         COUNT(DISTINCT c.id_cit) as citas_propias,
					         GROUP_CONCAT(DISTINCT CONCAT(pa.id_pla, ':', pa.nom_pla) SEPARATOR '|') as planteles_asociados,
					         COUNT(DISTINCT pe.id_pla) as total_planteles_asociados,
					         CASE 
					             WHEN e.ult_eje IS NULL THEN 'sin_sesion'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) <= 1 THEN 'verde'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) BETWEEN 2 AND 3 THEN 'amarillo'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) >= 4 THEN 'rojo'
					             ELSE 'sin_sesion'
					         END as semaforo_sesion,
					         TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) as dias_desde_ultima_sesion
					  FROM ejecutivo e 
					  LEFT JOIN plantel p ON e.id_pla = p.id_pla 
					  LEFT JOIN cita c ON e.id_eje = c.id_eje2 AND c.eli_cit = 1 
					  LEFT JOIN planteles_ejecutivo pe ON e.id_eje = pe.id_eje
					  LEFT JOIN plantel pa ON pe.id_pla = pa.id_pla
					  GROUP BY e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje, p.nom_pla
					  ORDER BY e.eli_eje DESC, e.nom_eje ASC
[2025-07-23 20:01:26] Ejecutivo ID: 9 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 20:01:26] Ejecutivo ID: 16 - Citas propias: 6 - Citas hijos: 0 - Total: 6
[2025-07-23 20:01:26] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 20:01:26] Ejecutivo ID: 12 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:01:26] Ejecutivo ID: 15 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:01:26] Ejecutivo ID: 18 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:01:26] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 20:01:26] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 20:01:26] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:01:26] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 7 - Total: 11
[2025-07-23 20:01:26] Ejecutivo ID: 10 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 20:01:26] Ejecutivo ID: 2 - Citas propias: 6 - Citas hijos: 0 - Total: 6
[2025-07-23 20:01:26] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:01:26] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:01:26] Ejecutivo ID: 13 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:01:26] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:01:26] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 8 - Total: 13
[2025-07-23 20:01:26] Ejecutivo ID: 13 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:01:26] Ejecutivo ID: 1 - Citas propias: 0 - Citas hijos: 0 - Total: 0
[2025-07-23 20:01:26] Ejecutivos con citas encontrados: 15
[2025-07-23 20:01:30] REQUEST recibido: Array
(
    [action] => mover_ejecutivo
    [id_eje] => 21
    [id_padre] => 20
)

[2025-07-23 20:01:30] ==============================================
[2025-07-23 20:01:30] MOVER EJECUTIVO - REQUEST RECIBIDO
[2025-07-23 20:01:30] POST data completo: Array
(
    [action] => mover_ejecutivo
    [id_eje] => 21
    [id_padre] => 20
)

[2025-07-23 20:01:30] Valores procesados:
[2025-07-23 20:01:30] - ID Ejecutivo: 21
[2025-07-23 20:01:30] - ID Padre: 20
[2025-07-23 20:01:30] - ID Plantel: NULL
[2025-07-23 20:01:30] ANTES - Ejecutivo: Rodrigo Ramirez, Padre anterior: 4, Plantel anterior: 
[2025-07-23 20:01:30] NUEVO PADRE: Samuel Ortigoza (ID: 20)
[2025-07-23 20:01:30] QUERY MOVER: UPDATE ejecutivo SET id_padre = '20', id_pla = NULL WHERE id_eje = '21'
[2025-07-23 20:01:30] VERIFICACIÓN - Nuevo padre: 20, Nuevo plantel: 
[2025-07-23 20:01:30] WebSocket movimiento enviado
[2025-07-23 20:01:30] EJECUTIVO MOVIDO EXITOSAMENTE
[2025-07-23 20:01:30] RESPUESTA ENVIADA: SUCCESS
[2025-07-23 20:01:30] ==============================================
[2025-07-23 20:01:35] REQUEST recibido: Array
(
    [action] => obtener_ejecutivos_con_citas
)

[2025-07-23 20:01:35] Query ejecutivos con citas: SELECT e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje,
					         p.nom_pla as plantel_principal,
					         COUNT(DISTINCT c.id_cit) as citas_propias,
					         GROUP_CONCAT(DISTINCT CONCAT(pa.id_pla, ':', pa.nom_pla) SEPARATOR '|') as planteles_asociados,
					         COUNT(DISTINCT pe.id_pla) as total_planteles_asociados,
					         CASE 
					             WHEN e.ult_eje IS NULL THEN 'sin_sesion'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) <= 1 THEN 'verde'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) BETWEEN 2 AND 3 THEN 'amarillo'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) >= 4 THEN 'rojo'
					             ELSE 'sin_sesion'
					         END as semaforo_sesion,
					         TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) as dias_desde_ultima_sesion
					  FROM ejecutivo e 
					  LEFT JOIN plantel p ON e.id_pla = p.id_pla 
					  LEFT JOIN cita c ON e.id_eje = c.id_eje2 AND c.eli_cit = 1 
					  LEFT JOIN planteles_ejecutivo pe ON e.id_eje = pe.id_eje
					  LEFT JOIN plantel pa ON pe.id_pla = pa.id_pla
					  GROUP BY e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje, p.nom_pla
					  ORDER BY e.eli_eje DESC, e.nom_eje ASC
[2025-07-23 20:01:35] Ejecutivo ID: 9 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 20:01:35] Ejecutivo ID: 16 - Citas propias: 6 - Citas hijos: 0 - Total: 6
[2025-07-23 20:01:35] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 20:01:35] Ejecutivo ID: 12 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:01:35] Ejecutivo ID: 15 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:01:35] Ejecutivo ID: 18 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:01:35] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 20:01:35] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 20:01:35] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 2 - Total: 6
[2025-07-23 20:01:35] Ejecutivo ID: 10 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 20:01:35] Ejecutivo ID: 2 - Citas propias: 6 - Citas hijos: 0 - Total: 6
[2025-07-23 20:01:35] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:01:35] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:01:35] Ejecutivo ID: 13 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:01:35] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:01:35] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:01:35] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 13 - Total: 18
[2025-07-23 20:01:35] Ejecutivo ID: 13 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:01:35] Ejecutivo ID: 1 - Citas propias: 0 - Citas hijos: 0 - Total: 0
[2025-07-23 20:01:35] Ejecutivos con citas encontrados: 15
[2025-07-23 20:04:18] REQUEST recibido: Array
(
    [action] => obtener_ejecutivos_con_citas
)

[2025-07-23 20:04:18] Query ejecutivos con citas: SELECT e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje,
					         p.nom_pla as plantel_principal,
					         COUNT(DISTINCT c.id_cit) as citas_propias,
					         GROUP_CONCAT(DISTINCT CONCAT(pa.id_pla, ':', pa.nom_pla) SEPARATOR '|') as planteles_asociados,
					         COUNT(DISTINCT pe.id_pla) as total_planteles_asociados,
					         CASE 
					             WHEN e.ult_eje IS NULL THEN 'sin_sesion'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) <= 1 THEN 'verde'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) BETWEEN 2 AND 3 THEN 'amarillo'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) >= 4 THEN 'rojo'
					             ELSE 'sin_sesion'
					         END as semaforo_sesion,
					         TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) as dias_desde_ultima_sesion
					  FROM ejecutivo e 
					  LEFT JOIN plantel p ON e.id_pla = p.id_pla 
					  LEFT JOIN cita c ON e.id_eje = c.id_eje2 AND c.eli_cit = 1 
					  LEFT JOIN planteles_ejecutivo pe ON e.id_eje = pe.id_eje
					  LEFT JOIN plantel pa ON pe.id_pla = pa.id_pla
					  GROUP BY e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje, p.nom_pla
					  ORDER BY e.eli_eje DESC, e.nom_eje ASC
[2025-07-23 20:04:18] Ejecutivo ID: 9 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 20:04:18] Ejecutivo ID: 16 - Citas propias: 6 - Citas hijos: 0 - Total: 6
[2025-07-23 20:04:18] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 20:04:18] Ejecutivo ID: 12 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:04:18] Ejecutivo ID: 15 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:04:18] Ejecutivo ID: 18 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:04:18] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 20:04:19] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 20:04:19] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 2 - Total: 6
[2025-07-23 20:04:19] Ejecutivo ID: 10 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 20:04:19] Ejecutivo ID: 2 - Citas propias: 6 - Citas hijos: 0 - Total: 6
[2025-07-23 20:04:19] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:04:19] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:04:19] Ejecutivo ID: 13 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:04:19] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:04:19] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:04:19] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 13 - Total: 18
[2025-07-23 20:04:19] Ejecutivo ID: 13 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:04:19] Ejecutivo ID: 1 - Citas propias: 0 - Citas hijos: 0 - Total: 0
[2025-07-23 20:04:19] Ejecutivos con citas encontrados: 15
[2025-07-23 20:04:37] REQUEST recibido: Array
(
    [action] => obtener_ejecutivos_con_citas
)

[2025-07-23 20:04:37] Query ejecutivos con citas: SELECT e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje,
					         p.nom_pla as plantel_principal,
					         COUNT(DISTINCT c.id_cit) as citas_propias,
					         GROUP_CONCAT(DISTINCT CONCAT(pa.id_pla, ':', pa.nom_pla) SEPARATOR '|') as planteles_asociados,
					         COUNT(DISTINCT pe.id_pla) as total_planteles_asociados,
					         CASE 
					             WHEN e.ult_eje IS NULL THEN 'sin_sesion'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) <= 1 THEN 'verde'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) BETWEEN 2 AND 3 THEN 'amarillo'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) >= 4 THEN 'rojo'
					             ELSE 'sin_sesion'
					         END as semaforo_sesion,
					         TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) as dias_desde_ultima_sesion
					  FROM ejecutivo e 
					  LEFT JOIN plantel p ON e.id_pla = p.id_pla 
					  LEFT JOIN cita c ON e.id_eje = c.id_eje2 AND c.eli_cit = 1 
					  LEFT JOIN planteles_ejecutivo pe ON e.id_eje = pe.id_eje
					  LEFT JOIN plantel pa ON pe.id_pla = pa.id_pla
					  GROUP BY e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje, p.nom_pla
					  ORDER BY e.eli_eje DESC, e.nom_eje ASC
[2025-07-23 20:04:37] Ejecutivo ID: 9 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 20:04:37] Ejecutivo ID: 16 - Citas propias: 6 - Citas hijos: 0 - Total: 6
[2025-07-23 20:04:37] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 20:04:37] Ejecutivo ID: 12 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:04:37] Ejecutivo ID: 15 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:04:37] Ejecutivo ID: 18 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:04:37] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 20:04:37] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 20:04:37] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 2 - Total: 6
[2025-07-23 20:04:37] Ejecutivo ID: 10 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 20:04:37] Ejecutivo ID: 2 - Citas propias: 6 - Citas hijos: 0 - Total: 6
[2025-07-23 20:04:37] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:04:37] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:04:37] Ejecutivo ID: 13 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:04:37] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:04:37] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:04:37] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 13 - Total: 18
[2025-07-23 20:04:37] Ejecutivo ID: 13 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:04:37] Ejecutivo ID: 1 - Citas propias: 0 - Citas hijos: 0 - Total: 0
[2025-07-23 20:04:37] Ejecutivos con citas encontrados: 15
[2025-07-23 20:04:46] REQUEST recibido: Array
(
    [action] => obtener_ejecutivos_con_citas
)

[2025-07-23 20:04:46] Query ejecutivos con citas: SELECT e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje,
					         p.nom_pla as plantel_principal,
					         COUNT(DISTINCT c.id_cit) as citas_propias,
					         GROUP_CONCAT(DISTINCT CONCAT(pa.id_pla, ':', pa.nom_pla) SEPARATOR '|') as planteles_asociados,
					         COUNT(DISTINCT pe.id_pla) as total_planteles_asociados,
					         CASE 
					             WHEN e.ult_eje IS NULL THEN 'sin_sesion'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) <= 1 THEN 'verde'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) BETWEEN 2 AND 3 THEN 'amarillo'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) >= 4 THEN 'rojo'
					             ELSE 'sin_sesion'
					         END as semaforo_sesion,
					         TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) as dias_desde_ultima_sesion
					  FROM ejecutivo e 
					  LEFT JOIN plantel p ON e.id_pla = p.id_pla 
					  LEFT JOIN cita c ON e.id_eje = c.id_eje2 AND c.eli_cit = 1 
					  LEFT JOIN planteles_ejecutivo pe ON e.id_eje = pe.id_eje
					  LEFT JOIN plantel pa ON pe.id_pla = pa.id_pla
					  GROUP BY e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje, p.nom_pla
					  ORDER BY e.eli_eje DESC, e.nom_eje ASC
[2025-07-23 20:04:46] Ejecutivo ID: 9 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 20:04:46] Ejecutivo ID: 16 - Citas propias: 6 - Citas hijos: 0 - Total: 6
[2025-07-23 20:04:46] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 20:04:46] Ejecutivo ID: 12 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:04:46] Ejecutivo ID: 15 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:04:46] Ejecutivo ID: 18 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:04:46] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 20:04:46] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 20:04:46] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 2 - Total: 6
[2025-07-23 20:04:46] Ejecutivo ID: 10 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 20:04:46] Ejecutivo ID: 2 - Citas propias: 6 - Citas hijos: 0 - Total: 6
[2025-07-23 20:04:46] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:04:46] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:04:46] Ejecutivo ID: 13 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:04:46] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:04:46] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:04:46] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 13 - Total: 18
[2025-07-23 20:04:46] Ejecutivo ID: 13 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:04:46] Ejecutivo ID: 1 - Citas propias: 0 - Citas hijos: 0 - Total: 0
[2025-07-23 20:04:46] Ejecutivos con citas encontrados: 15
[2025-07-23 20:04:48] REQUEST recibido: Array
(
    [action] => mover_ejecutivo
    [id_eje] => 6
    [id_padre] => 20
)

[2025-07-23 20:04:48] ==============================================
[2025-07-23 20:04:48] MOVER EJECUTIVO - REQUEST RECIBIDO
[2025-07-23 20:04:48] POST data completo: Array
(
    [action] => mover_ejecutivo
    [id_eje] => 6
    [id_padre] => 20
)

[2025-07-23 20:04:48] Valores procesados:
[2025-07-23 20:04:48] - ID Ejecutivo: 6
[2025-07-23 20:04:48] - ID Padre: 20
[2025-07-23 20:04:48] - ID Plantel: NULL
[2025-07-23 20:04:48] ANTES - Ejecutivo: Fatima Nava, Padre anterior: 4, Plantel anterior: 
[2025-07-23 20:04:48] NUEVO PADRE: Samuel Ortigoza (ID: 20)
[2025-07-23 20:04:48] QUERY MOVER: UPDATE ejecutivo SET id_padre = '20', id_pla = NULL WHERE id_eje = '6'
[2025-07-23 20:04:48] VERIFICACIÓN - Nuevo padre: 20, Nuevo plantel: 
[2025-07-23 20:04:48] WebSocket movimiento enviado
[2025-07-23 20:04:48] EJECUTIVO MOVIDO EXITOSAMENTE
[2025-07-23 20:04:48] RESPUESTA ENVIADA: SUCCESS
[2025-07-23 20:04:48] ==============================================
[2025-07-23 20:04:51] REQUEST recibido: Array
(
    [action] => mover_ejecutivo
    [id_eje] => 6
    [id_padre] => 4
)

[2025-07-23 20:04:51] ==============================================
[2025-07-23 20:04:51] MOVER EJECUTIVO - REQUEST RECIBIDO
[2025-07-23 20:04:51] POST data completo: Array
(
    [action] => mover_ejecutivo
    [id_eje] => 6
    [id_padre] => 4
)

[2025-07-23 20:04:51] Valores procesados:
[2025-07-23 20:04:51] - ID Ejecutivo: 6
[2025-07-23 20:04:51] - ID Padre: 4
[2025-07-23 20:04:51] - ID Plantel: NULL
[2025-07-23 20:04:51] ANTES - Ejecutivo: Fatima Nava, Padre anterior: 20, Plantel anterior: 
[2025-07-23 20:04:51] NUEVO PADRE: Francisco Pineda (ID: 4)
[2025-07-23 20:04:51] QUERY MOVER: UPDATE ejecutivo SET id_padre = '4', id_pla = NULL WHERE id_eje = '6'
[2025-07-23 20:04:51] VERIFICACIÓN - Nuevo padre: 4, Nuevo plantel: 
[2025-07-23 20:04:51] WebSocket movimiento enviado
[2025-07-23 20:04:51] EJECUTIVO MOVIDO EXITOSAMENTE
[2025-07-23 20:04:51] RESPUESTA ENVIADA: SUCCESS
[2025-07-23 20:04:51] ==============================================
[2025-07-23 20:04:54] REQUEST recibido: Array
(
    [action] => mover_ejecutivo
    [id_eje] => 6
    [id_padre] => 
)

[2025-07-23 20:04:54] ==============================================
[2025-07-23 20:04:54] MOVER EJECUTIVO - REQUEST RECIBIDO
[2025-07-23 20:04:54] POST data completo: Array
(
    [action] => mover_ejecutivo
    [id_eje] => 6
    [id_padre] => 
)

[2025-07-23 20:04:54] Valores procesados:
[2025-07-23 20:04:54] - ID Ejecutivo: 6
[2025-07-23 20:04:54] - ID Padre: NULL
[2025-07-23 20:04:54] - ID Plantel: NULL
[2025-07-23 20:04:54] ANTES - Ejecutivo: Fatima Nava, Padre anterior: 4, Plantel anterior: 
[2025-07-23 20:04:54] QUERY MOVER: UPDATE ejecutivo SET id_padre = NULL, id_pla = NULL WHERE id_eje = '6'
[2025-07-23 20:04:54] VERIFICACIÓN - Nuevo padre: , Nuevo plantel: 
[2025-07-23 20:04:54] WebSocket movimiento enviado
[2025-07-23 20:04:54] EJECUTIVO MOVIDO EXITOSAMENTE
[2025-07-23 20:04:54] RESPUESTA ENVIADA: SUCCESS
[2025-07-23 20:04:54] ==============================================
[2025-07-23 20:05:02] REQUEST recibido: Array
(
    [action] => mover_ejecutivo
    [id_eje] => 6
    [id_padre] => 20
)

[2025-07-23 20:05:02] ==============================================
[2025-07-23 20:05:02] MOVER EJECUTIVO - REQUEST RECIBIDO
[2025-07-23 20:05:02] POST data completo: Array
(
    [action] => mover_ejecutivo
    [id_eje] => 6
    [id_padre] => 20
)

[2025-07-23 20:05:02] Valores procesados:
[2025-07-23 20:05:02] - ID Ejecutivo: 6
[2025-07-23 20:05:02] - ID Padre: 20
[2025-07-23 20:05:02] - ID Plantel: NULL
[2025-07-23 20:05:02] ANTES - Ejecutivo: Fatima Nava, Padre anterior: , Plantel anterior: 
[2025-07-23 20:05:02] NUEVO PADRE: Samuel Ortigoza (ID: 20)
[2025-07-23 20:05:02] QUERY MOVER: UPDATE ejecutivo SET id_padre = '20', id_pla = NULL WHERE id_eje = '6'
[2025-07-23 20:05:02] VERIFICACIÓN - Nuevo padre: 20, Nuevo plantel: 
[2025-07-23 20:05:02] WebSocket movimiento enviado
[2025-07-23 20:05:02] EJECUTIVO MOVIDO EXITOSAMENTE
[2025-07-23 20:05:02] RESPUESTA ENVIADA: SUCCESS
[2025-07-23 20:05:02] ==============================================
[2025-07-23 20:05:07] REQUEST recibido: Array
(
    [action] => mover_ejecutivo
    [id_eje] => 6
    [id_padre] => 4
)

[2025-07-23 20:05:07] ==============================================
[2025-07-23 20:05:07] MOVER EJECUTIVO - REQUEST RECIBIDO
[2025-07-23 20:05:07] POST data completo: Array
(
    [action] => mover_ejecutivo
    [id_eje] => 6
    [id_padre] => 4
)

[2025-07-23 20:05:07] Valores procesados:
[2025-07-23 20:05:07] - ID Ejecutivo: 6
[2025-07-23 20:05:07] - ID Padre: 4
[2025-07-23 20:05:07] - ID Plantel: NULL
[2025-07-23 20:05:07] ANTES - Ejecutivo: Fatima Nava, Padre anterior: 20, Plantel anterior: 
[2025-07-23 20:05:07] NUEVO PADRE: Francisco Pineda (ID: 4)
[2025-07-23 20:05:07] QUERY MOVER: UPDATE ejecutivo SET id_padre = '4', id_pla = NULL WHERE id_eje = '6'
[2025-07-23 20:05:07] VERIFICACIÓN - Nuevo padre: 4, Nuevo plantel: 
[2025-07-23 20:05:07] WebSocket movimiento enviado
[2025-07-23 20:05:07] EJECUTIVO MOVIDO EXITOSAMENTE
[2025-07-23 20:05:07] RESPUESTA ENVIADA: SUCCESS
[2025-07-23 20:05:07] ==============================================
[2025-07-23 20:05:13] REQUEST recibido: Array
(
    [action] => mover_ejecutivo
    [id_eje] => 14
    [id_padre] => 
)

[2025-07-23 20:05:13] ==============================================
[2025-07-23 20:05:13] MOVER EJECUTIVO - REQUEST RECIBIDO
[2025-07-23 20:05:13] POST data completo: Array
(
    [action] => mover_ejecutivo
    [id_eje] => 14
    [id_padre] => 
)

[2025-07-23 20:05:13] Valores procesados:
[2025-07-23 20:05:13] - ID Ejecutivo: 14
[2025-07-23 20:05:13] - ID Padre: NULL
[2025-07-23 20:05:13] - ID Plantel: NULL
[2025-07-23 20:05:13] ANTES - Ejecutivo: Pablo Jimenez, Padre anterior: 20, Plantel anterior: 
[2025-07-23 20:05:13] QUERY MOVER: UPDATE ejecutivo SET id_padre = NULL, id_pla = NULL WHERE id_eje = '14'
[2025-07-23 20:05:13] VERIFICACIÓN - Nuevo padre: , Nuevo plantel: 
[2025-07-23 20:05:13] WebSocket movimiento enviado
[2025-07-23 20:05:13] EJECUTIVO MOVIDO EXITOSAMENTE
[2025-07-23 20:05:13] RESPUESTA ENVIADA: SUCCESS
[2025-07-23 20:05:13] ==============================================
[2025-07-23 20:05:16] REQUEST recibido: Array
(
    [action] => mover_ejecutivo
    [id_eje] => 14
    [id_padre] => 2
)

[2025-07-23 20:05:16] ==============================================
[2025-07-23 20:05:16] MOVER EJECUTIVO - REQUEST RECIBIDO
[2025-07-23 20:05:16] POST data completo: Array
(
    [action] => mover_ejecutivo
    [id_eje] => 14
    [id_padre] => 2
)

[2025-07-23 20:05:16] Valores procesados:
[2025-07-23 20:05:16] - ID Ejecutivo: 14
[2025-07-23 20:05:16] - ID Padre: 2
[2025-07-23 20:05:16] - ID Plantel: NULL
[2025-07-23 20:05:16] ANTES - Ejecutivo: Pablo Jimenez, Padre anterior: , Plantel anterior: 
[2025-07-23 20:05:16] NUEVO PADRE: María Fernanda López (ID: 2)
[2025-07-23 20:05:16] QUERY MOVER: UPDATE ejecutivo SET id_padre = '2', id_pla = NULL WHERE id_eje = '14'
[2025-07-23 20:05:16] VERIFICACIÓN - Nuevo padre: 2, Nuevo plantel: 
[2025-07-23 20:05:16] WebSocket movimiento enviado
[2025-07-23 20:05:16] EJECUTIVO MOVIDO EXITOSAMENTE
[2025-07-23 20:05:16] RESPUESTA ENVIADA: SUCCESS
[2025-07-23 20:05:16] ==============================================
[2025-07-23 20:05:21] REQUEST recibido: Array
(
    [action] => mover_ejecutivo
    [id_eje] => 13
    [id_padre] => 
)

[2025-07-23 20:05:21] ==============================================
[2025-07-23 20:05:21] MOVER EJECUTIVO - REQUEST RECIBIDO
[2025-07-23 20:05:21] POST data completo: Array
(
    [action] => mover_ejecutivo
    [id_eje] => 13
    [id_padre] => 
)

[2025-07-23 20:05:21] Valores procesados:
[2025-07-23 20:05:21] - ID Ejecutivo: 13
[2025-07-23 20:05:21] - ID Padre: NULL
[2025-07-23 20:05:21] - ID Plantel: NULL
[2025-07-23 20:05:21] ANTES - Ejecutivo: Sofia Mendoza, Padre anterior: 20, Plantel anterior: 
[2025-07-23 20:05:21] QUERY MOVER: UPDATE ejecutivo SET id_padre = NULL, id_pla = NULL WHERE id_eje = '13'
[2025-07-23 20:05:21] VERIFICACIÓN - Nuevo padre: , Nuevo plantel: 
[2025-07-23 20:05:21] WebSocket movimiento enviado
[2025-07-23 20:05:21] EJECUTIVO MOVIDO EXITOSAMENTE
[2025-07-23 20:05:21] RESPUESTA ENVIADA: SUCCESS
[2025-07-23 20:05:21] ==============================================
[2025-07-23 20:05:23] REQUEST recibido: Array
(
    [action] => obtener_ejecutivos_con_citas
)

[2025-07-23 20:05:23] Query ejecutivos con citas: SELECT e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje,
					         p.nom_pla as plantel_principal,
					         COUNT(DISTINCT c.id_cit) as citas_propias,
					         GROUP_CONCAT(DISTINCT CONCAT(pa.id_pla, ':', pa.nom_pla) SEPARATOR '|') as planteles_asociados,
					         COUNT(DISTINCT pe.id_pla) as total_planteles_asociados,
					         CASE 
					             WHEN e.ult_eje IS NULL THEN 'sin_sesion'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) <= 1 THEN 'verde'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) BETWEEN 2 AND 3 THEN 'amarillo'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) >= 4 THEN 'rojo'
					             ELSE 'sin_sesion'
					         END as semaforo_sesion,
					         TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) as dias_desde_ultima_sesion
					  FROM ejecutivo e 
					  LEFT JOIN plantel p ON e.id_pla = p.id_pla 
					  LEFT JOIN cita c ON e.id_eje = c.id_eje2 AND c.eli_cit = 1 
					  LEFT JOIN planteles_ejecutivo pe ON e.id_eje = pe.id_eje
					  LEFT JOIN plantel pa ON pe.id_pla = pa.id_pla
					  GROUP BY e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje, p.nom_pla
					  ORDER BY e.eli_eje DESC, e.nom_eje ASC
[2025-07-23 20:05:23] Ejecutivo ID: 9 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 20:05:23] Ejecutivo ID: 16 - Citas propias: 6 - Citas hijos: 0 - Total: 6
[2025-07-23 20:05:23] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 20:05:23] Ejecutivo ID: 12 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:05:23] Ejecutivo ID: 15 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:05:23] Ejecutivo ID: 18 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:05:23] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 20:05:23] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 20:05:23] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 2 - Total: 6
[2025-07-23 20:05:23] Ejecutivo ID: 10 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 20:05:23] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:05:23] Ejecutivo ID: 2 - Citas propias: 6 - Citas hijos: 4 - Total: 10
[2025-07-23 20:05:23] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:05:23] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:05:23] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:05:23] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 5 - Total: 10
[2025-07-23 20:05:23] Ejecutivo ID: 13 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:05:23] Ejecutivo ID: 1 - Citas propias: 0 - Citas hijos: 0 - Total: 0
[2025-07-23 20:05:23] Ejecutivos con citas encontrados: 15
[2025-07-23 20:05:30] REQUEST recibido: Array
(
    [action] => mover_ejecutivo
    [id_eje] => 21
    [id_padre] => 
)

[2025-07-23 20:05:30] ==============================================
[2025-07-23 20:05:30] MOVER EJECUTIVO - REQUEST RECIBIDO
[2025-07-23 20:05:30] POST data completo: Array
(
    [action] => mover_ejecutivo
    [id_eje] => 21
    [id_padre] => 
)

[2025-07-23 20:05:30] Valores procesados:
[2025-07-23 20:05:30] - ID Ejecutivo: 21
[2025-07-23 20:05:30] - ID Padre: NULL
[2025-07-23 20:05:30] - ID Plantel: NULL
[2025-07-23 20:05:30] ANTES - Ejecutivo: Rodrigo Ramirez, Padre anterior: 20, Plantel anterior: 
[2025-07-23 20:05:30] QUERY MOVER: UPDATE ejecutivo SET id_padre = NULL, id_pla = NULL WHERE id_eje = '21'
[2025-07-23 20:05:30] VERIFICACIÓN - Nuevo padre: , Nuevo plantel: 
[2025-07-23 20:05:30] WebSocket movimiento enviado
[2025-07-23 20:05:30] EJECUTIVO MOVIDO EXITOSAMENTE
[2025-07-23 20:05:30] RESPUESTA ENVIADA: SUCCESS
[2025-07-23 20:05:30] ==============================================
[2025-07-23 20:05:36] REQUEST recibido: Array
(
    [action] => obtener_ejecutivos_con_citas
)

[2025-07-23 20:05:36] Query ejecutivos con citas: SELECT e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje,
					         p.nom_pla as plantel_principal,
					         COUNT(DISTINCT c.id_cit) as citas_propias,
					         GROUP_CONCAT(DISTINCT CONCAT(pa.id_pla, ':', pa.nom_pla) SEPARATOR '|') as planteles_asociados,
					         COUNT(DISTINCT pe.id_pla) as total_planteles_asociados,
					         CASE 
					             WHEN e.ult_eje IS NULL THEN 'sin_sesion'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) <= 1 THEN 'verde'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) BETWEEN 2 AND 3 THEN 'amarillo'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) >= 4 THEN 'rojo'
					             ELSE 'sin_sesion'
					         END as semaforo_sesion,
					         TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) as dias_desde_ultima_sesion
					  FROM ejecutivo e 
					  LEFT JOIN plantel p ON e.id_pla = p.id_pla 
					  LEFT JOIN cita c ON e.id_eje = c.id_eje2 AND c.eli_cit = 1 
					  LEFT JOIN planteles_ejecutivo pe ON e.id_eje = pe.id_eje
					  LEFT JOIN plantel pa ON pe.id_pla = pa.id_pla
					  GROUP BY e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje, p.nom_pla
					  ORDER BY e.eli_eje DESC, e.nom_eje ASC
[2025-07-23 20:05:36] Ejecutivo ID: 9 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 20:05:36] Ejecutivo ID: 16 - Citas propias: 6 - Citas hijos: 0 - Total: 6
[2025-07-23 20:05:36] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 20:05:36] Ejecutivo ID: 12 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:05:36] Ejecutivo ID: 15 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:05:36] Ejecutivo ID: 18 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:05:36] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 20:05:36] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 20:05:36] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 2 - Total: 6
[2025-07-23 20:05:36] Ejecutivo ID: 10 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 20:05:36] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:05:36] Ejecutivo ID: 2 - Citas propias: 6 - Citas hijos: 4 - Total: 10
[2025-07-23 20:05:36] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:05:36] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:05:36] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:05:36] Ejecutivo ID: 13 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:05:36] Ejecutivo ID: 1 - Citas propias: 0 - Citas hijos: 0 - Total: 0
[2025-07-23 20:05:36] Ejecutivos con citas encontrados: 15
[2025-07-23 20:05:44] REQUEST recibido: Array
(
    [action] => mover_ejecutivo
    [id_eje] => 6
    [id_padre] => 
)

[2025-07-23 20:05:44] ==============================================
[2025-07-23 20:05:44] MOVER EJECUTIVO - REQUEST RECIBIDO
[2025-07-23 20:05:44] POST data completo: Array
(
    [action] => mover_ejecutivo
    [id_eje] => 6
    [id_padre] => 
)

[2025-07-23 20:05:44] Valores procesados:
[2025-07-23 20:05:44] - ID Ejecutivo: 6
[2025-07-23 20:05:44] - ID Padre: NULL
[2025-07-23 20:05:44] - ID Plantel: NULL
[2025-07-23 20:05:44] ANTES - Ejecutivo: Fatima Nava, Padre anterior: 4, Plantel anterior: 
[2025-07-23 20:05:44] QUERY MOVER: UPDATE ejecutivo SET id_padre = NULL, id_pla = NULL WHERE id_eje = '6'
[2025-07-23 20:05:44] VERIFICACIÓN - Nuevo padre: , Nuevo plantel: 
[2025-07-23 20:05:44] WebSocket movimiento enviado
[2025-07-23 20:05:44] EJECUTIVO MOVIDO EXITOSAMENTE
[2025-07-23 20:05:44] RESPUESTA ENVIADA: SUCCESS
[2025-07-23 20:05:44] ==============================================
[2025-07-23 20:05:47] REQUEST recibido: Array
(
    [action] => mover_ejecutivo
    [id_eje] => 6
    [id_padre] => 4
)

[2025-07-23 20:05:47] ==============================================
[2025-07-23 20:05:47] MOVER EJECUTIVO - REQUEST RECIBIDO
[2025-07-23 20:05:47] POST data completo: Array
(
    [action] => mover_ejecutivo
    [id_eje] => 6
    [id_padre] => 4
)

[2025-07-23 20:05:47] Valores procesados:
[2025-07-23 20:05:47] - ID Ejecutivo: 6
[2025-07-23 20:05:47] - ID Padre: 4
[2025-07-23 20:05:47] - ID Plantel: NULL
[2025-07-23 20:05:47] ANTES - Ejecutivo: Fatima Nava, Padre anterior: , Plantel anterior: 
[2025-07-23 20:05:47] NUEVO PADRE: Francisco Pineda (ID: 4)
[2025-07-23 20:05:47] QUERY MOVER: UPDATE ejecutivo SET id_padre = '4', id_pla = NULL WHERE id_eje = '6'
[2025-07-23 20:05:47] VERIFICACIÓN - Nuevo padre: 4, Nuevo plantel: 
[2025-07-23 20:05:47] WebSocket movimiento enviado
[2025-07-23 20:05:47] EJECUTIVO MOVIDO EXITOSAMENTE
[2025-07-23 20:05:47] RESPUESTA ENVIADA: SUCCESS
[2025-07-23 20:05:47] ==============================================
[2025-07-23 20:08:01] REQUEST recibido: Array
(
    [action] => obtener_ejecutivos_con_citas
)

[2025-07-23 20:08:01] Query ejecutivos con citas: SELECT e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje,
					         p.nom_pla as plantel_principal,
					         COUNT(DISTINCT c.id_cit) as citas_propias,
					         GROUP_CONCAT(DISTINCT CONCAT(pa.id_pla, ':', pa.nom_pla) SEPARATOR '|') as planteles_asociados,
					         COUNT(DISTINCT pe.id_pla) as total_planteles_asociados,
					         CASE 
					             WHEN e.ult_eje IS NULL THEN 'sin_sesion'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) <= 1 THEN 'verde'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) BETWEEN 2 AND 3 THEN 'amarillo'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) >= 4 THEN 'rojo'
					             ELSE 'sin_sesion'
					         END as semaforo_sesion,
					         TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) as dias_desde_ultima_sesion
					  FROM ejecutivo e 
					  LEFT JOIN plantel p ON e.id_pla = p.id_pla 
					  LEFT JOIN cita c ON e.id_eje = c.id_eje2 AND c.eli_cit = 1 
					  LEFT JOIN planteles_ejecutivo pe ON e.id_eje = pe.id_eje
					  LEFT JOIN plantel pa ON pe.id_pla = pa.id_pla
					  GROUP BY e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje, p.nom_pla
					  ORDER BY e.eli_eje DESC, e.nom_eje ASC
[2025-07-23 20:08:01] Ejecutivo ID: 9 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 20:08:01] Ejecutivo ID: 16 - Citas propias: 6 - Citas hijos: 0 - Total: 6
[2025-07-23 20:08:01] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 20:08:01] Ejecutivo ID: 12 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:08:01] Ejecutivo ID: 15 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:08:01] Ejecutivo ID: 18 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:08:01] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 20:08:01] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 20:08:01] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 2 - Total: 6
[2025-07-23 20:08:01] Ejecutivo ID: 10 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 20:08:01] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:08:01] Ejecutivo ID: 2 - Citas propias: 6 - Citas hijos: 4 - Total: 10
[2025-07-23 20:08:01] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:08:01] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:08:01] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:08:01] Ejecutivo ID: 13 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:08:01] Ejecutivo ID: 1 - Citas propias: 0 - Citas hijos: 0 - Total: 0
[2025-07-23 20:08:01] Ejecutivos con citas encontrados: 15
[2025-07-23 20:08:18] REQUEST recibido: Array
(
    [action] => obtener_ejecutivos_con_citas
)

[2025-07-23 20:08:18] Query ejecutivos con citas: SELECT e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje,
					         p.nom_pla as plantel_principal,
					         COUNT(DISTINCT c.id_cit) as citas_propias,
					         GROUP_CONCAT(DISTINCT CONCAT(pa.id_pla, ':', pa.nom_pla) SEPARATOR '|') as planteles_asociados,
					         COUNT(DISTINCT pe.id_pla) as total_planteles_asociados,
					         CASE 
					             WHEN e.ult_eje IS NULL THEN 'sin_sesion'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) <= 1 THEN 'verde'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) BETWEEN 2 AND 3 THEN 'amarillo'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) >= 4 THEN 'rojo'
					             ELSE 'sin_sesion'
					         END as semaforo_sesion,
					         TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) as dias_desde_ultima_sesion
					  FROM ejecutivo e 
					  LEFT JOIN plantel p ON e.id_pla = p.id_pla 
					  LEFT JOIN cita c ON e.id_eje = c.id_eje2 AND c.eli_cit = 1 
					  LEFT JOIN planteles_ejecutivo pe ON e.id_eje = pe.id_eje
					  LEFT JOIN plantel pa ON pe.id_pla = pa.id_pla
					  GROUP BY e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje, p.nom_pla
					  ORDER BY e.eli_eje DESC, e.nom_eje ASC
[2025-07-23 20:08:18] Ejecutivo ID: 9 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 20:08:18] Ejecutivo ID: 16 - Citas propias: 6 - Citas hijos: 0 - Total: 6
[2025-07-23 20:08:18] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 20:08:18] Ejecutivo ID: 12 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:08:18] Ejecutivo ID: 15 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:08:18] Ejecutivo ID: 18 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:08:18] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 20:08:18] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 20:08:18] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 2 - Total: 6
[2025-07-23 20:08:18] Ejecutivo ID: 10 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 20:08:18] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:08:18] Ejecutivo ID: 2 - Citas propias: 6 - Citas hijos: 4 - Total: 10
[2025-07-23 20:08:18] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:08:18] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:08:18] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:08:18] Ejecutivo ID: 13 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:08:18] Ejecutivo ID: 1 - Citas propias: 0 - Citas hijos: 0 - Total: 0
[2025-07-23 20:08:18] Ejecutivos con citas encontrados: 15
[2025-07-23 20:08:23] REQUEST recibido: Array
(
    [action] => mover_ejecutivo
    [id_eje] => 6
    [id_padre] => 
)

[2025-07-23 20:08:23] ==============================================
[2025-07-23 20:08:23] MOVER EJECUTIVO - REQUEST RECIBIDO
[2025-07-23 20:08:23] POST data completo: Array
(
    [action] => mover_ejecutivo
    [id_eje] => 6
    [id_padre] => 
)

[2025-07-23 20:08:23] Valores procesados:
[2025-07-23 20:08:23] - ID Ejecutivo: 6
[2025-07-23 20:08:23] - ID Padre: NULL
[2025-07-23 20:08:23] - ID Plantel: NULL
[2025-07-23 20:08:23] ANTES - Ejecutivo: Fatima Nava, Padre anterior: 4, Plantel anterior: 
[2025-07-23 20:08:23] QUERY MOVER: UPDATE ejecutivo SET id_padre = NULL, id_pla = NULL WHERE id_eje = '6'
[2025-07-23 20:08:23] VERIFICACIÓN - Nuevo padre: , Nuevo plantel: 
[2025-07-23 20:08:23] WebSocket movimiento enviado
[2025-07-23 20:08:23] EJECUTIVO MOVIDO EXITOSAMENTE
[2025-07-23 20:08:23] RESPUESTA ENVIADA: SUCCESS
[2025-07-23 20:08:23] ==============================================
[2025-07-23 20:08:25] REQUEST recibido: Array
(
    [action] => mover_ejecutivo
    [id_eje] => 6
    [id_padre] => 4
)

[2025-07-23 20:08:25] ==============================================
[2025-07-23 20:08:25] MOVER EJECUTIVO - REQUEST RECIBIDO
[2025-07-23 20:08:25] POST data completo: Array
(
    [action] => mover_ejecutivo
    [id_eje] => 6
    [id_padre] => 4
)

[2025-07-23 20:08:25] Valores procesados:
[2025-07-23 20:08:25] - ID Ejecutivo: 6
[2025-07-23 20:08:25] - ID Padre: 4
[2025-07-23 20:08:25] - ID Plantel: NULL
[2025-07-23 20:08:25] ANTES - Ejecutivo: Fatima Nava, Padre anterior: , Plantel anterior: 
[2025-07-23 20:08:25] NUEVO PADRE: Francisco Pineda (ID: 4)
[2025-07-23 20:08:25] QUERY MOVER: UPDATE ejecutivo SET id_padre = '4', id_pla = NULL WHERE id_eje = '6'
[2025-07-23 20:08:25] VERIFICACIÓN - Nuevo padre: 4, Nuevo plantel: 
[2025-07-23 20:08:25] WebSocket movimiento enviado
[2025-07-23 20:08:25] EJECUTIVO MOVIDO EXITOSAMENTE
[2025-07-23 20:08:25] RESPUESTA ENVIADA: SUCCESS
[2025-07-23 20:08:25] ==============================================
[2025-07-23 20:08:36] REQUEST recibido: Array
(
    [action] => mover_ejecutivo
    [id_eje] => 6
    [id_padre] => 
)

[2025-07-23 20:08:36] ==============================================
[2025-07-23 20:08:36] MOVER EJECUTIVO - REQUEST RECIBIDO
[2025-07-23 20:08:36] POST data completo: Array
(
    [action] => mover_ejecutivo
    [id_eje] => 6
    [id_padre] => 
)

[2025-07-23 20:08:36] Valores procesados:
[2025-07-23 20:08:36] - ID Ejecutivo: 6
[2025-07-23 20:08:36] - ID Padre: NULL
[2025-07-23 20:08:36] - ID Plantel: NULL
[2025-07-23 20:08:36] ANTES - Ejecutivo: Fatima Nava, Padre anterior: 4, Plantel anterior: 
[2025-07-23 20:08:36] QUERY MOVER: UPDATE ejecutivo SET id_padre = NULL, id_pla = NULL WHERE id_eje = '6'
[2025-07-23 20:08:36] VERIFICACIÓN - Nuevo padre: , Nuevo plantel: 
[2025-07-23 20:08:36] WebSocket movimiento enviado
[2025-07-23 20:08:36] EJECUTIVO MOVIDO EXITOSAMENTE
[2025-07-23 20:08:36] RESPUESTA ENVIADA: SUCCESS
[2025-07-23 20:08:36] ==============================================
[2025-07-23 20:08:42] REQUEST recibido: Array
(
    [action] => obtener_ejecutivos_con_citas
)

[2025-07-23 20:08:42] Query ejecutivos con citas: SELECT e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje,
					         p.nom_pla as plantel_principal,
					         COUNT(DISTINCT c.id_cit) as citas_propias,
					         GROUP_CONCAT(DISTINCT CONCAT(pa.id_pla, ':', pa.nom_pla) SEPARATOR '|') as planteles_asociados,
					         COUNT(DISTINCT pe.id_pla) as total_planteles_asociados,
					         CASE 
					             WHEN e.ult_eje IS NULL THEN 'sin_sesion'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) <= 1 THEN 'verde'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) BETWEEN 2 AND 3 THEN 'amarillo'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) >= 4 THEN 'rojo'
					             ELSE 'sin_sesion'
					         END as semaforo_sesion,
					         TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) as dias_desde_ultima_sesion
					  FROM ejecutivo e 
					  LEFT JOIN plantel p ON e.id_pla = p.id_pla 
					  LEFT JOIN cita c ON e.id_eje = c.id_eje2 AND c.eli_cit = 1 
					  LEFT JOIN planteles_ejecutivo pe ON e.id_eje = pe.id_eje
					  LEFT JOIN plantel pa ON pe.id_pla = pa.id_pla
					  GROUP BY e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje, p.nom_pla
					  ORDER BY e.eli_eje DESC, e.nom_eje ASC
[2025-07-23 20:08:42] Ejecutivo ID: 9 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 20:08:42] Ejecutivo ID: 16 - Citas propias: 6 - Citas hijos: 0 - Total: 6
[2025-07-23 20:08:42] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 20:08:42] Ejecutivo ID: 12 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:08:42] Ejecutivo ID: 15 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:08:42] Ejecutivo ID: 18 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:08:42] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 20:08:42] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:08:42] Ejecutivo ID: 10 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 20:08:42] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:08:42] Ejecutivo ID: 2 - Citas propias: 6 - Citas hijos: 4 - Total: 10
[2025-07-23 20:08:42] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:08:42] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:08:42] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:08:42] Ejecutivo ID: 13 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:08:42] Ejecutivo ID: 1 - Citas propias: 0 - Citas hijos: 0 - Total: 0
[2025-07-23 20:08:42] Ejecutivos con citas encontrados: 15
[2025-07-23 20:08:52] REQUEST recibido: Array
(
    [action] => obtener_ejecutivos_con_citas
)

[2025-07-23 20:08:52] Query ejecutivos con citas: SELECT e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje,
					         p.nom_pla as plantel_principal,
					         COUNT(DISTINCT c.id_cit) as citas_propias,
					         GROUP_CONCAT(DISTINCT CONCAT(pa.id_pla, ':', pa.nom_pla) SEPARATOR '|') as planteles_asociados,
					         COUNT(DISTINCT pe.id_pla) as total_planteles_asociados,
					         CASE 
					             WHEN e.ult_eje IS NULL THEN 'sin_sesion'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) <= 1 THEN 'verde'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) BETWEEN 2 AND 3 THEN 'amarillo'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) >= 4 THEN 'rojo'
					             ELSE 'sin_sesion'
					         END as semaforo_sesion,
					         TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) as dias_desde_ultima_sesion
					  FROM ejecutivo e 
					  LEFT JOIN plantel p ON e.id_pla = p.id_pla 
					  LEFT JOIN cita c ON e.id_eje = c.id_eje2 AND c.eli_cit = 1 
					  LEFT JOIN planteles_ejecutivo pe ON e.id_eje = pe.id_eje
					  LEFT JOIN plantel pa ON pe.id_pla = pa.id_pla
					  GROUP BY e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje, p.nom_pla
					  ORDER BY e.eli_eje DESC, e.nom_eje ASC
[2025-07-23 20:08:52] Ejecutivo ID: 9 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 20:08:52] Ejecutivo ID: 16 - Citas propias: 6 - Citas hijos: 0 - Total: 6
[2025-07-23 20:08:52] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 20:08:52] Ejecutivo ID: 12 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:08:52] Ejecutivo ID: 15 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:08:52] Ejecutivo ID: 18 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:08:52] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 20:08:52] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:08:52] Ejecutivo ID: 10 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 20:08:52] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:08:52] Ejecutivo ID: 2 - Citas propias: 6 - Citas hijos: 4 - Total: 10
[2025-07-23 20:08:52] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:08:52] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:08:52] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:08:52] Ejecutivo ID: 13 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:08:52] Ejecutivo ID: 1 - Citas propias: 0 - Citas hijos: 0 - Total: 0
[2025-07-23 20:08:52] Ejecutivos con citas encontrados: 15
[2025-07-23 20:09:10] REQUEST recibido: Array
(
    [action] => actualizar_ejecutivo
    [nom_eje] => Luis Rodriguez
    [tel_eje] => 555-2002
    [eli_eje] => 1
    [id_eje] => 10
)

[2025-07-23 20:09:12] REQUEST recibido: Array
(
    [action] => obtener_ejecutivos_con_citas
)

[2025-07-23 20:09:12] Query ejecutivos con citas: SELECT e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje,
					         p.nom_pla as plantel_principal,
					         COUNT(DISTINCT c.id_cit) as citas_propias,
					         GROUP_CONCAT(DISTINCT CONCAT(pa.id_pla, ':', pa.nom_pla) SEPARATOR '|') as planteles_asociados,
					         COUNT(DISTINCT pe.id_pla) as total_planteles_asociados,
					         CASE 
					             WHEN e.ult_eje IS NULL THEN 'sin_sesion'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) <= 1 THEN 'verde'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) BETWEEN 2 AND 3 THEN 'amarillo'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) >= 4 THEN 'rojo'
					             ELSE 'sin_sesion'
					         END as semaforo_sesion,
					         TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) as dias_desde_ultima_sesion
					  FROM ejecutivo e 
					  LEFT JOIN plantel p ON e.id_pla = p.id_pla 
					  LEFT JOIN cita c ON e.id_eje = c.id_eje2 AND c.eli_cit = 1 
					  LEFT JOIN planteles_ejecutivo pe ON e.id_eje = pe.id_eje
					  LEFT JOIN plantel pa ON pe.id_pla = pa.id_pla
					  GROUP BY e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje, p.nom_pla
					  ORDER BY e.eli_eje DESC, e.nom_eje ASC
[2025-07-23 20:09:12] Ejecutivo ID: 9 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 20:09:12] Ejecutivo ID: 16 - Citas propias: 6 - Citas hijos: 0 - Total: 6
[2025-07-23 20:09:12] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 20:09:12] Ejecutivo ID: 12 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:09:12] Ejecutivo ID: 15 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:09:12] Ejecutivo ID: 18 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:09:12] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 20:09:12] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:09:12] Ejecutivo ID: 10 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 20:09:12] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:09:12] Ejecutivo ID: 2 - Citas propias: 6 - Citas hijos: 4 - Total: 10
[2025-07-23 20:09:12] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:09:12] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:09:12] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:09:12] Ejecutivo ID: 13 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:09:12] Ejecutivo ID: 1 - Citas propias: 0 - Citas hijos: 0 - Total: 0
[2025-07-23 20:09:12] Ejecutivos con citas encontrados: 15
[2025-07-23 20:09:19] REQUEST recibido: Array
(
    [action] => actualizar_ejecutivo
    [nom_eje] => Luis Rodriguez
    [tel_eje] => 555-2002
    [eli_eje] => 1
    [id_eje] => 10
)

[2025-07-23 20:09:20] REQUEST recibido: Array
(
    [action] => obtener_ejecutivos_con_citas
)

[2025-07-23 20:09:20] Query ejecutivos con citas: SELECT e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje,
					         p.nom_pla as plantel_principal,
					         COUNT(DISTINCT c.id_cit) as citas_propias,
					         GROUP_CONCAT(DISTINCT CONCAT(pa.id_pla, ':', pa.nom_pla) SEPARATOR '|') as planteles_asociados,
					         COUNT(DISTINCT pe.id_pla) as total_planteles_asociados,
					         CASE 
					             WHEN e.ult_eje IS NULL THEN 'sin_sesion'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) <= 1 THEN 'verde'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) BETWEEN 2 AND 3 THEN 'amarillo'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) >= 4 THEN 'rojo'
					             ELSE 'sin_sesion'
					         END as semaforo_sesion,
					         TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) as dias_desde_ultima_sesion
					  FROM ejecutivo e 
					  LEFT JOIN plantel p ON e.id_pla = p.id_pla 
					  LEFT JOIN cita c ON e.id_eje = c.id_eje2 AND c.eli_cit = 1 
					  LEFT JOIN planteles_ejecutivo pe ON e.id_eje = pe.id_eje
					  LEFT JOIN plantel pa ON pe.id_pla = pa.id_pla
					  GROUP BY e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje, p.nom_pla
					  ORDER BY e.eli_eje DESC, e.nom_eje ASC
[2025-07-23 20:09:20] Ejecutivo ID: 9 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 20:09:20] Ejecutivo ID: 16 - Citas propias: 6 - Citas hijos: 0 - Total: 6
[2025-07-23 20:09:20] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 20:09:20] Ejecutivo ID: 12 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:09:20] Ejecutivo ID: 15 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:09:20] Ejecutivo ID: 18 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:09:20] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 20:09:20] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:09:20] Ejecutivo ID: 10 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 20:09:20] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:09:20] Ejecutivo ID: 2 - Citas propias: 6 - Citas hijos: 4 - Total: 10
[2025-07-23 20:09:20] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:09:20] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:09:20] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:09:20] Ejecutivo ID: 13 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:09:20] Ejecutivo ID: 1 - Citas propias: 0 - Citas hijos: 0 - Total: 0
[2025-07-23 20:09:20] Ejecutivos con citas encontrados: 15
[2025-07-23 20:09:23] REQUEST recibido: Array
(
    [action] => obtener_ejecutivos_con_citas
)

[2025-07-23 20:09:23] Query ejecutivos con citas: SELECT e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje,
					         p.nom_pla as plantel_principal,
					         COUNT(DISTINCT c.id_cit) as citas_propias,
					         GROUP_CONCAT(DISTINCT CONCAT(pa.id_pla, ':', pa.nom_pla) SEPARATOR '|') as planteles_asociados,
					         COUNT(DISTINCT pe.id_pla) as total_planteles_asociados,
					         CASE 
					             WHEN e.ult_eje IS NULL THEN 'sin_sesion'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) <= 1 THEN 'verde'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) BETWEEN 2 AND 3 THEN 'amarillo'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) >= 4 THEN 'rojo'
					             ELSE 'sin_sesion'
					         END as semaforo_sesion,
					         TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) as dias_desde_ultima_sesion
					  FROM ejecutivo e 
					  LEFT JOIN plantel p ON e.id_pla = p.id_pla 
					  LEFT JOIN cita c ON e.id_eje = c.id_eje2 AND c.eli_cit = 1 
					  LEFT JOIN planteles_ejecutivo pe ON e.id_eje = pe.id_eje
					  LEFT JOIN plantel pa ON pe.id_pla = pa.id_pla
					  GROUP BY e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje, p.nom_pla
					  ORDER BY e.eli_eje DESC, e.nom_eje ASC
[2025-07-23 20:09:23] Ejecutivo ID: 9 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 20:09:23] Ejecutivo ID: 16 - Citas propias: 6 - Citas hijos: 0 - Total: 6
[2025-07-23 20:09:23] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 20:09:23] Ejecutivo ID: 12 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:09:24] Ejecutivo ID: 15 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:09:24] Ejecutivo ID: 18 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:09:24] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 20:09:24] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:09:24] Ejecutivo ID: 10 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 20:09:24] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:09:24] Ejecutivo ID: 2 - Citas propias: 6 - Citas hijos: 4 - Total: 10
[2025-07-23 20:09:24] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:09:24] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:09:24] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:09:24] Ejecutivo ID: 13 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:09:24] Ejecutivo ID: 1 - Citas propias: 0 - Citas hijos: 0 - Total: 0
[2025-07-23 20:09:24] Ejecutivos con citas encontrados: 15
[2025-07-23 20:14:17] REQUEST recibido: Array
(
    [action] => obtener_ejecutivos_con_citas
)

[2025-07-23 20:14:17] Query ejecutivos con citas: SELECT e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje,
					         p.nom_pla as plantel_principal,
					         COUNT(DISTINCT c.id_cit) as citas_propias,
					         GROUP_CONCAT(DISTINCT CONCAT(pa.id_pla, ':', pa.nom_pla) SEPARATOR '|') as planteles_asociados,
					         COUNT(DISTINCT pe.id_pla) as total_planteles_asociados,
					         CASE 
					             WHEN e.ult_eje IS NULL THEN 'sin_sesion'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) <= 1 THEN 'verde'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) BETWEEN 2 AND 3 THEN 'amarillo'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) >= 4 THEN 'rojo'
					             ELSE 'sin_sesion'
					         END as semaforo_sesion,
					         TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) as dias_desde_ultima_sesion
					  FROM ejecutivo e 
					  LEFT JOIN plantel p ON e.id_pla = p.id_pla 
					  LEFT JOIN cita c ON e.id_eje = c.id_eje2 AND c.eli_cit = 1 
					  LEFT JOIN planteles_ejecutivo pe ON e.id_eje = pe.id_eje
					  LEFT JOIN plantel pa ON pe.id_pla = pa.id_pla
					  GROUP BY e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje, p.nom_pla
					  ORDER BY e.eli_eje DESC, e.nom_eje ASC
[2025-07-23 20:14:17] Ejecutivo ID: 9 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 20:14:17] Ejecutivo ID: 16 - Citas propias: 6 - Citas hijos: 0 - Total: 6
[2025-07-23 20:14:17] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 20:14:17] Ejecutivo ID: 12 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:14:17] Ejecutivo ID: 15 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:14:17] Ejecutivo ID: 18 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:14:17] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 20:14:17] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:14:17] Ejecutivo ID: 10 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 20:14:17] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:14:17] Ejecutivo ID: 2 - Citas propias: 6 - Citas hijos: 4 - Total: 10
[2025-07-23 20:14:17] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:14:17] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:14:17] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:14:17] Ejecutivo ID: 13 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:14:17] Ejecutivo ID: 1 - Citas propias: 0 - Citas hijos: 0 - Total: 0
[2025-07-23 20:14:17] Ejecutivos con citas encontrados: 15
[2025-07-23 20:14:32] REQUEST recibido: Array
(
    [action] => obtener_ejecutivos_con_citas
)

[2025-07-23 20:14:32] Query ejecutivos con citas: SELECT e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje,
					         p.nom_pla as plantel_principal,
					         COUNT(DISTINCT c.id_cit) as citas_propias,
					         GROUP_CONCAT(DISTINCT CONCAT(pa.id_pla, ':', pa.nom_pla) SEPARATOR '|') as planteles_asociados,
					         COUNT(DISTINCT pe.id_pla) as total_planteles_asociados,
					         CASE 
					             WHEN e.ult_eje IS NULL THEN 'sin_sesion'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) <= 1 THEN 'verde'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) BETWEEN 2 AND 3 THEN 'amarillo'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) >= 4 THEN 'rojo'
					             ELSE 'sin_sesion'
					         END as semaforo_sesion,
					         TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) as dias_desde_ultima_sesion
					  FROM ejecutivo e 
					  LEFT JOIN plantel p ON e.id_pla = p.id_pla 
					  LEFT JOIN cita c ON e.id_eje = c.id_eje2 AND c.eli_cit = 1 
					  LEFT JOIN planteles_ejecutivo pe ON e.id_eje = pe.id_eje
					  LEFT JOIN plantel pa ON pe.id_pla = pa.id_pla
					  GROUP BY e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje, p.nom_pla
					  ORDER BY e.eli_eje DESC, e.nom_eje ASC
[2025-07-23 20:14:32] Ejecutivo ID: 9 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 20:14:32] Ejecutivo ID: 16 - Citas propias: 6 - Citas hijos: 0 - Total: 6
[2025-07-23 20:14:32] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 20:14:32] Ejecutivo ID: 12 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:14:32] Ejecutivo ID: 15 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:14:32] Ejecutivo ID: 18 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:14:32] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 20:14:32] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:14:32] Ejecutivo ID: 10 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 20:14:32] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:14:32] Ejecutivo ID: 2 - Citas propias: 6 - Citas hijos: 4 - Total: 10
[2025-07-23 20:14:32] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:14:32] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:14:32] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:14:32] Ejecutivo ID: 13 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:14:32] Ejecutivo ID: 1 - Citas propias: 0 - Citas hijos: 0 - Total: 0
[2025-07-23 20:14:32] Ejecutivos con citas encontrados: 15
[2025-07-23 20:14:54] REQUEST recibido: Array
(
    [action] => obtener_ejecutivos_con_citas
)

[2025-07-23 20:14:54] Query ejecutivos con citas: SELECT e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje,
					         p.nom_pla as plantel_principal,
					         COUNT(DISTINCT c.id_cit) as citas_propias,
					         GROUP_CONCAT(DISTINCT CONCAT(pa.id_pla, ':', pa.nom_pla) SEPARATOR '|') as planteles_asociados,
					         COUNT(DISTINCT pe.id_pla) as total_planteles_asociados,
					         CASE 
					             WHEN e.ult_eje IS NULL THEN 'sin_sesion'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) <= 1 THEN 'verde'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) BETWEEN 2 AND 3 THEN 'amarillo'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) >= 4 THEN 'rojo'
					             ELSE 'sin_sesion'
					         END as semaforo_sesion,
					         TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) as dias_desde_ultima_sesion
					  FROM ejecutivo e 
					  LEFT JOIN plantel p ON e.id_pla = p.id_pla 
					  LEFT JOIN cita c ON e.id_eje = c.id_eje2 AND c.eli_cit = 1 
					  LEFT JOIN planteles_ejecutivo pe ON e.id_eje = pe.id_eje
					  LEFT JOIN plantel pa ON pe.id_pla = pa.id_pla
					  GROUP BY e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje, p.nom_pla
					  ORDER BY e.eli_eje DESC, e.nom_eje ASC
[2025-07-23 20:14:54] Ejecutivo ID: 9 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 20:14:54] Ejecutivo ID: 16 - Citas propias: 6 - Citas hijos: 0 - Total: 6
[2025-07-23 20:14:54] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 20:14:54] Ejecutivo ID: 12 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:14:54] Ejecutivo ID: 15 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:14:54] Ejecutivo ID: 18 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:14:54] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 20:14:54] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:14:54] Ejecutivo ID: 10 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 20:14:54] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:14:54] Ejecutivo ID: 2 - Citas propias: 6 - Citas hijos: 4 - Total: 10
[2025-07-23 20:14:54] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:14:54] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:14:54] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:14:54] Ejecutivo ID: 13 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:14:54] Ejecutivo ID: 1 - Citas propias: 0 - Citas hijos: 0 - Total: 0
[2025-07-23 20:14:54] Ejecutivos con citas encontrados: 15
[2025-07-23 20:15:03] REQUEST recibido: Array
(
    [action] => obtener_ejecutivos_con_citas
)

[2025-07-23 20:15:03] Query ejecutivos con citas: SELECT e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje,
					         p.nom_pla as plantel_principal,
					         COUNT(DISTINCT c.id_cit) as citas_propias,
					         GROUP_CONCAT(DISTINCT CONCAT(pa.id_pla, ':', pa.nom_pla) SEPARATOR '|') as planteles_asociados,
					         COUNT(DISTINCT pe.id_pla) as total_planteles_asociados,
					         CASE 
					             WHEN e.ult_eje IS NULL THEN 'sin_sesion'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) <= 1 THEN 'verde'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) BETWEEN 2 AND 3 THEN 'amarillo'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) >= 4 THEN 'rojo'
					             ELSE 'sin_sesion'
					         END as semaforo_sesion,
					         TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) as dias_desde_ultima_sesion
					  FROM ejecutivo e 
					  LEFT JOIN plantel p ON e.id_pla = p.id_pla 
					  LEFT JOIN cita c ON e.id_eje = c.id_eje2 AND c.eli_cit = 1 
					  LEFT JOIN planteles_ejecutivo pe ON e.id_eje = pe.id_eje
					  LEFT JOIN plantel pa ON pe.id_pla = pa.id_pla
					  GROUP BY e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje, p.nom_pla
					  ORDER BY e.eli_eje DESC, e.nom_eje ASC
[2025-07-23 20:15:03] Ejecutivo ID: 9 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 20:15:03] Ejecutivo ID: 16 - Citas propias: 6 - Citas hijos: 0 - Total: 6
[2025-07-23 20:15:03] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 20:15:03] Ejecutivo ID: 12 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:15:03] Ejecutivo ID: 15 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:15:03] Ejecutivo ID: 18 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:15:03] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 20:15:03] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:15:03] Ejecutivo ID: 10 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 20:15:03] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:15:03] Ejecutivo ID: 2 - Citas propias: 6 - Citas hijos: 4 - Total: 10
[2025-07-23 20:15:03] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:15:03] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:15:03] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:15:03] Ejecutivo ID: 13 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:15:03] Ejecutivo ID: 1 - Citas propias: 0 - Citas hijos: 0 - Total: 0
[2025-07-23 20:15:03] Ejecutivos con citas encontrados: 15
[2025-07-23 20:15:18] REQUEST recibido: Array
(
    [action] => obtener_ejecutivos_con_citas
)

[2025-07-23 20:15:18] Query ejecutivos con citas: SELECT e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje,
					         p.nom_pla as plantel_principal,
					         COUNT(DISTINCT c.id_cit) as citas_propias,
					         GROUP_CONCAT(DISTINCT CONCAT(pa.id_pla, ':', pa.nom_pla) SEPARATOR '|') as planteles_asociados,
					         COUNT(DISTINCT pe.id_pla) as total_planteles_asociados,
					         CASE 
					             WHEN e.ult_eje IS NULL THEN 'sin_sesion'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) <= 1 THEN 'verde'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) BETWEEN 2 AND 3 THEN 'amarillo'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) >= 4 THEN 'rojo'
					             ELSE 'sin_sesion'
					         END as semaforo_sesion,
					         TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) as dias_desde_ultima_sesion
					  FROM ejecutivo e 
					  LEFT JOIN plantel p ON e.id_pla = p.id_pla 
					  LEFT JOIN cita c ON e.id_eje = c.id_eje2 AND c.eli_cit = 1 
					  LEFT JOIN planteles_ejecutivo pe ON e.id_eje = pe.id_eje
					  LEFT JOIN plantel pa ON pe.id_pla = pa.id_pla
					  GROUP BY e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje, p.nom_pla
					  ORDER BY e.eli_eje DESC, e.nom_eje ASC
[2025-07-23 20:15:18] Ejecutivo ID: 9 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 20:15:18] Ejecutivo ID: 16 - Citas propias: 6 - Citas hijos: 0 - Total: 6
[2025-07-23 20:15:18] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 20:15:18] Ejecutivo ID: 12 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:15:18] Ejecutivo ID: 15 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:15:18] Ejecutivo ID: 18 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:15:18] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 20:15:18] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:15:18] Ejecutivo ID: 10 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 20:15:18] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:15:18] Ejecutivo ID: 2 - Citas propias: 6 - Citas hijos: 4 - Total: 10
[2025-07-23 20:15:18] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:15:18] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:15:18] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:15:18] Ejecutivo ID: 13 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:15:18] Ejecutivo ID: 1 - Citas propias: 0 - Citas hijos: 0 - Total: 0
[2025-07-23 20:15:18] Ejecutivos con citas encontrados: 15
[2025-07-23 20:17:07] REQUEST recibido: Array
(
    [action] => obtener_ejecutivos_con_citas
)

[2025-07-23 20:17:07] Query ejecutivos con citas: SELECT e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje,
					         p.nom_pla as plantel_principal,
					         COUNT(DISTINCT c.id_cit) as citas_propias,
					         GROUP_CONCAT(DISTINCT CONCAT(pa.id_pla, ':', pa.nom_pla) SEPARATOR '|') as planteles_asociados,
					         COUNT(DISTINCT pe.id_pla) as total_planteles_asociados,
					         CASE 
					             WHEN e.ult_eje IS NULL THEN 'sin_sesion'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) <= 1 THEN 'verde'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) BETWEEN 2 AND 3 THEN 'amarillo'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) >= 4 THEN 'rojo'
					             ELSE 'sin_sesion'
					         END as semaforo_sesion,
					         TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) as dias_desde_ultima_sesion
					  FROM ejecutivo e 
					  LEFT JOIN plantel p ON e.id_pla = p.id_pla 
					  LEFT JOIN cita c ON e.id_eje = c.id_eje2 AND c.eli_cit = 1 
					  LEFT JOIN planteles_ejecutivo pe ON e.id_eje = pe.id_eje
					  LEFT JOIN plantel pa ON pe.id_pla = pa.id_pla
					  GROUP BY e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje, p.nom_pla
					  ORDER BY e.eli_eje DESC, e.nom_eje ASC
[2025-07-23 20:17:07] Ejecutivo ID: 9 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 20:17:07] Ejecutivo ID: 16 - Citas propias: 6 - Citas hijos: 0 - Total: 6
[2025-07-23 20:17:07] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 20:17:07] Ejecutivo ID: 12 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:17:07] Ejecutivo ID: 15 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:17:07] Ejecutivo ID: 18 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:17:07] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 20:17:07] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:17:07] Ejecutivo ID: 10 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 20:17:07] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:17:07] Ejecutivo ID: 2 - Citas propias: 6 - Citas hijos: 4 - Total: 10
[2025-07-23 20:17:07] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:17:07] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:17:07] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:17:07] Ejecutivo ID: 13 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:17:07] Ejecutivo ID: 1 - Citas propias: 0 - Citas hijos: 0 - Total: 0
[2025-07-23 20:17:07] Ejecutivos con citas encontrados: 15
[2025-07-23 20:18:14] REQUEST recibido: Array
(
    [action] => obtener_ejecutivos_con_citas
)

[2025-07-23 20:18:14] Query ejecutivos con citas: SELECT e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje,
					         p.nom_pla as plantel_principal,
					         COUNT(DISTINCT c.id_cit) as citas_propias,
					         GROUP_CONCAT(DISTINCT CONCAT(pa.id_pla, ':', pa.nom_pla) SEPARATOR '|') as planteles_asociados,
					         COUNT(DISTINCT pe.id_pla) as total_planteles_asociados,
					         CASE 
					             WHEN e.ult_eje IS NULL THEN 'sin_sesion'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) <= 1 THEN 'verde'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) BETWEEN 2 AND 3 THEN 'amarillo'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) >= 4 THEN 'rojo'
					             ELSE 'sin_sesion'
					         END as semaforo_sesion,
					         TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) as dias_desde_ultima_sesion
					  FROM ejecutivo e 
					  LEFT JOIN plantel p ON e.id_pla = p.id_pla 
					  LEFT JOIN cita c ON e.id_eje = c.id_eje2 AND c.eli_cit = 1 
					  LEFT JOIN planteles_ejecutivo pe ON e.id_eje = pe.id_eje
					  LEFT JOIN plantel pa ON pe.id_pla = pa.id_pla
					  GROUP BY e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje, p.nom_pla
					  ORDER BY e.eli_eje DESC, e.nom_eje ASC
[2025-07-23 20:18:14] Ejecutivo ID: 9 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 20:18:14] Ejecutivo ID: 16 - Citas propias: 6 - Citas hijos: 0 - Total: 6
[2025-07-23 20:18:14] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 20:18:14] Ejecutivo ID: 12 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:18:14] Ejecutivo ID: 15 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:18:14] Ejecutivo ID: 18 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:18:14] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 20:18:14] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:18:14] Ejecutivo ID: 10 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 20:18:14] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:18:14] Ejecutivo ID: 2 - Citas propias: 6 - Citas hijos: 4 - Total: 10
[2025-07-23 20:18:14] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:18:14] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:18:14] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:18:14] Ejecutivo ID: 13 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:18:14] Ejecutivo ID: 1 - Citas propias: 0 - Citas hijos: 0 - Total: 0
[2025-07-23 20:18:14] Ejecutivos con citas encontrados: 15
[2025-07-23 20:19:10] REQUEST recibido: Array
(
    [action] => obtener_ejecutivos_con_citas
)

[2025-07-23 20:19:10] Query ejecutivos con citas: SELECT e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje,
					         p.nom_pla as plantel_principal,
					         COUNT(DISTINCT c.id_cit) as citas_propias,
					         GROUP_CONCAT(DISTINCT CONCAT(pa.id_pla, ':', pa.nom_pla) SEPARATOR '|') as planteles_asociados,
					         COUNT(DISTINCT pe.id_pla) as total_planteles_asociados,
					         CASE 
					             WHEN e.ult_eje IS NULL THEN 'sin_sesion'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) <= 1 THEN 'verde'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) BETWEEN 2 AND 3 THEN 'amarillo'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) >= 4 THEN 'rojo'
					             ELSE 'sin_sesion'
					         END as semaforo_sesion,
					         TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) as dias_desde_ultima_sesion
					  FROM ejecutivo e 
					  LEFT JOIN plantel p ON e.id_pla = p.id_pla 
					  LEFT JOIN cita c ON e.id_eje = c.id_eje2 AND c.eli_cit = 1 
					  LEFT JOIN planteles_ejecutivo pe ON e.id_eje = pe.id_eje
					  LEFT JOIN plantel pa ON pe.id_pla = pa.id_pla
					  GROUP BY e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje, p.nom_pla
					  ORDER BY e.eli_eje DESC, e.nom_eje ASC
[2025-07-23 20:19:10] Ejecutivo ID: 9 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 20:19:10] Ejecutivo ID: 16 - Citas propias: 6 - Citas hijos: 0 - Total: 6
[2025-07-23 20:19:10] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 20:19:10] Ejecutivo ID: 12 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:19:10] Ejecutivo ID: 15 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:19:10] Ejecutivo ID: 18 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:19:10] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 20:19:10] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:19:10] Ejecutivo ID: 10 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 20:19:10] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:19:10] Ejecutivo ID: 2 - Citas propias: 6 - Citas hijos: 4 - Total: 10
[2025-07-23 20:19:10] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:19:10] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:19:10] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:19:10] Ejecutivo ID: 13 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:19:10] Ejecutivo ID: 1 - Citas propias: 0 - Citas hijos: 0 - Total: 0
[2025-07-23 20:19:10] Ejecutivos con citas encontrados: 15
[2025-07-23 20:19:20] REQUEST recibido: Array
(
    [action] => actualizar_ejecutivo
    [nom_eje] => Eric Valenzuela
    [tel_eje] => 111-111
    [eli_eje] => 1
    [id_eje] => 18
)

[2025-07-23 20:19:21] REQUEST recibido: Array
(
    [action] => obtener_ejecutivos_con_citas
)

[2025-07-23 20:19:21] Query ejecutivos con citas: SELECT e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje,
					         p.nom_pla as plantel_principal,
					         COUNT(DISTINCT c.id_cit) as citas_propias,
					         GROUP_CONCAT(DISTINCT CONCAT(pa.id_pla, ':', pa.nom_pla) SEPARATOR '|') as planteles_asociados,
					         COUNT(DISTINCT pe.id_pla) as total_planteles_asociados,
					         CASE 
					             WHEN e.ult_eje IS NULL THEN 'sin_sesion'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) <= 1 THEN 'verde'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) BETWEEN 2 AND 3 THEN 'amarillo'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) >= 4 THEN 'rojo'
					             ELSE 'sin_sesion'
					         END as semaforo_sesion,
					         TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) as dias_desde_ultima_sesion
					  FROM ejecutivo e 
					  LEFT JOIN plantel p ON e.id_pla = p.id_pla 
					  LEFT JOIN cita c ON e.id_eje = c.id_eje2 AND c.eli_cit = 1 
					  LEFT JOIN planteles_ejecutivo pe ON e.id_eje = pe.id_eje
					  LEFT JOIN plantel pa ON pe.id_pla = pa.id_pla
					  GROUP BY e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje, p.nom_pla
					  ORDER BY e.eli_eje DESC, e.nom_eje ASC
[2025-07-23 20:19:21] Ejecutivo ID: 9 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 20:19:21] Ejecutivo ID: 16 - Citas propias: 6 - Citas hijos: 0 - Total: 6
[2025-07-23 20:19:21] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 20:19:21] Ejecutivo ID: 12 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:19:21] Ejecutivo ID: 15 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:19:21] Ejecutivo ID: 18 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:19:21] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 20:19:21] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:19:21] Ejecutivo ID: 10 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 20:19:21] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:19:21] Ejecutivo ID: 2 - Citas propias: 6 - Citas hijos: 4 - Total: 10
[2025-07-23 20:19:21] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:19:21] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:19:21] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:19:21] Ejecutivo ID: 13 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:19:21] Ejecutivo ID: 1 - Citas propias: 0 - Citas hijos: 0 - Total: 0
[2025-07-23 20:19:21] Ejecutivos con citas encontrados: 15
[2025-07-23 20:19:42] REQUEST recibido: Array
(
    [action] => obtener_ejecutivos_con_citas
)

[2025-07-23 20:19:42] Query ejecutivos con citas: SELECT e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje,
					         p.nom_pla as plantel_principal,
					         COUNT(DISTINCT c.id_cit) as citas_propias,
					         GROUP_CONCAT(DISTINCT CONCAT(pa.id_pla, ':', pa.nom_pla) SEPARATOR '|') as planteles_asociados,
					         COUNT(DISTINCT pe.id_pla) as total_planteles_asociados,
					         CASE 
					             WHEN e.ult_eje IS NULL THEN 'sin_sesion'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) <= 1 THEN 'verde'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) BETWEEN 2 AND 3 THEN 'amarillo'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) >= 4 THEN 'rojo'
					             ELSE 'sin_sesion'
					         END as semaforo_sesion,
					         TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) as dias_desde_ultima_sesion
					  FROM ejecutivo e 
					  LEFT JOIN plantel p ON e.id_pla = p.id_pla 
					  LEFT JOIN cita c ON e.id_eje = c.id_eje2 AND c.eli_cit = 1 
					  LEFT JOIN planteles_ejecutivo pe ON e.id_eje = pe.id_eje
					  LEFT JOIN plantel pa ON pe.id_pla = pa.id_pla
					  GROUP BY e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje, p.nom_pla
					  ORDER BY e.eli_eje DESC, e.nom_eje ASC
[2025-07-23 20:19:42] Ejecutivo ID: 9 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 20:19:42] Ejecutivo ID: 16 - Citas propias: 6 - Citas hijos: 0 - Total: 6
[2025-07-23 20:19:42] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 20:19:42] Ejecutivo ID: 12 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:19:42] Ejecutivo ID: 15 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:19:42] Ejecutivo ID: 18 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:19:42] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 20:19:42] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:19:42] Ejecutivo ID: 10 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 20:19:42] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:19:42] Ejecutivo ID: 2 - Citas propias: 6 - Citas hijos: 4 - Total: 10
[2025-07-23 20:19:42] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:19:42] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:19:42] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:19:42] Ejecutivo ID: 13 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:19:42] Ejecutivo ID: 1 - Citas propias: 0 - Citas hijos: 0 - Total: 0
[2025-07-23 20:19:42] Ejecutivos con citas encontrados: 15
[2025-07-23 20:23:18] REQUEST recibido: Array
(
    [action] => obtener_ejecutivos_con_citas
)

[2025-07-23 20:23:18] Query ejecutivos con citas: SELECT e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje,
					         p.nom_pla as plantel_principal,
					         COUNT(DISTINCT c.id_cit) as citas_propias,
					         GROUP_CONCAT(DISTINCT CONCAT(pa.id_pla, ':', pa.nom_pla) SEPARATOR '|') as planteles_asociados,
					         COUNT(DISTINCT pe.id_pla) as total_planteles_asociados,
					         CASE 
					             WHEN e.ult_eje IS NULL THEN 'sin_sesion'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) <= 1 THEN 'verde'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) BETWEEN 2 AND 3 THEN 'amarillo'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) >= 4 THEN 'rojo'
					             ELSE 'sin_sesion'
					         END as semaforo_sesion,
					         TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) as dias_desde_ultima_sesion
					  FROM ejecutivo e 
					  LEFT JOIN plantel p ON e.id_pla = p.id_pla 
					  LEFT JOIN cita c ON e.id_eje = c.id_eje2 AND c.eli_cit = 1 
					  LEFT JOIN planteles_ejecutivo pe ON e.id_eje = pe.id_eje
					  LEFT JOIN plantel pa ON pe.id_pla = pa.id_pla
					  GROUP BY e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje, p.nom_pla
					  ORDER BY e.eli_eje DESC, e.nom_eje ASC
[2025-07-23 20:23:18] Ejecutivo ID: 9 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 20:23:18] Ejecutivo ID: 16 - Citas propias: 6 - Citas hijos: 0 - Total: 6
[2025-07-23 20:23:18] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 20:23:18] Ejecutivo ID: 12 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:23:18] Ejecutivo ID: 15 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:23:18] Ejecutivo ID: 18 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:23:18] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 20:23:18] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:23:18] Ejecutivo ID: 10 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 20:23:18] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:23:18] Ejecutivo ID: 2 - Citas propias: 6 - Citas hijos: 4 - Total: 10
[2025-07-23 20:23:18] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:23:18] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:23:18] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:23:18] Ejecutivo ID: 13 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:23:18] Ejecutivo ID: 1 - Citas propias: 0 - Citas hijos: 0 - Total: 0
[2025-07-23 20:23:18] Ejecutivos con citas encontrados: 15
[2025-07-23 20:23:27] REQUEST recibido: Array
(
    [action] => obtener_ejecutivos_con_citas
)

[2025-07-23 20:23:27] Query ejecutivos con citas: SELECT e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje,
					         p.nom_pla as plantel_principal,
					         COUNT(DISTINCT c.id_cit) as citas_propias,
					         GROUP_CONCAT(DISTINCT CONCAT(pa.id_pla, ':', pa.nom_pla) SEPARATOR '|') as planteles_asociados,
					         COUNT(DISTINCT pe.id_pla) as total_planteles_asociados,
					         CASE 
					             WHEN e.ult_eje IS NULL THEN 'sin_sesion'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) <= 1 THEN 'verde'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) BETWEEN 2 AND 3 THEN 'amarillo'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) >= 4 THEN 'rojo'
					             ELSE 'sin_sesion'
					         END as semaforo_sesion,
					         TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) as dias_desde_ultima_sesion
					  FROM ejecutivo e 
					  LEFT JOIN plantel p ON e.id_pla = p.id_pla 
					  LEFT JOIN cita c ON e.id_eje = c.id_eje2 AND c.eli_cit = 1 
					  LEFT JOIN planteles_ejecutivo pe ON e.id_eje = pe.id_eje
					  LEFT JOIN plantel pa ON pe.id_pla = pa.id_pla
					  GROUP BY e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje, p.nom_pla
					  ORDER BY e.eli_eje DESC, e.nom_eje ASC
[2025-07-23 20:23:27] Ejecutivo ID: 9 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 20:23:27] Ejecutivo ID: 16 - Citas propias: 6 - Citas hijos: 0 - Total: 6
[2025-07-23 20:23:27] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 20:23:27] Ejecutivo ID: 12 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:23:27] Ejecutivo ID: 15 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:23:27] Ejecutivo ID: 18 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:23:27] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 20:23:27] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:23:27] Ejecutivo ID: 10 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 20:23:27] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:23:27] Ejecutivo ID: 2 - Citas propias: 6 - Citas hijos: 4 - Total: 10
[2025-07-23 20:23:27] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:23:27] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:23:27] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:23:27] Ejecutivo ID: 13 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:23:27] Ejecutivo ID: 1 - Citas propias: 0 - Citas hijos: 0 - Total: 0
[2025-07-23 20:23:27] Ejecutivos con citas encontrados: 15
[2025-07-23 20:25:27] REQUEST recibido: Array
(
    [action] => actualizar_ejecutivo
    [nom_eje] => Elena Vargas
    [tel_eje] => 555-6001
    [eli_eje] => 1
    [id_eje] => 15
)

[2025-07-23 20:25:28] REQUEST recibido: Array
(
    [action] => obtener_ejecutivos_con_citas
)

[2025-07-23 20:25:28] Query ejecutivos con citas: SELECT e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje,
					         p.nom_pla as plantel_principal,
					         COUNT(DISTINCT c.id_cit) as citas_propias,
					         GROUP_CONCAT(DISTINCT CONCAT(pa.id_pla, ':', pa.nom_pla) SEPARATOR '|') as planteles_asociados,
					         COUNT(DISTINCT pe.id_pla) as total_planteles_asociados,
					         CASE 
					             WHEN e.ult_eje IS NULL THEN 'sin_sesion'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) <= 1 THEN 'verde'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) BETWEEN 2 AND 3 THEN 'amarillo'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) >= 4 THEN 'rojo'
					             ELSE 'sin_sesion'
					         END as semaforo_sesion,
					         TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) as dias_desde_ultima_sesion
					  FROM ejecutivo e 
					  LEFT JOIN plantel p ON e.id_pla = p.id_pla 
					  LEFT JOIN cita c ON e.id_eje = c.id_eje2 AND c.eli_cit = 1 
					  LEFT JOIN planteles_ejecutivo pe ON e.id_eje = pe.id_eje
					  LEFT JOIN plantel pa ON pe.id_pla = pa.id_pla
					  GROUP BY e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje, p.nom_pla
					  ORDER BY e.eli_eje DESC, e.nom_eje ASC
[2025-07-23 20:25:28] Ejecutivo ID: 9 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 20:25:28] Ejecutivo ID: 16 - Citas propias: 6 - Citas hijos: 0 - Total: 6
[2025-07-23 20:25:28] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 20:25:28] Ejecutivo ID: 12 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:25:28] Ejecutivo ID: 15 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:25:28] Ejecutivo ID: 18 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:25:28] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 20:25:28] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:25:28] Ejecutivo ID: 10 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 20:25:28] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:25:28] Ejecutivo ID: 2 - Citas propias: 6 - Citas hijos: 4 - Total: 10
[2025-07-23 20:25:28] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:25:28] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:25:28] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:25:28] Ejecutivo ID: 13 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:25:28] Ejecutivo ID: 1 - Citas propias: 0 - Citas hijos: 0 - Total: 0
[2025-07-23 20:25:28] Ejecutivos con citas encontrados: 15
[2025-07-23 20:27:02] REQUEST recibido: Array
(
    [action] => obtener_planteles
)

[2025-07-23 20:27:02] Query planteles: SELECT id_pla, nom_pla, fec_pla FROM plantel ORDER BY nom_pla ASC
[2025-07-23 20:27:02] Planteles encontrados: 3
[2025-07-23 20:27:02] REQUEST recibido: Array
(
    [action] => obtener_citas_totales_por_plantel
    [id_pla] => 6
)

[2025-07-23 20:27:02] REQUEST recibido: Array
(
    [action] => obtener_citas_totales_por_plantel
    [id_pla] => 3
)

[2025-07-23 20:27:02] REQUEST recibido: Array
(
    [action] => obtener_citas_totales_por_plantel
    [id_pla] => 2
)

[2025-07-23 20:27:02] REQUEST recibido: Array
(
    [action] => obtener_ejecutivos_con_citas
)

[2025-07-23 20:27:02] Query ejecutivos con citas: SELECT e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje,
					         p.nom_pla as plantel_principal,
					         COUNT(DISTINCT c.id_cit) as citas_propias,
					         GROUP_CONCAT(DISTINCT CONCAT(pa.id_pla, ':', pa.nom_pla) SEPARATOR '|') as planteles_asociados,
					         COUNT(DISTINCT pe.id_pla) as total_planteles_asociados,
					         CASE 
					             WHEN e.ult_eje IS NULL THEN 'sin_sesion'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) <= 1 THEN 'verde'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) BETWEEN 2 AND 3 THEN 'amarillo'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) >= 4 THEN 'rojo'
					             ELSE 'sin_sesion'
					         END as semaforo_sesion,
					         TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) as dias_desde_ultima_sesion
					  FROM ejecutivo e 
					  LEFT JOIN plantel p ON e.id_pla = p.id_pla 
					  LEFT JOIN cita c ON e.id_eje = c.id_eje2 AND c.eli_cit = 1 
					  LEFT JOIN planteles_ejecutivo pe ON e.id_eje = pe.id_eje
					  LEFT JOIN plantel pa ON pe.id_pla = pa.id_pla
					  GROUP BY e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje, p.nom_pla
					  ORDER BY e.eli_eje DESC, e.nom_eje ASC
[2025-07-23 20:27:02] Ejecutivo ID: 9 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 20:27:02] Ejecutivo ID: 16 - Citas propias: 6 - Citas hijos: 0 - Total: 6
[2025-07-23 20:27:02] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 20:27:02] Ejecutivo ID: 12 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:27:02] Ejecutivo ID: 15 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:27:02] Ejecutivo ID: 18 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:27:02] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 20:27:02] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:27:02] Ejecutivo ID: 10 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 20:27:02] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:27:02] Ejecutivo ID: 2 - Citas propias: 6 - Citas hijos: 4 - Total: 10
[2025-07-23 20:27:02] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:27:02] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:27:02] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:27:02] Ejecutivo ID: 13 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:27:02] Ejecutivo ID: 1 - Citas propias: 0 - Citas hijos: 0 - Total: 0
[2025-07-23 20:27:02] Ejecutivos con citas encontrados: 15
[2025-07-23 20:27:02] REQUEST recibido: Array
(
    [action] => obtener_citas_totales_por_plantel
    [id_pla] => 6
)

[2025-07-23 20:27:02] REQUEST recibido: Array
(
    [action] => obtener_citas_totales_por_plantel
    [id_pla] => 3
)

[2025-07-23 20:27:02] REQUEST recibido: Array
(
    [action] => obtener_citas_totales_por_plantel
    [id_pla] => 2
)

[2025-07-23 20:28:39] REQUEST recibido: Array
(
    [action] => obtener_ejecutivos_con_citas
)

[2025-07-23 20:28:39] Query ejecutivos con citas: SELECT e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje,
					         p.nom_pla as plantel_principal,
					         COUNT(DISTINCT c.id_cit) as citas_propias,
					         GROUP_CONCAT(DISTINCT CONCAT(pa.id_pla, ':', pa.nom_pla) SEPARATOR '|') as planteles_asociados,
					         COUNT(DISTINCT pe.id_pla) as total_planteles_asociados,
					         CASE 
					             WHEN e.ult_eje IS NULL THEN 'sin_sesion'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) <= 1 THEN 'verde'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) BETWEEN 2 AND 3 THEN 'amarillo'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) >= 4 THEN 'rojo'
					             ELSE 'sin_sesion'
					         END as semaforo_sesion,
					         TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) as dias_desde_ultima_sesion
					  FROM ejecutivo e 
					  LEFT JOIN plantel p ON e.id_pla = p.id_pla 
					  LEFT JOIN cita c ON e.id_eje = c.id_eje2 AND c.eli_cit = 1 
					  LEFT JOIN planteles_ejecutivo pe ON e.id_eje = pe.id_eje
					  LEFT JOIN plantel pa ON pe.id_pla = pa.id_pla
					  GROUP BY e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje, p.nom_pla
					  ORDER BY e.eli_eje DESC, e.nom_eje ASC
[2025-07-23 20:28:39] Ejecutivo ID: 9 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 20:28:39] Ejecutivo ID: 16 - Citas propias: 6 - Citas hijos: 0 - Total: 6
[2025-07-23 20:28:39] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 20:28:39] Ejecutivo ID: 12 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:28:39] Ejecutivo ID: 15 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:28:39] Ejecutivo ID: 18 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:28:39] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 20:28:39] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:28:39] Ejecutivo ID: 10 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 20:28:39] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:28:39] Ejecutivo ID: 2 - Citas propias: 6 - Citas hijos: 4 - Total: 10
[2025-07-23 20:28:39] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:28:39] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:28:39] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:28:39] Ejecutivo ID: 13 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:28:39] Ejecutivo ID: 1 - Citas propias: 0 - Citas hijos: 0 - Total: 0
[2025-07-23 20:28:39] Ejecutivos con citas encontrados: 15
[2025-07-23 20:29:32] REQUEST recibido: Array
(
    [action] => obtener_ejecutivos_con_citas
)

[2025-07-23 20:29:32] Query ejecutivos con citas: SELECT e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje,
					         p.nom_pla as plantel_principal,
					         COUNT(DISTINCT c.id_cit) as citas_propias,
					         GROUP_CONCAT(DISTINCT CONCAT(pa.id_pla, ':', pa.nom_pla) SEPARATOR '|') as planteles_asociados,
					         COUNT(DISTINCT pe.id_pla) as total_planteles_asociados,
					         CASE 
					             WHEN e.ult_eje IS NULL THEN 'sin_sesion'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) <= 1 THEN 'verde'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) BETWEEN 2 AND 3 THEN 'amarillo'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) >= 4 THEN 'rojo'
					             ELSE 'sin_sesion'
					         END as semaforo_sesion,
					         TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) as dias_desde_ultima_sesion
					  FROM ejecutivo e 
					  LEFT JOIN plantel p ON e.id_pla = p.id_pla 
					  LEFT JOIN cita c ON e.id_eje = c.id_eje2 AND c.eli_cit = 1 
					  LEFT JOIN planteles_ejecutivo pe ON e.id_eje = pe.id_eje
					  LEFT JOIN plantel pa ON pe.id_pla = pa.id_pla
					  GROUP BY e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje, p.nom_pla
					  ORDER BY e.eli_eje DESC, e.nom_eje ASC
[2025-07-23 20:29:32] Ejecutivo ID: 9 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 20:29:32] Ejecutivo ID: 16 - Citas propias: 6 - Citas hijos: 0 - Total: 6
[2025-07-23 20:29:32] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 20:29:32] Ejecutivo ID: 12 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:29:32] Ejecutivo ID: 15 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:29:32] Ejecutivo ID: 18 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:29:32] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 20:29:32] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:29:32] Ejecutivo ID: 10 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 20:29:32] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:29:32] Ejecutivo ID: 2 - Citas propias: 6 - Citas hijos: 4 - Total: 10
[2025-07-23 20:29:32] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:29:32] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:29:32] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:29:32] Ejecutivo ID: 13 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:29:32] Ejecutivo ID: 1 - Citas propias: 0 - Citas hijos: 0 - Total: 0
[2025-07-23 20:29:32] Ejecutivos con citas encontrados: 15
[2025-07-23 20:29:44] REQUEST recibido: Array
(
    [action] => actualizar_ejecutivo
    [nom_eje] => Diego Herrera Luna
    [tel_eje] => 555-3001
    [eli_eje] => 1
    [id_eje] => 12
)

[2025-07-23 20:29:45] REQUEST recibido: Array
(
    [action] => obtener_ejecutivos_con_citas
)

[2025-07-23 20:29:45] Query ejecutivos con citas: SELECT e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje,
					         p.nom_pla as plantel_principal,
					         COUNT(DISTINCT c.id_cit) as citas_propias,
					         GROUP_CONCAT(DISTINCT CONCAT(pa.id_pla, ':', pa.nom_pla) SEPARATOR '|') as planteles_asociados,
					         COUNT(DISTINCT pe.id_pla) as total_planteles_asociados,
					         CASE 
					             WHEN e.ult_eje IS NULL THEN 'sin_sesion'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) <= 1 THEN 'verde'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) BETWEEN 2 AND 3 THEN 'amarillo'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) >= 4 THEN 'rojo'
					             ELSE 'sin_sesion'
					         END as semaforo_sesion,
					         TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) as dias_desde_ultima_sesion
					  FROM ejecutivo e 
					  LEFT JOIN plantel p ON e.id_pla = p.id_pla 
					  LEFT JOIN cita c ON e.id_eje = c.id_eje2 AND c.eli_cit = 1 
					  LEFT JOIN planteles_ejecutivo pe ON e.id_eje = pe.id_eje
					  LEFT JOIN plantel pa ON pe.id_pla = pa.id_pla
					  GROUP BY e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje, p.nom_pla
					  ORDER BY e.eli_eje DESC, e.nom_eje ASC
[2025-07-23 20:29:45] Ejecutivo ID: 9 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 20:29:45] Ejecutivo ID: 16 - Citas propias: 6 - Citas hijos: 0 - Total: 6
[2025-07-23 20:29:45] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 20:29:45] Ejecutivo ID: 12 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:29:45] Ejecutivo ID: 15 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:29:45] Ejecutivo ID: 18 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:29:45] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 20:29:45] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:29:45] Ejecutivo ID: 10 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 20:29:45] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:29:45] Ejecutivo ID: 2 - Citas propias: 6 - Citas hijos: 4 - Total: 10
[2025-07-23 20:29:45] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:29:45] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:29:45] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:29:45] Ejecutivo ID: 13 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:29:45] Ejecutivo ID: 1 - Citas propias: 0 - Citas hijos: 0 - Total: 0
[2025-07-23 20:29:45] Ejecutivos con citas encontrados: 15
[2025-07-23 20:30:44] REQUEST recibido: Array
(
    [action] => obtener_ejecutivos_con_citas
)

[2025-07-23 20:30:44] Query ejecutivos con citas: SELECT e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje,
					         p.nom_pla as plantel_principal,
					         COUNT(DISTINCT c.id_cit) as citas_propias,
					         GROUP_CONCAT(DISTINCT CONCAT(pa.id_pla, ':', pa.nom_pla) SEPARATOR '|') as planteles_asociados,
					         COUNT(DISTINCT pe.id_pla) as total_planteles_asociados,
					         CASE 
					             WHEN e.ult_eje IS NULL THEN 'sin_sesion'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) <= 1 THEN 'verde'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) BETWEEN 2 AND 3 THEN 'amarillo'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) >= 4 THEN 'rojo'
					             ELSE 'sin_sesion'
					         END as semaforo_sesion,
					         TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) as dias_desde_ultima_sesion
					  FROM ejecutivo e 
					  LEFT JOIN plantel p ON e.id_pla = p.id_pla 
					  LEFT JOIN cita c ON e.id_eje = c.id_eje2 AND c.eli_cit = 1 
					  LEFT JOIN planteles_ejecutivo pe ON e.id_eje = pe.id_eje
					  LEFT JOIN plantel pa ON pe.id_pla = pa.id_pla
					  GROUP BY e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje, p.nom_pla
					  ORDER BY e.eli_eje DESC, e.nom_eje ASC
[2025-07-23 20:30:45] Ejecutivo ID: 9 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 20:30:45] Ejecutivo ID: 16 - Citas propias: 6 - Citas hijos: 0 - Total: 6
[2025-07-23 20:30:45] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 20:30:45] Ejecutivo ID: 12 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:30:45] Ejecutivo ID: 15 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:30:45] Ejecutivo ID: 18 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:30:45] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 20:30:45] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:30:45] Ejecutivo ID: 10 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 20:30:45] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:30:45] Ejecutivo ID: 2 - Citas propias: 6 - Citas hijos: 4 - Total: 10
[2025-07-23 20:30:45] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:30:45] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:30:45] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:30:45] Ejecutivo ID: 13 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:30:45] Ejecutivo ID: 1 - Citas propias: 0 - Citas hijos: 0 - Total: 0
[2025-07-23 20:30:45] Ejecutivos con citas encontrados: 15
[2025-07-23 20:30:48] REQUEST recibido: Array
(
    [action] => mover_ejecutivo
    [id_eje] => 6
    [id_padre] => 4
)

[2025-07-23 20:30:48] ==============================================
[2025-07-23 20:30:48] MOVER EJECUTIVO - REQUEST RECIBIDO
[2025-07-23 20:30:48] POST data completo: Array
(
    [action] => mover_ejecutivo
    [id_eje] => 6
    [id_padre] => 4
)

[2025-07-23 20:30:48] Valores procesados:
[2025-07-23 20:30:48] - ID Ejecutivo: 6
[2025-07-23 20:30:48] - ID Padre: 4
[2025-07-23 20:30:48] - ID Plantel: NULL
[2025-07-23 20:30:48] ANTES - Ejecutivo: Fatima Nava, Padre anterior: , Plantel anterior: 
[2025-07-23 20:30:48] NUEVO PADRE: Francisco Pineda (ID: 4)
[2025-07-23 20:30:48] QUERY MOVER: UPDATE ejecutivo SET id_padre = '4', id_pla = NULL WHERE id_eje = '6'
[2025-07-23 20:30:48] VERIFICACIÓN - Nuevo padre: 4, Nuevo plantel: 
[2025-07-23 20:30:48] WebSocket movimiento enviado
[2025-07-23 20:30:48] EJECUTIVO MOVIDO EXITOSAMENTE
[2025-07-23 20:30:48] RESPUESTA ENVIADA: SUCCESS
[2025-07-23 20:30:48] ==============================================
[2025-07-23 20:30:55] REQUEST recibido: Array
(
    [action] => mover_ejecutivo
    [id_eje] => 18
    [id_padre] => 15
)

[2025-07-23 20:30:55] ==============================================
[2025-07-23 20:30:55] MOVER EJECUTIVO - REQUEST RECIBIDO
[2025-07-23 20:30:55] POST data completo: Array
(
    [action] => mover_ejecutivo
    [id_eje] => 18
    [id_padre] => 15
)

[2025-07-23 20:30:55] Valores procesados:
[2025-07-23 20:30:55] - ID Ejecutivo: 18
[2025-07-23 20:30:55] - ID Padre: 15
[2025-07-23 20:30:55] - ID Plantel: NULL
[2025-07-23 20:30:55] ANTES - Ejecutivo: Eric Valenzuela, Padre anterior: , Plantel anterior: 
[2025-07-23 20:30:55] NUEVO PADRE: Elena Vargas (ID: 15)
[2025-07-23 20:30:55] QUERY MOVER: UPDATE ejecutivo SET id_padre = '15', id_pla = NULL WHERE id_eje = '18'
[2025-07-23 20:30:55] VERIFICACIÓN - Nuevo padre: 15, Nuevo plantel: 
[2025-07-23 20:30:55] WebSocket movimiento enviado
[2025-07-23 20:30:55] EJECUTIVO MOVIDO EXITOSAMENTE
[2025-07-23 20:30:55] RESPUESTA ENVIADA: SUCCESS
[2025-07-23 20:30:55] ==============================================
[2025-07-23 20:31:01] REQUEST recibido: Array
(
    [action] => obtener_ejecutivos_con_citas
)

[2025-07-23 20:31:01] Query ejecutivos con citas: SELECT e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje,
					         p.nom_pla as plantel_principal,
					         COUNT(DISTINCT c.id_cit) as citas_propias,
					         GROUP_CONCAT(DISTINCT CONCAT(pa.id_pla, ':', pa.nom_pla) SEPARATOR '|') as planteles_asociados,
					         COUNT(DISTINCT pe.id_pla) as total_planteles_asociados,
					         CASE 
					             WHEN e.ult_eje IS NULL THEN 'sin_sesion'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) <= 1 THEN 'verde'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) BETWEEN 2 AND 3 THEN 'amarillo'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) >= 4 THEN 'rojo'
					             ELSE 'sin_sesion'
					         END as semaforo_sesion,
					         TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) as dias_desde_ultima_sesion
					  FROM ejecutivo e 
					  LEFT JOIN plantel p ON e.id_pla = p.id_pla 
					  LEFT JOIN cita c ON e.id_eje = c.id_eje2 AND c.eli_cit = 1 
					  LEFT JOIN planteles_ejecutivo pe ON e.id_eje = pe.id_eje
					  LEFT JOIN plantel pa ON pe.id_pla = pa.id_pla
					  GROUP BY e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje, p.nom_pla
					  ORDER BY e.eli_eje DESC, e.nom_eje ASC
[2025-07-23 20:31:01] Ejecutivo ID: 9 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 20:31:01] Ejecutivo ID: 16 - Citas propias: 6 - Citas hijos: 0 - Total: 6
[2025-07-23 20:31:01] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 20:31:01] Ejecutivo ID: 12 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:31:01] Ejecutivo ID: 18 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:31:01] Ejecutivo ID: 15 - Citas propias: 5 - Citas hijos: 5 - Total: 10
[2025-07-23 20:31:01] Ejecutivo ID: 18 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:31:01] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 20:31:01] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 20:31:01] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 2 - Total: 6
[2025-07-23 20:31:01] Ejecutivo ID: 10 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 20:31:01] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:31:01] Ejecutivo ID: 2 - Citas propias: 6 - Citas hijos: 4 - Total: 10
[2025-07-23 20:31:01] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:31:01] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:31:01] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:31:01] Ejecutivo ID: 13 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:31:01] Ejecutivo ID: 1 - Citas propias: 0 - Citas hijos: 0 - Total: 0
[2025-07-23 20:31:01] Ejecutivos con citas encontrados: 15
[2025-07-23 20:31:04] REQUEST recibido: Array
(
    [action] => obtener_ejecutivos_con_citas
)

[2025-07-23 20:31:04] Query ejecutivos con citas: SELECT e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje,
					         p.nom_pla as plantel_principal,
					         COUNT(DISTINCT c.id_cit) as citas_propias,
					         GROUP_CONCAT(DISTINCT CONCAT(pa.id_pla, ':', pa.nom_pla) SEPARATOR '|') as planteles_asociados,
					         COUNT(DISTINCT pe.id_pla) as total_planteles_asociados,
					         CASE 
					             WHEN e.ult_eje IS NULL THEN 'sin_sesion'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) <= 1 THEN 'verde'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) BETWEEN 2 AND 3 THEN 'amarillo'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) >= 4 THEN 'rojo'
					             ELSE 'sin_sesion'
					         END as semaforo_sesion,
					         TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) as dias_desde_ultima_sesion
					  FROM ejecutivo e 
					  LEFT JOIN plantel p ON e.id_pla = p.id_pla 
					  LEFT JOIN cita c ON e.id_eje = c.id_eje2 AND c.eli_cit = 1 
					  LEFT JOIN planteles_ejecutivo pe ON e.id_eje = pe.id_eje
					  LEFT JOIN plantel pa ON pe.id_pla = pa.id_pla
					  GROUP BY e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje, p.nom_pla
					  ORDER BY e.eli_eje DESC, e.nom_eje ASC
[2025-07-23 20:31:04] Ejecutivo ID: 9 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 20:31:04] Ejecutivo ID: 16 - Citas propias: 6 - Citas hijos: 0 - Total: 6
[2025-07-23 20:31:04] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 20:31:04] Ejecutivo ID: 12 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:31:04] Ejecutivo ID: 18 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:31:04] Ejecutivo ID: 15 - Citas propias: 5 - Citas hijos: 5 - Total: 10
[2025-07-23 20:31:04] Ejecutivo ID: 18 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:31:04] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 20:31:04] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 20:31:04] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 2 - Total: 6
[2025-07-23 20:31:04] Ejecutivo ID: 10 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 20:31:04] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:31:04] Ejecutivo ID: 2 - Citas propias: 6 - Citas hijos: 4 - Total: 10
[2025-07-23 20:31:04] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:31:04] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:31:04] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:31:04] Ejecutivo ID: 13 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:31:04] Ejecutivo ID: 1 - Citas propias: 0 - Citas hijos: 0 - Total: 0
[2025-07-23 20:31:04] Ejecutivos con citas encontrados: 15
[2025-07-23 20:31:08] REQUEST recibido: Array
(
    [action] => mover_ejecutivo
    [id_eje] => 6
    [id_padre] => 
)

[2025-07-23 20:31:08] ==============================================
[2025-07-23 20:31:08] MOVER EJECUTIVO - REQUEST RECIBIDO
[2025-07-23 20:31:08] POST data completo: Array
(
    [action] => mover_ejecutivo
    [id_eje] => 6
    [id_padre] => 
)

[2025-07-23 20:31:08] Valores procesados:
[2025-07-23 20:31:08] - ID Ejecutivo: 6
[2025-07-23 20:31:08] - ID Padre: NULL
[2025-07-23 20:31:08] - ID Plantel: NULL
[2025-07-23 20:31:08] ANTES - Ejecutivo: Fatima Nava, Padre anterior: 4, Plantel anterior: 
[2025-07-23 20:31:08] QUERY MOVER: UPDATE ejecutivo SET id_padre = NULL, id_pla = NULL WHERE id_eje = '6'
[2025-07-23 20:31:08] VERIFICACIÓN - Nuevo padre: , Nuevo plantel: 
[2025-07-23 20:31:08] WebSocket movimiento enviado
[2025-07-23 20:31:08] EJECUTIVO MOVIDO EXITOSAMENTE
[2025-07-23 20:31:08] RESPUESTA ENVIADA: SUCCESS
[2025-07-23 20:31:08] ==============================================
[2025-07-23 20:31:10] REQUEST recibido: Array
(
    [action] => mover_ejecutivo
    [id_eje] => 6
    [id_padre] => 4
)

[2025-07-23 20:31:10] ==============================================
[2025-07-23 20:31:10] MOVER EJECUTIVO - REQUEST RECIBIDO
[2025-07-23 20:31:10] POST data completo: Array
(
    [action] => mover_ejecutivo
    [id_eje] => 6
    [id_padre] => 4
)

[2025-07-23 20:31:10] Valores procesados:
[2025-07-23 20:31:10] - ID Ejecutivo: 6
[2025-07-23 20:31:10] - ID Padre: 4
[2025-07-23 20:31:10] - ID Plantel: NULL
[2025-07-23 20:31:10] ANTES - Ejecutivo: Fatima Nava, Padre anterior: , Plantel anterior: 
[2025-07-23 20:31:10] NUEVO PADRE: Francisco Pineda (ID: 4)
[2025-07-23 20:31:10] QUERY MOVER: UPDATE ejecutivo SET id_padre = '4', id_pla = NULL WHERE id_eje = '6'
[2025-07-23 20:31:10] VERIFICACIÓN - Nuevo padre: 4, Nuevo plantel: 
[2025-07-23 20:31:10] WebSocket movimiento enviado
[2025-07-23 20:31:10] EJECUTIVO MOVIDO EXITOSAMENTE
[2025-07-23 20:31:10] RESPUESTA ENVIADA: SUCCESS
[2025-07-23 20:31:10] ==============================================
[2025-07-23 20:31:11] REQUEST recibido: Array
(
    [action] => mover_ejecutivo
    [id_eje] => 6
    [id_padre] => 
)

[2025-07-23 20:31:11] ==============================================
[2025-07-23 20:31:11] MOVER EJECUTIVO - REQUEST RECIBIDO
[2025-07-23 20:31:11] POST data completo: Array
(
    [action] => mover_ejecutivo
    [id_eje] => 6
    [id_padre] => 
)

[2025-07-23 20:31:11] Valores procesados:
[2025-07-23 20:31:11] - ID Ejecutivo: 6
[2025-07-23 20:31:11] - ID Padre: NULL
[2025-07-23 20:31:11] - ID Plantel: NULL
[2025-07-23 20:31:11] ANTES - Ejecutivo: Fatima Nava, Padre anterior: 4, Plantel anterior: 
[2025-07-23 20:31:11] QUERY MOVER: UPDATE ejecutivo SET id_padre = NULL, id_pla = NULL WHERE id_eje = '6'
[2025-07-23 20:31:11] VERIFICACIÓN - Nuevo padre: , Nuevo plantel: 
[2025-07-23 20:31:11] WebSocket movimiento enviado
[2025-07-23 20:31:11] EJECUTIVO MOVIDO EXITOSAMENTE
[2025-07-23 20:31:11] RESPUESTA ENVIADA: SUCCESS
[2025-07-23 20:31:11] ==============================================
[2025-07-23 20:31:13] REQUEST recibido: Array
(
    [action] => obtener_ejecutivos_con_citas
)

[2025-07-23 20:31:13] Query ejecutivos con citas: SELECT e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje,
					         p.nom_pla as plantel_principal,
					         COUNT(DISTINCT c.id_cit) as citas_propias,
					         GROUP_CONCAT(DISTINCT CONCAT(pa.id_pla, ':', pa.nom_pla) SEPARATOR '|') as planteles_asociados,
					         COUNT(DISTINCT pe.id_pla) as total_planteles_asociados,
					         CASE 
					             WHEN e.ult_eje IS NULL THEN 'sin_sesion'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) <= 1 THEN 'verde'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) BETWEEN 2 AND 3 THEN 'amarillo'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) >= 4 THEN 'rojo'
					             ELSE 'sin_sesion'
					         END as semaforo_sesion,
					         TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) as dias_desde_ultima_sesion
					  FROM ejecutivo e 
					  LEFT JOIN plantel p ON e.id_pla = p.id_pla 
					  LEFT JOIN cita c ON e.id_eje = c.id_eje2 AND c.eli_cit = 1 
					  LEFT JOIN planteles_ejecutivo pe ON e.id_eje = pe.id_eje
					  LEFT JOIN plantel pa ON pe.id_pla = pa.id_pla
					  GROUP BY e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje, p.nom_pla
					  ORDER BY e.eli_eje DESC, e.nom_eje ASC
[2025-07-23 20:31:13] Ejecutivo ID: 9 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 20:31:13] Ejecutivo ID: 16 - Citas propias: 6 - Citas hijos: 0 - Total: 6
[2025-07-23 20:31:13] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 20:31:13] Ejecutivo ID: 12 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:31:13] Ejecutivo ID: 18 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:31:13] Ejecutivo ID: 15 - Citas propias: 5 - Citas hijos: 5 - Total: 10
[2025-07-23 20:31:13] Ejecutivo ID: 18 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:31:13] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 20:31:13] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:31:13] Ejecutivo ID: 10 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 20:31:13] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:31:13] Ejecutivo ID: 2 - Citas propias: 6 - Citas hijos: 4 - Total: 10
[2025-07-23 20:31:13] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:31:13] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:31:13] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:31:13] Ejecutivo ID: 13 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:31:13] Ejecutivo ID: 1 - Citas propias: 0 - Citas hijos: 0 - Total: 0
[2025-07-23 20:31:13] Ejecutivos con citas encontrados: 15
[2025-07-23 20:34:57] REQUEST recibido: Array
(
    [action] => obtener_ejecutivos_con_citas
)

[2025-07-23 20:34:57] Query ejecutivos con citas: SELECT e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje,
					         p.nom_pla as plantel_principal,
					         COUNT(DISTINCT c.id_cit) as citas_propias,
					         GROUP_CONCAT(DISTINCT CONCAT(pa.id_pla, ':', pa.nom_pla) SEPARATOR '|') as planteles_asociados,
					         COUNT(DISTINCT pe.id_pla) as total_planteles_asociados,
					         CASE 
					             WHEN e.ult_eje IS NULL THEN 'sin_sesion'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) <= 1 THEN 'verde'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) BETWEEN 2 AND 3 THEN 'amarillo'
					             WHEN TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) >= 4 THEN 'rojo'
					             ELSE 'sin_sesion'
					         END as semaforo_sesion,
					         TIMESTAMPDIFF(DAY, e.ult_eje, NOW()) as dias_desde_ultima_sesion
					  FROM ejecutivo e 
					  LEFT JOIN plantel p ON e.id_pla = p.id_pla 
					  LEFT JOIN cita c ON e.id_eje = c.id_eje2 AND c.eli_cit = 1 
					  LEFT JOIN planteles_ejecutivo pe ON e.id_eje = pe.id_eje
					  LEFT JOIN plantel pa ON pe.id_pla = pa.id_pla
					  GROUP BY e.id_eje, e.nom_eje, e.tel_eje, e.fot_eje, e.eli_eje, e.id_padre, e.id_pla, e.ult_eje, p.nom_pla
					  ORDER BY e.eli_eje DESC, e.nom_eje ASC
[2025-07-23 20:34:57] Ejecutivo ID: 9 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 20:34:57] Ejecutivo ID: 16 - Citas propias: 6 - Citas hijos: 0 - Total: 6
[2025-07-23 20:34:57] Ejecutivo ID: 11 - Citas propias: 7 - Citas hijos: 0 - Total: 7
[2025-07-23 20:34:57] Ejecutivo ID: 12 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:34:57] Ejecutivo ID: 18 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:34:57] Ejecutivo ID: 15 - Citas propias: 5 - Citas hijos: 5 - Total: 10
[2025-07-23 20:34:57] Ejecutivo ID: 18 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:34:57] Ejecutivo ID: 6 - Citas propias: 2 - Citas hijos: 0 - Total: 2
[2025-07-23 20:34:57] Ejecutivo ID: 4 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:34:57] Ejecutivo ID: 10 - Citas propias: 3 - Citas hijos: 0 - Total: 3
[2025-07-23 20:34:57] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:34:57] Ejecutivo ID: 2 - Citas propias: 6 - Citas hijos: 4 - Total: 10
[2025-07-23 20:34:57] Ejecutivo ID: 14 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:34:57] Ejecutivo ID: 21 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:34:57] Ejecutivo ID: 20 - Citas propias: 5 - Citas hijos: 0 - Total: 5
[2025-07-23 20:34:57] Ejecutivo ID: 13 - Citas propias: 4 - Citas hijos: 0 - Total: 4
[2025-07-23 20:34:57] Ejecutivo ID: 1 - Citas propias: 0 - Citas hijos: 0 - Total: 0
[2025-07-23 20:34:57] Ejecutivos con citas encontrados: 15
